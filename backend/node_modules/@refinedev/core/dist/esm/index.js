import kt,{useEffect as _a,useState as Za}from"react";import pt from"react";var ro=pt.createContext({}),oo=({children:e,isProvided:t,...r})=>{let{replace:o}=te(),s=async m=>{var l;try{return await((l=r.login)==null?void 0:l.call(r,m))}catch(f){return Promise.reject(f)}},a=async m=>{var l;try{return await((l=r.register)==null?void 0:l.call(r,m))}catch(f){return Promise.reject(f)}},n=async m=>{var l;try{return await((l=r.logout)==null?void 0:l.call(r,m))}catch(f){return Promise.reject(f)}},i=async m=>{var l;try{return await((l=r.checkAuth)==null?void 0:l.call(r,m)),Promise.resolve()}catch(f){return f!=null&&f.redirectPath&&o(f.redirectPath),Promise.reject(f)}};return pt.createElement(ro.Provider,{value:{...r,login:s,logout:n,checkAuth:i,register:a,isProvided:t}},e)},so=pt.createContext({}),no=({children:e,isProvided:t,...r})=>{let o=async l=>{var f;try{return await((f=r.login)==null?void 0:f.call(r,l))}catch(c){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",c),Promise.reject(c)}},s=async l=>{var f;try{return await((f=r.register)==null?void 0:f.call(r,l))}catch(c){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",c),Promise.reject(c)}},a=async l=>{var f;try{return await((f=r.logout)==null?void 0:f.call(r,l))}catch(c){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",c),Promise.reject(c)}},n=async l=>{var f;try{let c=await((f=r.check)==null?void 0:f.call(r,l));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",c),Promise.reject(c)}},i=async l=>{var f;try{let c=await((f=r.forgotPassword)==null?void 0:f.call(r,l));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",c),Promise.reject(c)}},m=async l=>{var f;try{let c=await((f=r.updatePassword)==null?void 0:f.call(r,l));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",c),Promise.reject(c)}};return pt.createElement(so.Provider,{value:{...r,login:o,logout:a,check:n,register:s,forgotPassword:i,updatePassword:m,isProvided:t}},e)},Y=()=>pt.useContext(ro),ee=()=>pt.useContext(so);import{useQuery as ao}from"@tanstack/react-query";function Ss({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=Y(),{getPermissions:o}=ee(),s=ao(["usePermissions"],o!=null?o:()=>Promise.resolve(void 0),{enabled:!e&&!!o,...e?{}:t}),a=ao(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?a:s}import{useQuery as io}from"@tanstack/react-query";function pr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=Y(),{getIdentity:o}=ee(),s=io(["getUserIdentity"],o!=null?o:()=>Promise.resolve({}),{enabled:!e&&!!o,retry:!1,...e===!0?{}:t}),a=io(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?a:s}import{useMutation as uo}from"@tanstack/react-query";import{useQueryClient as ks}from"@tanstack/react-query";var lt=()=>{let e=ks();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function Ot({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lt(),o=F(),s=re(),{push:a}=te(),{open:n,close:i}=ye(),{logout:m}=Y(),{logout:l}=ee(),f=uo(["useLogout"],l,{onSuccess:async(g,x)=>{let{success:E,error:T,redirectTo:u}=g,{redirectPath:d}=x!=null?x:{},R=d!=null?d:u;E&&(i==null||i("useLogout-error")),(T||!E)&&(n==null||n(lr(T))),await r(),R!==!1&&(o==="legacy"?a(R!=null?R:"/login"):R&&s({to:R}))},onError:g=>{n==null||n(lr(g))},...e===!0?{}:t}),c=uo(["useLogout","v3LegacyAuthProviderCompatible"],m,{onSuccess:async(g,x)=>{var T;let E=(T=x==null?void 0:x.redirectPath)!=null?T:g;if(await r(),E!==!1){if(E){o==="legacy"?a(E):s({to:E});return}o==="legacy"?a("/login"):s({to:"/login"})}},onError:g=>{n==null||n(lr(g))},...e?t:{}});return e?c:f}var lr=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"});import Vs from"react";import{useMutation as co}from"@tanstack/react-query";import Qs from"qs";function Ct({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lt(),o=F(),s=re(),{replace:a}=te(),n=j(),{useLocation:i}=K(),{search:m}=i(),{close:l,open:f}=ye(),{login:c}=Y(),{login:g}=ee(),x=Vs.useMemo(()=>{var u;return o==="legacy"?Qs.parse(m,{ignoreQueryPrefix:!0}).to:(u=n.params)==null?void 0:u.to},[o,n.params,m]),E=co(["useLogin"],g,{onSuccess:async({success:u,redirectTo:d,error:R})=>{u&&(l==null||l("login-error")),(R||!u)&&(f==null||f(dr(R))),await r(),x&&u?o==="legacy"?a(x):s({to:x,type:"replace"}):d?o==="legacy"?a(d):s({to:d,type:"replace"}):o==="legacy"&&a("/")},onError:u=>{f==null||f(dr(u))},...e===!0?{}:t}),T=co(["useLogin","v3LegacyAuthProviderCompatible"],c,{onSuccess:async u=>{await r(),x&&a(x),u!==!1&&!x&&(typeof u=="string"?o==="legacy"?a(u):s({to:u,type:"replace"}):o==="legacy"?a("/"):s({to:"/",type:"replace"})),l==null||l("login-error")},onError:u=>{f==null||f(dr(u))},...e?t:{}});return e?T:E}var dr=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"});import{useMutation as po}from"@tanstack/react-query";function fr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lt(),o=F(),s=re(),{replace:a}=te(),{register:n}=Y(),{register:i}=ee(),{close:m,open:l}=ye(),f=po(["useRegister"],i,{onSuccess:async({success:g,redirectTo:x,error:E})=>{g&&(m==null||m("register-error")),(E||!g)&&(l==null||l(mr(E))),await r(),x?o==="legacy"?a(x):s({to:x,type:"replace"}):o==="legacy"&&a("/")},onError:g=>{l==null||l(mr(g))},...e===!0?{}:t}),c=po(["useRegister","v3LegacyAuthProviderCompatible"],n,{onSuccess:async g=>{await r(),g!==!1&&(g?o==="legacy"?a(g):s({to:g,type:"replace"}):o==="legacy"?a("/"):s({to:"/",type:"replace"}),m==null||m("register-error"))},onError:g=>{l==null||l(mr(g))},...e?t:{}});return e?c:f}var mr=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"});import{useMutation as lo}from"@tanstack/react-query";function gr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=F(),o=re(),{replace:s}=te(),{forgotPassword:a}=Y(),{forgotPassword:n}=ee(),{close:i,open:m}=ye(),l=lo(["useForgotPassword"],n,{onSuccess:({success:c,redirectTo:g,error:x})=>{c&&(i==null||i("forgot-password-error")),(x||!c)&&(m==null||m(yr(x))),g&&(r==="legacy"?s(g):o({to:g,type:"replace"}))},onError:c=>{m==null||m(yr(c))},...e===!0?{}:t}),f=lo(["useForgotPassword","v3LegacyAuthProviderCompatible"],a,{onSuccess:c=>{c!==!1&&c&&(r==="legacy"?s(c):o({to:c,type:"replace"})),i==null||i("forgot-password-error")},onError:c=>{m==null||m(yr(c))},...e?t:{}});return e?f:l}var yr=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"});import Bs from"react";import{useMutation as mo}from"@tanstack/react-query";import Ns from"qs";function Rr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=F(),o=re(),{replace:s}=te(),{updatePassword:a}=Y(),{updatePassword:n}=ee(),{close:i,open:m}=ye(),l=j(),{useLocation:f}=K(),{search:c}=f(),g=Bs.useMemo(()=>{var T;if(r==="legacy"){let u=Ns.parse(c,{ignoreQueryPrefix:!0});return u!=null?u:{}}else return(T=l.params)!=null?T:{}},[c,l,r]),x=mo(["useUpdatePassword"],async T=>n==null?void 0:n({...g,...T}),{onSuccess:({success:T,redirectTo:u,error:d})=>{T&&(i==null||i("update-password-error")),(d||!T)&&(m==null||m(Tr(d))),u&&(r==="legacy"?s(u):o({to:u,type:"replace"}))},onError:T=>{m==null||m(Tr(T))},...e===!0?{}:t}),E=mo(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async T=>a==null?void 0:a({...g,...T}),{onSuccess:T=>{T!==!1&&T&&(r==="legacy"?s(T):o({to:T,type:"replace"})),i==null||i("update-password-error")},onError:T=>{m==null||m(Tr(T))},...e?t:{}});return e?E:x}var Tr=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"});import{useQuery as fo}from"@tanstack/react-query";function $t({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=Y(),{check:o}=ee(),s=fo(["useAuthenticated",t],async()=>{var n;return(n=await(o==null?void 0:o(t)))!=null?n:{}},{retry:!1,enabled:!e}),a=fo(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>{var n;return(n=await(r==null?void 0:r(t)))!=null?n:{}},{retry:!1,enabled:e});return e?a:s}var Fs=$t;import{useMutation as yo}from"@tanstack/react-query";function J({v3LegacyAuthProviderCompatible:e=!1}={}){let t=F(),r=re(),{replace:o}=te(),{checkError:s}=Y(),{onError:a}=ee(),{mutate:n}=Ot({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:i}=Ot({v3LegacyAuthProviderCompatible:Boolean(e)}),m=yo(["useCheckError"],a,{onSuccess:({logout:f,redirectTo:c})=>{if(f){i({redirectPath:c});return}if(c){t==="legacy"?o(c):r({to:c,type:"replace"});return}}}),l=yo(["useCheckError","v3LegacyAuthProviderCompatible"],s,{onError:f=>{n({redirectPath:f})}});return e?l:m}var Hs=J;var xr=()=>{let{isProvided:e}=Y(),{isProvided:t}=ee();return Boolean(t||e)};import{useQuery as Js}from"@tanstack/react-query";var ht=e=>e/1e3;import Os from"lodash/zip";import $s from"lodash/fromPairs";var Kt=(e,t=r=>r)=>{let[r,...o]=e;return o.map(s=>$s(Os(r,s))).map((s,a,n)=>t.call(void 0,s,a,n))};import Po from"pluralize";import Pr from"qs";import go from"lodash/unionWith";import To from"lodash/differenceWith";import Ks from"warn-once";var Wt=e=>{var n;let{current:t,pageSize:r,sorter:o,sorters:s,filters:a}=Pr.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:(n=C(s,o))!=null?n:[],parsedFilters:a!=null?a:[]}},Ws=e=>{let t=Pr.stringify(e);return Wt(`/${t}`)},Gt=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,sorters:s,filters:a,...n}=e;return Pr.stringify({...n,...r||{},sorters:C(s,o),filters:a},t)},Ro=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,xo=(e,t)=>e.field==t.field,dt=(e,t,r=[])=>(t.filter(s=>(s.operator==="or"||s.operator==="and")&&!s.key).length>1&&Ks(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),go(e,t,r,Ro).filter(s=>s.value!==void 0&&s.value!==null&&(s.operator!=="or"||s.operator==="or"&&s.value.length!==0)&&(s.operator!=="and"||s.operator==="and"&&s.value.length!==0))),zt=(e,t)=>go(e,t,xo).filter(r=>r.order!==void 0&&r.order!==null),jt=(e,t)=>[...To(t,e,Ro),...e],_t=(e,t)=>[...To(t,e,xo),...e],Gs=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},zs=(e,t,r="eq")=>{let o=t==null?void 0:t.find(s=>{if(s.operator!=="or"&&s.operator!=="and"&&"field"in s){let{operator:a,field:n}=s;return n===e&&a===r}});if(o)return o.value||[]};var js=e=>new Promise((t,r)=>{let o=new FileReader,s=()=>{o.result&&(o.removeEventListener("load",s,!1),t(o.result))};o.addEventListener("load",s,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",s,!1),r(a))});var mt=(e="",t)=>{let r=qe(e);return t==="singular"?Po.singular(r):Po.plural(r)};var Co=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var C=(...e)=>e.find(t=>typeof t<"u");var _=(e,t,r,o)=>{let s=t||"default",a={all:[s],resourceAll:[s,e||""],list:n=>[...a.resourceAll,"list",{...n,...C(r,o)||{}}],many:n=>[...a.resourceAll,"getMany",n&&n.map(String),{...C(r,o)||{}}].filter(i=>i!==void 0),detail:n=>[...a.resourceAll,"detail",n==null?void 0:n.toString(),{...C(r,o)||{}}],logList:n=>["logList",e,n,o].filter(i=>i!==void 0)};return a};var Cr=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var et=e=>e.startsWith(":");var Se=e=>e.split("/").filter(r=>r!=="");var hr=(e,t)=>{let r=Se(e),o=Se(t);return r.length===o.length};var pe=e=>e.replace(/^\/|\/$/g,"");var br=(e,t)=>{let r=pe(e),o=pe(t);if(!hr(r,o))return!1;let s=Se(r);return Se(o).every((n,i)=>et(n)||n===s[i])};var vr=(e,t,r)=>{let o=pe(r||""),s=`${o}${o?"/":""}${e}`;return t==="list"?s=`${s}`:t==="create"?s=`${s}/create`:t==="edit"?s=`${s}/edit/:id`:t==="show"?s=`${s}/show/:id`:t==="clone"&&(s=`${s}/clone/:id`),`/${s.replace(/^\//,"")}`};var Te=(e,t)=>{var s,a;let r=C((s=e.meta)==null?void 0:s.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!r)return;let o=t.find(n=>{var i;return((i=n.identifier)!=null?i:n.name)===r});return o!=null?o:{name:r}};var bt=(e,t,r)=>{let o=[],s=Te(e,t);for(;s;)o.push(s),s=Te(s,t);if(o.length!==0)return`/${o.reverse().map(a=>{var i,m;let n=r&&(m=(i=a.options)==null?void 0:i.route)!=null?m:a.name;return pe(n)}).join("/")}`};var ae=(e,t,r)=>{let o=[],s=["list","show","edit","create","clone"],a=bt(e,t,r);return s.forEach(n=>{var l,f,c,g;let i=r&&n==="clone"?e.create:e[n],m;typeof i=="function"||r?m=vr(r&&(g=(c=(l=e.meta)==null?void 0:l.route)!=null?c:(f=e.options)==null?void 0:f.route)!=null?g:e.name,n,r?a:void 0):typeof i=="string"?m=i:typeof i=="object"&&(m=i.path),m&&o.push({action:n,resource:e,route:`/${m.replace(/^\//,"")}`})}),o};var ho=e=>{var s,a;if(e.length===0)return;if(e.length===1)return e[0];let t=e.map(n=>({...n,splitted:Se(pe(n.route))})),r=(a=(s=t[0])==null?void 0:s.splitted.length)!=null?a:0,o=[...t];for(let n=0;n<r;n++){let i=o.filter(m=>!et(m.splitted[n]));if(i.length!==0){if(i.length===1){o=i;break}o=i}}return o[0]};var Dr=(e,t)=>{let o=t.flatMap(a=>ae(a,t)).filter(a=>br(e,a.route)),s=ho(o);return{found:!!s,resource:s==null?void 0:s.resource,action:s==null?void 0:s.action,matchedRoute:s==null?void 0:s.route}};var Zt=(e,t)=>{var s,a,n;let r,o=bt(e,t,!0);if(o){let i=C(e.meta,e.options);r=`${o}/${(s=i==null?void 0:i.route)!=null?s:e.name}`}else r=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;return`/${r.replace(/^\//,"")}`};var bo=e=>{var n,i,m;let t=[],r={},o={},s,a;for(let l=0;l<e.length;l++){s=e[l];let f=(m=(i=s.route)!=null?i:(n=C(s==null?void 0:s.meta,s.options))==null?void 0:n.route)!=null?m:"";r[f]=s,r[f].children=[],o[s.name]=s,o[s.name].children=[]}for(let l in r)r.hasOwnProperty(l)&&(a=r[l],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var qe=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);import vo from"react";import _s from"react";var Er=({children:e})=>_s.createElement("div",null,e);var ke={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},me=vo.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Er,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:ke}),Do=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:s,children:a,DashboardPage:n,Title:i,Layout:m=Er,Header:l,Sider:f,Footer:c,OffLayoutArea:g,LoginPage:x=Ur,catchAll:E,liveMode:T="off",onLiveEvent:u,options:d})=>vo.createElement(me.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:i,undoableTimeout:s,Layout:m,Header:l,Sider:f,Footer:c,OffLayoutArea:g,DashboardPage:n,LoginPage:x,catchAll:E,liveMode:T,onLiveEvent:u,options:d}},a);var Lr=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:s,reactQueryDevtoolConfig:a,syncWithLocation:n,undoableTimeout:i,warnWhenUnsavedChanges:m}={})=>{var g,x,E,T,u,d,R,h,b,y,p,P,v,D,U,L,M,I,A,V,N,w,B,H;let l={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(x=(g=e==null?void 0:e.mutationMode)!=null?g:o)!=null?x:ke.mutationMode,undoableTimeout:(T=(E=e==null?void 0:e.undoableTimeout)!=null?E:i)!=null?T:ke.undoableTimeout,syncWithLocation:(d=(u=e==null?void 0:e.syncWithLocation)!=null?u:n)!=null?d:ke.syncWithLocation,warnWhenUnsavedChanges:(h=(R=e==null?void 0:e.warnWhenUnsavedChanges)!=null?R:m)!=null?h:ke.warnWhenUnsavedChanges,liveMode:(y=(b=e==null?void 0:e.liveMode)!=null?b:r)!=null?y:ke.liveMode,redirect:{afterCreate:(P=(p=e==null?void 0:e.redirect)==null?void 0:p.afterCreate)!=null?P:ke.redirect.afterCreate,afterClone:(D=(v=e==null?void 0:e.redirect)==null?void 0:v.afterClone)!=null?D:ke.redirect.afterClone,afterEdit:(L=(U=e==null?void 0:e.redirect)==null?void 0:U.afterEdit)!=null?L:ke.redirect.afterEdit}},f=(I=(M=e==null?void 0:e.disableTelemetry)!=null?M:t)!=null?I:!1,c={clientConfig:(N=(V=(A=e==null?void 0:e.reactQuery)==null?void 0:A.clientConfig)!=null?V:s)!=null?N:{},devtoolConfig:(H=(B=(w=e==null?void 0:e.reactQuery)==null?void 0:w.devtoolConfig)!=null?B:a)!=null?H:{}};return{optionsWithDefaults:l,disableTelemetryWithDefault:f,reactQueryWithDefaults:c}};var Ir=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}};var Yt=async(e,t,r)=>{let o=[];for(let[s,a]of e.entries())try{let n=await a();o.push(t(n,s))}catch(n){o.push(r(n,s))}return o};var $=(e,t=[],r=!1)=>{if(!e)return;if(r){let s=t.find(n=>{var i;return pe((i=n.route)!=null?i:"")===pe(e)});return s||t.find(n=>n.name===e)}return t.find(s=>{var a;return((a=s.identifier)!=null?a:s.name)===e})};var k=(e,t,r)=>{if(t)return t;let o=$(e,r),s=C(o==null?void 0:o.meta,o==null?void 0:o.options);return s!=null&&s.dataProviderName?s.dataProviderName:"default"};var Ne=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var Jt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,s=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/s);return o<a?Number(o)+1:void 0},Xt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var qt=e=>{let t=[];return e==null||e.forEach(r=>{var o,s,a;t.push({...r,label:(a=(o=r.meta)==null?void 0:o.label)!=null?a:(s=r.options)==null?void 0:s.label,route:Zt(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t};var Eo=e=>Se(pe(e)).flatMap(r=>et(r)?[r.slice(1)]:[]);var Uo=(e,t={},r={})=>e.reduce((o,s)=>{var n;let a=r[s]||((n=t.params)==null?void 0:n[s])||(s==="id"?t.id:void 0)||(s==="action"?t.action:void 0)||(s==="resource"?t.resource:void 0);return typeof a<"u"&&(o[s]=a),o},{});var le=(e,t={},r={})=>{let o=Eo(e),s=Uo(o,t,r);return e.replace(/:([^\/]+)/g,(a,n)=>{let i=s[n];return typeof i<"u"?`${i}`:a})};var O=()=>{let e=Y(),t=ee();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null};var vt=({hasPagination:e,pagination:t,configPagination:r}={})=>{var i,m,l;let o=e===!1?"off":"server",s=(i=t==null?void 0:t.mode)!=null?i:o,a=(m=C(t==null?void 0:t.current,r==null?void 0:r.current))!=null?m:1,n=(l=C(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?l:10;return{current:a,pageSize:n,mode:s}};import{useState as Zs,useEffect as Ys}from"react";var er=e=>{let[t,r]=Zs(!1);return Ys(()=>{let o=window.matchMedia(e);o.matches!==t&&r(o.matches);let s=()=>r(o.matches);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[t,e]),t};var Dt=({resource:e,config:t,filters:r,hasPagination:o,pagination:s,sorters:a,queryOptions:n,successNotification:i,errorNotification:m,meta:l,metaData:f,liveMode:c,onLiveEvent:g,liveParams:x,dataProviderName:E})=>{let{resources:T}=S(),u=W(),d=Q(),R=O(),{mutate:h}=J({v3LegacyAuthProviderCompatible:Boolean(R==null?void 0:R.isLegacy)}),b=X(),y=k(e,E,T),p=C(l,f),P=C(r,t==null?void 0:t.filters),v=C(a,t==null?void 0:t.sort),D=C(o,t==null?void 0:t.hasPagination),U=vt({pagination:s,configPagination:t==null?void 0:t.pagination,hasPagination:D}),L=U.mode==="server",M={meta:p,metaData:p,filters:P,hasPagination:L,pagination:U,sorters:v,config:{...t,sort:v}},I=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,A=_(e,y,p,p),{getList:V}=u(y);return _e({resource:e,types:["*"],params:{meta:p,metaData:p,pagination:U,hasPagination:L,sort:v,sorters:v,filters:P,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:I,liveMode:c,onLiveEvent:g}),Js(A.list({filters:P,hasPagination:L,...L&&{pagination:U},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:w,pageParam:B,signal:H})=>V({resource:e,pagination:U,hasPagination:L,filters:P,sort:v,sorters:v,meta:{...p||{},queryContext:{queryKey:w,pageParam:B,signal:H}},metaData:{...p||{},queryContext:{queryKey:w,pageParam:B,signal:H}}}),{...n,enabled:typeof(n==null?void 0:n.enabled)<"u"?n==null?void 0:n.enabled:!!e,select:w=>{var z;let B=w,{current:H,mode:fe,pageSize:ve}=U;return fe==="client"&&(B={...B,data:B.data.slice((H-1)*ve,H*ve),total:B.total}),n!=null&&n.select?(z=n==null?void 0:n.select)==null?void 0:z.call(n,B):B},onSuccess:w=>{var H;(H=n==null?void 0:n.onSuccess)==null||H.call(n,w);let B=typeof i=="function"?i(w,M,e):i;b(B)},onError:w=>{var H;h(w),(H=n==null?void 0:n.onError)==null||H.call(n,w);let B=typeof m=="function"?m(w,M,e):m;b(B,{key:`${e}-useList-notification`,message:d("notifications.error",{statusCode:w.statusCode},`Error (status code: ${w.statusCode})`),description:w.message,type:"error"})}})};import{useQuery as Xs}from"@tanstack/react-query";var Et=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:s,meta:a,metaData:n,liveMode:i,onLiveEvent:m,liveParams:l,dataProviderName:f})=>{let{resources:c}=S(),g=W(),x=_(e,k(e,f,c),C(a,n),C(a,n)),{getOne:E}=g(k(e,f,c)),T=Q(),u=O(),{mutate:d}=J({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),R=X();return _e({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:C(a,n),metaData:C(a,n),subscriptionType:"useOne",...l},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:i,onLiveEvent:m}),Xs(x.detail(t),({queryKey:b,pageParam:y,signal:p})=>E({resource:e,id:t,meta:{...C(a,n)||{},queryContext:{queryKey:b,pageParam:y,signal:p}},metaData:{...C(a,n)||{},queryContext:{queryKey:b,pageParam:y,signal:p}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:b=>{var p;(p=r==null?void 0:r.onSuccess)==null||p.call(r,b);let y=typeof o=="function"?o(b,{id:t,...C(a,n)||{}},e):o;R(y)},onError:b=>{var p;d(b),(p=r==null?void 0:r.onError)==null||p.call(r,b);let y=typeof s=="function"?s(b,{id:t,...C(a,n)||{}},e):s;R(y,{key:`${t}-${e}-getOne-notification`,message:T("notifications.error",{statusCode:b.statusCode},`Error (status code: ${b.statusCode})`),description:b.message,type:"error"})}})};import{useQuery as qs}from"@tanstack/react-query";var Mr=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:s,meta:a,metaData:n,liveMode:i,onLiveEvent:m,liveParams:l,dataProviderName:f})=>{let{resources:c}=S(),g=W(),x=_(e,k(e,f,c),C(a,n),C(a,n)),{getMany:E,getOne:T}=g(k(e,f,c)),u=Q(),d=O(),{mutate:R}=J({v3LegacyAuthProviderCompatible:Boolean(d==null?void 0:d.isLegacy)}),h=X(),b=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return _e({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:C(a,n),metaData:C(a,n),subscriptionType:"useMany",...l},channel:`resources/${e}`,enabled:b,liveMode:i,onLiveEvent:m}),qs(x.many(t),({queryKey:p,pageParam:P,signal:v})=>E?E({resource:e,ids:t,metaData:{...C(a,n)||{},queryContext:{queryKey:p,pageParam:P,signal:v}}}):Ne(t.map(D=>T({resource:e,id:D,metaData:{...C(a,n)||{},queryContext:{queryKey:p,pageParam:P,signal:v}}}))),{...r,onSuccess:p=>{var v;(v=r==null?void 0:r.onSuccess)==null||v.call(r,p);let P=typeof o=="function"?o(p,t,e):o;h(P)},onError:p=>{var v;R(p),(v=r==null?void 0:r.onError)==null||v.call(r,p);let P=typeof s=="function"?s(p,t,e):s;h(P,{key:`${t[0]}-${e}-getMany-notification`,message:u("notifications.error",{statusCode:p.statusCode},`Error (status code: ${p.statusCode})`),description:p.message,type:"error"})}})};import{useMutation as on,useQueryClient as sn}from"@tanstack/react-query";import Ar,{useReducer as en}from"react";import wr from"lodash-es/isEqual";var tr=Ar.createContext({notifications:[],notificationDispatch:()=>!1}),tn=[],rn=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!(wr(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!(wr(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>wr(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},Sr=({children:e})=>{let[t,r]=en(rn,tn),o={notifications:t,notificationDispatch:r};return Ar.createElement(tr.Provider,{value:o},e,typeof window<"u"&&t.map(s=>Ar.createElement(Lo,{key:`${s.id}-${s.resource}-queue`,notification:s})))};import Io from"pluralize";var kr=({mutationOptions:e}={})=>{let{resources:t}=S(),r=sn(),o=W(),{mutationMode:s,undoableTimeout:a}=Me(),n=Q(),i=O(),{mutate:m}=J({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),l=Pe(),{log:f}=Ce(),{notificationDispatch:c}=Ve(),g=X(),x=he();return on(({id:T,values:u,resource:d,mutationMode:R,undoableTimeout:h,onCancel:b,meta:y,metaData:p,dataProviderName:P})=>{let v=R!=null?R:s,D=h!=null?h:a;return v!=="undoable"?o(k(d,P,t)).update({resource:d,id:T,variables:u,meta:C(y,p),metaData:C(y,p)}):new Promise((L,M)=>{let I=()=>{o(k(d,P,t)).update({resource:d,id:T,variables:u,meta:C(y,p),metaData:C(y,p)}).then(V=>L(V)).catch(V=>M(V))},A=()=>{M({message:"mutationCancelled"})};b&&b(A),c({type:"ADD",payload:{id:T,resource:d,cancelMutation:A,doMutation:I,seconds:D,isSilent:!!b}})})},{onMutate:async({resource:T,id:u,mutationMode:d,values:R,dataProviderName:h})=>{let b=_(T,k(T,h,t)),y=r.getQueriesData(b.resourceAll),p=d!=null?d:s;return await r.cancelQueries(b.resourceAll,void 0,{silent:!0}),p!=="pessimistic"&&(r.setQueriesData(b.list(),P=>{if(!P)return null;let v=P.data.map(D=>{var U;return((U=D.id)==null?void 0:U.toString())===(u==null?void 0:u.toString())?{id:u,...D,...R}:D});return{...P,data:v}}),r.setQueriesData(b.many(),P=>{if(!P)return null;let v=P.data.map(D=>{var U;return((U=D.id)==null?void 0:U.toString())===(u==null?void 0:u.toString())&&(D={id:u,...D,...R}),D});return{...P,data:v}}),r.setQueriesData(b.detail(u),P=>P?{...P,data:{...P.data,...R}}:null)),{previousQueries:y,queryKey:b}},onSettled:(T,u,{id:d,resource:R,dataProviderName:h,invalidates:b=["list","many","detail"]})=>{x({resource:R,dataProviderName:k(R,h,t),invalidates:b,id:d}),c({type:"REMOVE",payload:{id:d,resource:R}})},onSuccess:(T,{id:u,resource:d,successNotification:R,dataProviderName:h,values:b,meta:y,metaData:p},P)=>{var V;let v=Io.singular(d),D=typeof R=="function"?R(T,{id:u,values:b},d):R;g(D,{key:`${u}-${d}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${d}.${d}`,v)},`Successfully updated ${v}`),type:"success"}),l==null||l({channel:`resources/${d}`,type:"updated",payload:{ids:(V=T.data)!=null&&V.id?[T.data.id]:void 0},date:new Date});let U;if(P){let N=r.getQueryData(P.queryKey.detail(u));U=Object.keys(b||{}).reduce((w,B)=>{var H;return w[B]=(H=N==null?void 0:N.data)==null?void 0:H[B],w},{})}let{fields:L,operation:M,variables:I,...A}=C(y,p)||{};f==null||f.mutate({action:"update",resource:d,data:b,previousData:U,meta:{id:u,dataProviderName:k(d,h,t),...A}})},onError:(T,{id:u,resource:d,errorNotification:R,values:h},b)=>{if(b)for(let y of b.previousQueries)r.setQueryData(y[0],y[1]);if(T.message!=="mutationCancelled"){m==null||m(T);let y=Io.singular(d),p=typeof R=="function"?R(T,{id:u,values:h},d):R;g(p,{key:`${u}-${d}-notification`,message:n("notifications.editError",{resource:n(`${d}.${d}`,y),statusCode:T.statusCode},`Error when updating ${y} (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};import{useMutation as nn}from"@tanstack/react-query";import Mo from"pluralize";var Ut=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=W(),s=he(),{resources:a}=S(),n=Q(),i=Pe(),{log:m}=Ce(),l=X();return nn(({resource:c,values:g,meta:x,metaData:E,dataProviderName:T})=>o(k(c,T,a)).create({resource:c,variables:g,meta:C(x,E),metaData:C(x,E)}),{onSuccess:(c,{resource:g,successNotification:x,dataProviderName:E,invalidates:T=["list","many"],values:u,meta:d,metaData:R})=>{var D,U,L;let h=Mo.singular(g),b=typeof x=="function"?x(c,u,g):x;l(b,{key:`create-${g}-notification`,message:n("notifications.createSuccess",{resource:n(`${g}.${g}`,h)},`Successfully created ${h}`),description:n("notifications.success","Success"),type:"success"}),s({resource:g,dataProviderName:k(g,E,a),invalidates:T}),i==null||i({channel:`resources/${g}`,type:"created",payload:{ids:(D=c==null?void 0:c.data)!=null&&D.id?[c.data.id]:void 0},date:new Date});let{fields:y,operation:p,variables:P,...v}=C(d,R)||{};m==null||m.mutate({action:"create",resource:g,data:u,meta:{dataProviderName:k(g,E,a),id:(L=(U=c==null?void 0:c.data)==null?void 0:U.id)!=null?L:void 0,...v}})},onError:(c,{resource:g,errorNotification:x,values:E})=>{r(c);let T=Mo.singular(g),u=typeof x=="function"?x(c,E,g):x;l(u,{key:`create-${g}-notification`,description:c.message,message:n("notifications.createError",{resource:n(`${g}.${g}`,T),statusCode:c.statusCode},`There was an error creating ${T} (status code: ${c.statusCode})`),type:"error"})},...e})};import{useQueryClient as an,useMutation as un}from"@tanstack/react-query";import wo from"pluralize";var cn=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=W(),{resources:s}=S(),a=an(),{mutationMode:n,undoableTimeout:i}=Me(),{notificationDispatch:m}=Ve(),l=Q(),f=Pe(),{log:c}=Ce(),g=X(),x=he();return un(({id:T,mutationMode:u,undoableTimeout:d,resource:R,onCancel:h,meta:b,metaData:y,dataProviderName:p,values:P})=>{let v=u!=null?u:n,D=d!=null?d:i;return v!=="undoable"?o(k(R,p,s)).deleteOne({resource:R,id:T,meta:C(b,y),metaData:C(b,y),variables:P}):new Promise((L,M)=>{let I=()=>{o(k(R,p,s)).deleteOne({resource:R,id:T,meta:C(b,y),variables:P}).then(V=>L(V)).catch(V=>M(V))},A=()=>{M({message:"mutationCancelled"})};h&&h(A),m({type:"ADD",payload:{id:T,resource:R,cancelMutation:A,doMutation:I,seconds:D,isSilent:!!h}})})},{onMutate:async({id:T,resource:u,mutationMode:d,dataProviderName:R})=>{let h=_(u,k(u,R,s)),b=d!=null?d:n;await a.cancelQueries(h.resourceAll,void 0,{silent:!0});let y=a.getQueriesData(h.resourceAll);return b!=="pessimistic"&&(a.setQueriesData(h.list(),p=>p?{data:p.data.filter(v=>{var D;return((D=v.id)==null?void 0:D.toString())!==T.toString()}),total:p.total-1}:null),a.setQueriesData(h.many(),p=>{if(!p)return null;let P=p.data.filter(v=>{var D;return((D=v.id)==null?void 0:D.toString())!==(T==null?void 0:T.toString())});return{...p,data:P}})),{previousQueries:y,queryKey:h}},onSettled:(T,u,{id:d,resource:R,dataProviderName:h,invalidates:b=["list","many"]})=>{x({resource:R,dataProviderName:k(R,h,s),invalidates:b}),m({type:"REMOVE",payload:{id:d,resource:R}})},onSuccess:(T,{id:u,resource:d,successNotification:R,dataProviderName:h,meta:b,metaData:y},p)=>{let P=wo.singular(d!=null?d:"");a.removeQueries(p==null?void 0:p.queryKey.detail(u));let v=typeof R=="function"?R(T,u,d):R;g(v,{key:`${u}-${d}-notification`,description:l("notifications.success","Success"),message:l("notifications.deleteSuccess",{resource:l(`${d}.${d}`,P)},`Successfully deleted a ${P}`),type:"success"}),f==null||f({channel:`resources/${d}`,type:"deleted",payload:{ids:u?[u]:[]},date:new Date});let{fields:D,operation:U,variables:L,...M}=C(b,y)||{};c==null||c.mutate({action:"delete",resource:d,meta:{id:u,dataProviderName:k(d,h,s),...M}}),a.removeQueries(p==null?void 0:p.queryKey.detail(u))},onError:(T,{id:u,resource:d,errorNotification:R},h)=>{if(h)for(let b of h.previousQueries)a.setQueryData(b[0],b[1]);if(T.message!=="mutationCancelled"){r(T);let b=wo.singular(d!=null?d:""),y=typeof R=="function"?R(T,u,d):R;g(y,{key:`${u}-${d}-notification`,message:l("notifications.deleteError",{resource:b,statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};import{useMutation as pn}from"@tanstack/react-query";import ln from"pluralize";var Vr=({mutationOptions:e}={})=>{let t=W(),{resources:r}=S(),o=Q(),s=Pe(),a=X(),n=he(),{log:i}=Ce();return pn(({resource:l,values:f,meta:c,metaData:g,dataProviderName:x})=>{let E=t(k(l,x,r));return E.createMany?E.createMany({resource:l,variables:f,meta:C(c,g),metaData:C(c,g)}):Ne(f.map(T=>E.create({resource:l,variables:T,meta:C(c,g),metaData:C(c,g)})))},{onSuccess:(l,{resource:f,successNotification:c,dataProviderName:g,invalidates:x=["list","many"],values:E,meta:T,metaData:u})=>{let d=ln.plural(f),R=typeof c=="function"?c(l,E,f):c;a(R,{key:`createMany-${f}-notification`,message:o("notifications.createSuccess",{resource:o(`${f}.${f}`,f)},`Successfully created ${d}`),description:o("notifications.success","Success"),type:"success"}),n({resource:f,dataProviderName:k(f,g,r),invalidates:x});let h=l==null?void 0:l.data.filter(v=>(v==null?void 0:v.id)!==void 0).map(v=>v.id);s==null||s({channel:`resources/${f}`,type:"created",payload:{ids:h},date:new Date});let{fields:b,operation:y,variables:p,...P}=C(T,u)||{};i==null||i.mutate({action:"createMany",resource:f,data:E,meta:{dataProviderName:k(f,g,r),ids:h,...P}})},onError:(l,{resource:f,errorNotification:c,values:g})=>{let x=typeof c=="function"?c(l,g,f):c;a(x,{key:`createMany-${f}-notification`,description:l.message,message:o("notifications.createError",{resource:o(`${f}.${f}`,f),statusCode:l.statusCode},`There was an error creating ${f} (status code: ${l.statusCode}`),type:"error"})},...e})};import{useMutation as dn,useQueryClient as mn}from"@tanstack/react-query";import Ao from"pluralize";var fn=({mutationOptions:e}={})=>{let{resources:t}=S(),r=mn(),o=W(),s=Q(),{mutationMode:a,undoableTimeout:n}=Me(),i=O(),{mutate:m}=J({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),{notificationDispatch:l}=Ve(),f=Pe(),c=X(),g=he(),{log:x}=Ce();return dn(({ids:T,values:u,resource:d,onCancel:R,mutationMode:h,undoableTimeout:b,meta:y,metaData:p,dataProviderName:P})=>{let v=h!=null?h:a,D=b!=null?b:n,U=o(k(d,P,t)),L=()=>U.updateMany?U.updateMany({resource:d,ids:T,variables:u,meta:C(y,p),metaData:C(y,p)}):Ne(T.map(I=>U.update({resource:d,id:I,variables:u,meta:C(y,p),metaData:C(y,p)})));return v!=="undoable"?L():new Promise((I,A)=>{let V=()=>{L().then(w=>I(w)).catch(w=>A(w))},N=()=>{A({message:"mutationCancelled"})};R&&R(N),l({type:"ADD",payload:{id:T,resource:d,cancelMutation:N,doMutation:V,seconds:D,isSilent:!!R}})})},{onMutate:async({resource:T,ids:u,values:d,mutationMode:R,dataProviderName:h,meta:b,metaData:y})=>{let p=_(T,k(T,h,t),C(b,y),C(b,y)),P=R!=null?R:a;await r.cancelQueries(p.resourceAll,void 0,{silent:!0});let v=r.getQueriesData(p.resourceAll);if(P!=="pessimistic"){r.setQueriesData(p.list(),D=>{if(!D)return null;let U=D.data.map(L=>L.id!==void 0&&u.filter(M=>M!==void 0).map(String).includes(L.id.toString())?{...L,...d}:L);return{...D,data:U}}),r.setQueriesData(p.many(),D=>{if(!D)return null;let U=D.data.map(L=>L.id!==void 0&&u.filter(M=>M!==void 0).map(String).includes(L.id.toString())?{...L,...d}:L);return{...D,data:U}});for(let D of u)r.setQueriesData(p.detail(D),U=>{if(!U)return null;let L={...U.data,...d};return{...U,data:L}})}return{previousQueries:v,queryKey:p}},onSettled:(T,u,{ids:d,resource:R,dataProviderName:h})=>{g({resource:R,invalidates:["list","many"],dataProviderName:k(R,h,t)}),d.forEach(b=>g({resource:R,invalidates:["detail"],dataProviderName:k(R,h,t),id:b})),l({type:"REMOVE",payload:{id:d,resource:R}})},onSuccess:(T,{ids:u,resource:d,meta:R,metaData:h,dataProviderName:b,successNotification:y,values:p},P)=>{let v=Ao.singular(d),D=typeof y=="function"?y(T,{ids:u,values:p},d):y;c(D,{key:`${u}-${d}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${d}.${d}`,d)},`Successfully updated ${v}`),type:"success"}),f==null||f({channel:`resources/${d}`,type:"updated",payload:{ids:u.map(String)},date:new Date});let U=[];P&&u.forEach(V=>{let N=r.getQueryData(P.queryKey.detail(V));U.push(Object.keys(p||{}).reduce((w,B)=>{var H;return w[B]=(H=N==null?void 0:N.data)==null?void 0:H[B],w},{}))});let{fields:L,operation:M,variables:I,...A}=C(R,h)||{};x==null||x.mutate({action:"updateMany",resource:d,data:p,previousData:U,meta:{ids:u,dataProviderName:k(d,b,t),...A}})},onError:(T,{ids:u,resource:d,errorNotification:R,values:h},b)=>{if(b)for(let y of b.previousQueries)r.setQueryData(y[0],y[1]);if(T.message!=="mutationCancelled"){m==null||m(T);let y=Ao.singular(d),p=typeof R=="function"?R(T,{ids:u,values:h},d):R;c(p,{key:`${u}-${d}-updateMany-error-notification`,message:s("notifications.editError",{resource:y,statusCode:T.statusCode},`Error when updating ${y} (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};import{useQueryClient as yn,useMutation as gn}from"@tanstack/react-query";import Tn from"pluralize";var Rn=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:o,undoableTimeout:s}=Me(),a=W(),{notificationDispatch:n}=Ve(),i=Q(),m=Pe(),l=X(),f=he(),{log:c}=Ce(),{resources:g}=S(),x=yn();return gn(({resource:T,ids:u,mutationMode:d,undoableTimeout:R,onCancel:h,meta:b,metaData:y,dataProviderName:p,values:P})=>{let v=d!=null?d:o,D=R!=null?R:s,U=a(k(T,p,g)),L=()=>U.deleteMany?U.deleteMany({resource:T,ids:u,meta:C(b,y),metaData:C(b,y),variables:P}):Ne(u.map(I=>U.deleteOne({resource:T,id:I,meta:C(b,y),metaData:C(b,y),variables:P})));return v!=="undoable"?L():new Promise((I,A)=>{let V=()=>{L().then(w=>I(w)).catch(w=>A(w))},N=()=>{A({message:"mutationCancelled"})};h&&h(N),n({type:"ADD",payload:{id:u,resource:T,cancelMutation:N,doMutation:V,seconds:D,isSilent:!!h}})})},{onMutate:async({ids:T,resource:u,mutationMode:d,dataProviderName:R})=>{let h=_(u,k(u,R,g)),b=d!=null?d:o;await x.cancelQueries(h.resourceAll,void 0,{silent:!0});let y=x.getQueriesData(h.resourceAll);if(b!=="pessimistic"){x.setQueriesData(h.list(),p=>p?{data:p.data.filter(v=>v.id&&!T.map(String).includes(v.id.toString())),total:p.total-1}:null),x.setQueriesData(h.many(),p=>{if(!p)return null;let P=p.data.filter(v=>v.id?!T.map(String).includes(v.id.toString()):!1);return{...p,data:P}});for(let p of T)x.setQueriesData(h.detail(p),P=>!P||P.data.id==p?null:{...P})}return{previousQueries:y,queryKey:h}},onSettled:(T,u,{resource:d,ids:R,dataProviderName:h,invalidates:b=["list","many"]})=>{f({resource:d,dataProviderName:k(d,h,g),invalidates:b}),n({type:"REMOVE",payload:{id:R,resource:d}})},onSuccess:(T,{ids:u,resource:d,meta:R,metaData:h,dataProviderName:b,successNotification:y},p)=>{u.forEach(M=>x.removeQueries(p==null?void 0:p.queryKey.detail(M)));let P=typeof y=="function"?y(T,u,d):y;l(P,{key:`${u}-${d}-notification`,description:i("notifications.success","Success"),message:i("notifications.deleteSuccess",{resource:i(`${d}.${d}`,d)},`Successfully deleted ${d}`),type:"success"}),m==null||m({channel:`resources/${d}`,type:"deleted",payload:{ids:u},date:new Date});let{fields:v,operation:D,variables:U,...L}=C(R,h)||{};c==null||c.mutate({action:"deleteMany",resource:d,meta:{ids:u,dataProviderName:k(d,b,g),...L}}),u.forEach(M=>x.removeQueries(p==null?void 0:p.queryKey.detail(M)))},onError:(T,{ids:u,resource:d,errorNotification:R},h)=>{if(h)for(let b of h.previousQueries)x.setQueryData(b[0],b[1]);if(T.message!=="mutationCancelled"){r(T);let b=Tn.singular(d),y=typeof R=="function"?R(T,u,d):R;l(y,{key:`${u}-${d}-notification`,message:i("notifications.deleteError",{resource:b,statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var xn=e=>{let t=W(),{getApiUrl:r}=t(e);return r()};import{useQuery as Pn}from"@tanstack/react-query";var Cn=({url:e,method:t,config:r,queryOptions:o,successNotification:s,errorNotification:a,meta:n,metaData:i,dataProviderName:m})=>{let l=W(),{custom:f}=l(m),c=O(),{mutate:g}=J({v3LegacyAuthProviderCompatible:Boolean(c==null?void 0:c.isLegacy)}),x=Q(),E=X();if(f)return Pn({queryKey:[m,"custom",t,e,{...r,...C(n,i)||{}}],queryFn:({queryKey:u,pageParam:d,signal:R})=>f({url:e,method:t,...r,metaData:{...C(n,i)||{},queryContext:{queryKey:u,pageParam:d,signal:R}}}),...o,onSuccess:u=>{var R;(R=o==null?void 0:o.onSuccess)==null||R.call(o,u);let d=typeof s=="function"?s(u,{...r,...C(n,i)||{}}):s;E(d)},onError:u=>{var R;g(u),(R=o==null?void 0:o.onError)==null||R.call(o,u);let d=typeof a=="function"?a(u,{...r,...C(n,i)||{}}):a;E(d,{key:`${t}-notification`,message:x("notifications.error",{statusCode:u.statusCode},`Error (status code: ${u.statusCode})`),description:u.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};import{useMutation as hn}from"@tanstack/react-query";var bn=({mutationOptions:e}={})=>{let t=O(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=X(),s=W(),a=Q();return hn(({url:i,method:m,values:l,meta:f,metaData:c,dataProviderName:g,config:x})=>{let{custom:E}=s(g);if(E)return E({url:i,method:m,payload:l,meta:C(f,c),metaData:C(f,c),headers:{...x==null?void 0:x.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(i,{successNotification:m,config:l,meta:f,metaData:c})=>{let g=typeof m=="function"?m(i,{...l,...C(f,c)||{}}):m;o(g)},onError:(i,{errorNotification:m,method:l,config:f,meta:c,metaData:g})=>{r(i);let x=typeof m=="function"?m(i,{...f,...C(c,g)||{}}):m;o(x,{key:`${l}-notification`,message:a("notifications.error",{statusCode:i.statusCode},`Error (status code: ${i.statusCode})`),description:i.message,type:"error"})},...e})};import{useCallback as Dn,useContext as En}from"react";import So from"react";var vn=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Lt=So.createContext(vn()),ko=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},So.createElement(Lt.Provider,{value:r},e)};var W=()=>{let e=En(Lt);return Dn(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};import{useInfiniteQuery as Un}from"@tanstack/react-query";var Ln=({resource:e,config:t,filters:r,hasPagination:o,pagination:s,sorters:a,queryOptions:n,successNotification:i,errorNotification:m,meta:l,metaData:f,liveMode:c,onLiveEvent:g,liveParams:x,dataProviderName:E})=>{let{resources:T}=S(),u=W(),d=Q(),R=O(),{mutate:h}=J({v3LegacyAuthProviderCompatible:Boolean(R==null?void 0:R.isLegacy)}),b=X(),y=k(e,E,T),p=C(l,f),P=C(r,t==null?void 0:t.filters),v=C(a,t==null?void 0:t.sort),D=C(o,t==null?void 0:t.hasPagination),U=vt({pagination:s,configPagination:t==null?void 0:t.pagination,hasPagination:D}),L=U.mode==="server",M={meta:p,metaData:p,filters:P,hasPagination:L,pagination:U,sorters:v,config:{...t,sort:v}},I=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,A=_(e,y,p,p),{getList:V}=u(y);return _e({resource:e,types:["*"],params:{meta:p,metaData:p,pagination:U,hasPagination:L,sort:v,sorters:v,filters:P,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:I,liveMode:c,onLiveEvent:g}),Un(A.list({filters:P,hasPagination:L,...L&&{pagination:U},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:w,pageParam:B,signal:H})=>{let fe={...U,current:B};return V({resource:e,pagination:fe,hasPagination:L,filters:P,sort:v,sorters:v,meta:{...p||{},queryContext:{queryKey:w,pageParam:B,signal:H}},metaData:{...p||{},queryContext:{queryKey:w,pageParam:B,signal:H}}}).then(({data:ve,total:z,...Qe})=>({data:ve,total:z,pagination:fe,...Qe}))},{getNextPageParam:w=>Jt(w),getPreviousPageParam:w=>Xt(w),...n,onSuccess:w=>{var H;(H=n==null?void 0:n.onSuccess)==null||H.call(n,w);let B=typeof i=="function"?i(w,M,e):i;b(B)},onError:w=>{var H;h(w),(H=n==null?void 0:n.onError)==null||H.call(n,w);let B=typeof m=="function"?m(w,M,e):m;b(B,{key:`${e}-useInfiniteList-notification`,message:d("notifications.error",{statusCode:w.statusCode},`Error (status code: ${w.statusCode})`),description:w.message,type:"error"})}})};import{useContext as Bo,useEffect as In}from"react";import{useQueryClient as Mn}from"@tanstack/react-query";import Vo from"react";var Fe=Vo.createContext(void 0),Qo=({liveProvider:e,children:t})=>Vo.createElement(Fe.Provider,{value:e},t);var _e=({resource:e,params:t,channel:r,types:o,enabled:s=!0,liveMode:a,onLiveEvent:n})=>{let i=Mn(),m=_(e),l=Bo(Fe),{liveMode:f,onLiveEvent:c}=Bo(me),g=a!=null?a:f;In(()=>{let x;return g&&g!=="off"&&s&&(x=l==null?void 0:l.subscribe({channel:r,params:{resource:e,...t},types:o,callback:E=>{g==="auto"&&i.invalidateQueries(m.resourceAll),n==null||n(E),c==null||c(E)}})),()=>{x&&(l==null||l.unsubscribe(x))}},[s])};import{useContext as wn}from"react";var No=e=>{let{liveMode:t}=wn(me);return e!=null?e:t};import{useContext as An,useEffect as Sn}from"react";var Lm=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:s})=>{let a=An(Fe);Sn(()=>{let n;return o&&(n=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:s})),()=>{n&&(a==null||a.unsubscribe(n))}},[o])};import{useContext as kn}from"react";var Pe=()=>{let e=kn(Fe);return e==null?void 0:e.publish};import{useContext as Kn}from"react";import Ho from"react";import{useMemo as Bn}from"react";import{useRef as Vn}from"react";import Qn from"lodash-es/isEqual";var Fo=e=>{let t=Vn(e);return Qn(t.current,e)||(t.current=e),t.current};var rr=(e,t)=>{let r=Fo(t);return Bn(e,r)};var Ze=Ho.createContext({resources:[]}),Oo=({resources:e,children:t})=>{let r=rr(()=>qt(e!=null?e:[]),[e]);return Ho.createElement(Ze.Provider,{value:{resources:r}},t)};import $o from"react";var Ko=$o.createContext("new"),Wo=Ko.Provider,F=()=>$o.useContext(Ko);import $n from"react";import Nn,{createContext as Fn}from"react";var Go={},He=Fn(Go),zo=({children:e,router:t})=>Nn.createElement(He.Provider,{value:t!=null?t:Go},e);import Hn,{useContext as On}from"react";var Qr=()=>{let e=On(He);return Hn.useMemo(()=>{var o;return(o=e==null?void 0:e.parse)!=null?o:()=>()=>({})},[e==null?void 0:e.parse])()};var j=()=>{let e=Qr();return $n.useMemo(()=>e(),[e])};function S(e){var f,c;let{resources:t}=Kn(Ze),r=F(),o=j(),s={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},a=Ye(),{useParams:n}=K(),i=n();if(r==="legacy"){let g=s.resourceNameOrRouteName?s.resourceNameOrRouteName:i.resource,x=g?a(g):void 0,E=(f=s==null?void 0:s.recordItemId)!=null?f:i.id,T=i.action,u=(c=s==null?void 0:s.resourceName)!=null?c:x==null?void 0:x.name;return{resources:t,resource:x,resourceName:u,id:E,action:T}}let m,l=typeof e=="string"?e:s==null?void 0:s.resourceNameOrRouteName;if(l){let g=$(l,t);g?m=g:m={name:l}}else o!=null&&o.resource&&(m=o.resource);return{resources:t,resource:m,resourceName:m==null?void 0:m.name,id:o.id,action:o.action}}import{useContext as Wn,useCallback as Gn}from"react";var Ye=()=>{let{resources:e}=Wn(Ze);return Gn(r=>{let o=$(r,e,!0);return o||{name:r,route:r}},[e])};import{useContext as zn}from"react";var Ve=()=>{let{notifications:e,notificationDispatch:t}=zn(tr);return{notifications:e,notificationDispatch:t}};import{useContext as Zn}from"react";import jn,{createContext as _n}from"react";var It=_n({}),jo=({open:e,close:t,children:r})=>jn.createElement(It.Provider,{value:{open:e,close:t}},r);var ye=()=>{let{open:e,close:t}=Zn(It);return{open:e,close:t}};import{useCallback as Yn}from"react";var X=()=>{let{open:e}=ye();return Yn((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};import{useCallback as Jn,useContext as Xn}from"react";import _o from"react";var we=_o.createContext({}),Zo=({children:e,i18nProvider:t})=>_o.createElement(we.Provider,{value:{i18nProvider:t}},e);var qn=()=>{let{i18nProvider:e}=Xn(we);return Jn(t=>e==null?void 0:e.changeLocale(t),[])};import{useContext as ea,useMemo as ta}from"react";var Q=()=>{let{i18nProvider:e}=ea(we);return ta(()=>{function r(o,s,a){var n,i;return(i=(n=e==null?void 0:e.translate(o,s,a))!=null?n:a)!=null?i:typeof s=="string"&&typeof a>"u"?s:o}return r},[e])};import{useContext as ra,useCallback as oa}from"react";var sa=()=>{let{i18nProvider:e}=ra(we);return oa(()=>e==null?void 0:e.getLocale(),[])};import{useContext as na}from"react";var Me=()=>{let{mutationMode:e,undoableTimeout:t}=na(me);return{mutationMode:e,undoableTimeout:t}};import{useContext as Xo}from"react";import Yo,{useState as aa}from"react";var Br=Yo.createContext({}),Jo=({children:e})=>{let[t,r]=aa(!1);return Yo.createElement(Br.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var Mt=()=>{let{warnWhenUnsavedChanges:e}=Xo(me),{warnWhen:t,setWarnWhen:r}=Xo(Br);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};import{useContext as ia}from"react";var Nr=()=>{let{syncWithLocation:e}=ia(me);return{syncWithLocation:e}};import{useContext as ua}from"react";var ca=()=>{let{Title:e}=ua(me);return e};import{useContext as pa}from"react";var wt=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:i,syncWithLocation:m,undoableTimeout:l,warnWhenUnsavedChanges:f,DashboardPage:c,LoginPage:g,catchAll:x,options:E}=pa(me);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:i,syncWithLocation:m,undoableTimeout:l,warnWhenUnsavedChanges:f,DashboardPage:c,LoginPage:g,catchAll:x,options:E}};import{useState as la}from"react";import{ExportToCsv as da}from"export-to-csv-fix-source-map";var Uy=({resourceName:e,resource:t,sorter:r,sorters:o,filters:s,maxItemCount:a,pageSize:n=20,mapData:i=x=>x,exportOptions:m,meta:l,metaData:f,dataProviderName:c,onError:g}={})=>{var y;let[x,E]=la(!1),T=W(),{resource:u,resources:d}=S(),R=`${mt(u==null?void 0:u.name,"plural")}-${new Date().toLocaleString()}`,{getList:h}=T(k((y=u==null?void 0:u.identifier)!=null?y:u==null?void 0:u.name,c,d));return{isLoading:x,triggerExport:async()=>{var U;E(!0);let p=[],P=1,v=!0;for(;v;)try{let{data:L,total:M}=await h({resource:(U=u==null?void 0:u.name)!=null?U:"",filters:s,sort:C(o,r),sorters:C(o,r),pagination:{current:P,pageSize:n,mode:"server"},meta:C(l,f),metaData:C(l,f)});P++,p.push(...L),a&&p.length>=a&&(p=p.slice(0,a),v=!1),M===p.length&&(v=!1)}catch(L){E(!1),v=!1,g==null||g(L);return}new da({filename:R,useKeysAsHeaders:!0,...m}).generateCsv(p.map(i)),E(!1)}}};import qo from"react";import ma from"warn-once";var Hy=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:s,redirect:a,successNotification:n,errorNotification:i,meta:m,metaData:l,mutationMode:f,liveMode:c,onLiveEvent:g,liveParams:x,undoableTimeout:E,dataProviderName:T,invalidates:u,queryOptions:d,createMutationOptions:R,updateMutationOptions:h}={})=>{let{options:b}=wt(),{resources:y}=S(),p=F(),{resource:P,id:v,action:D}=j(),{useParams:U}=K(),{resource:L,action:M,id:I}=U(),A=typeof P=="string"?P:P==null?void 0:P.name,V=!e||e===(p==="legacy"?L:A)?r!=null?r:p==="legacy"?I:v:r,[N,w]=qo.useState(V);qo.useEffect(()=>{w(V)},[V]);let B=e!=null?e:p==="legacy"?L:A,H=p==="legacy"?M:D,fe=t!=null?t:H==="edit"||H==="clone"?H:"create",ve=Ye(),z;if(p==="legacy")B&&(z=ve(B));else if(e){let ne=$(e,y);ne?z=ne:z={name:e,route:e}}else if(typeof P=="string"){let ne=$(P,y);ne?z=ne:z={name:P,route:P}}else z=P;let{mutationMode:Qe}=Me(),ie=f!=null?f:Qe,Je=fe==="create",Z=fe==="edit",ce=fe==="clone";ma((ce||Z)&&Boolean(e)&&!Boolean(r),`[useForm]: action: "${fe}", resource: "${B}", id: ${N} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let Xe=Ir({redirectFromProps:a,action:fe,redirectOptions:b.redirect}),nt=N!==void 0&&(Z||ce),De=Et({resource:z==null?void 0:z.name,id:N!=null?N:"",queryOptions:{enabled:nt,...d},liveMode:c,onLiveEvent:g,liveParams:x,meta:C(m,l),metaData:C(m,l),dataProviderName:T}),{isFetching:Ee}=De,at=Ut({mutationOptions:R}),{mutate:Qt,isLoading:Rt}=at,it=kr({mutationOptions:h}),{mutate:Ue,isLoading:Bt}=it,{setWarnWhen:$e}=Mt(),Ke=es();return{...Je||ce?{formLoading:Ee||Rt,mutationResult:at,onFinish:async ne=>{$e(!1);let Le=Be=>{Ke({redirect:Xe,resource:z,id:Be,meta:l})};return ie!=="pessimistic"&&setTimeout(()=>{Le()}),new Promise((Be,ct)=>{if(ie!=="pessimistic"&&Be(),!!z)return Qt({values:ne,resource:z.name,successNotification:n,errorNotification:i,meta:C(m,l),metaData:C(m,l),dataProviderName:T,invalidates:u},{onSuccess:(Ie,Ge,ze)=>{var xt;o&&o(Ie,ne,ze);let je=(xt=Ie==null?void 0:Ie.data)==null?void 0:xt.id;Le(je),Be(Ie)},onError:(Ie,Ge,ze)=>{if(s)return s(Ie,ne,ze);ct()}})})}}:{formLoading:Ee||Bt,mutationResult:it,onFinish:async ne=>{if($e(!1),!z)return;let Le={id:N!=null?N:"",values:ne,resource:z.name,mutationMode:ie,undoableTimeout:E,successNotification:n,errorNotification:i,meta:C(m,l),metaData:C(m,l),dataProviderName:T,invalidates:u},Be=()=>{Ke({redirect:Xe,resource:z,id:N,meta:l})};return ie!=="pessimistic"&&setTimeout(()=>{Be()}),new Promise((ct,Ie)=>(ie!=="pessimistic"&&ct(),setTimeout(()=>{Ue(Le,{onSuccess:(Ge,ze,je)=>{o&&o(Ge,ne,je),ie==="pessimistic"&&Be(),ct(Ge)},onError:(Ge,ze,je)=>{if(s)return s(Ge,ne,je);Ie()}})})))}},queryResult:De,id:N,setId:w,redirect:(ne,Le)=>{Ke({redirect:ne!==void 0?ne:Z?"list":"edit",resource:z,id:Le!=null?Le:N,meta:l})}}};import{useCallback as fa}from"react";var es=()=>{let{show:e,edit:t,list:r,create:o}=te();return fa(({redirect:a,resource:n,id:i,meta:m={}})=>{if(a&&n)return!!n.show&&a==="show"&&i?e(n,i,void 0,m):!!n.edit&&a==="edit"&&i?t(n,i,void 0,m):!!n.create&&a==="create"?o(n,void 0,m):r(n,"push",m)},[])};import ya,{useContext as ga}from"react";var re=()=>{let e=ga(He);return ya.useMemo(()=>{var o;return(o=e==null?void 0:e.go)!=null?o:()=>()=>{}},[e==null?void 0:e.go])()};import Ta,{useContext as Ra}from"react";var Fr=()=>{let e=Ra(He);return Ta.useMemo(()=>{var o;return(o=e==null?void 0:e.back)!=null?o:()=>()=>{}},[e==null?void 0:e.back])()};var te=()=>{let{resources:e}=S(),t=F(),{useHistory:r}=K(),o=r(),s=j(),a=re(),n=Fr(),i=(y,p="push")=>{t==="legacy"?o[p](y):a({to:y,type:p})},m=(y,p={})=>{var P,v,D;if(t==="legacy"){let U=typeof y=="string"?(P=$(y,e,!0))!=null?P:{name:y,route:y}:y,L=ae(U,e,!0).find(M=>M.action==="create");return L?le(L.route,s,p):""}else{let U=typeof y=="string"?(v=$(y,e))!=null?v:{name:y}:y,L=(D=ae(U,e).find(M=>M.action==="create"))==null?void 0:D.route;return L?a({to:le(L,s,p),type:"path"}):""}},l=(y,p,P={})=>{var D,U,L;let v=encodeURIComponent(p);if(t==="legacy"){let M=typeof y=="string"?(D=$(y,e,!0))!=null?D:{name:y,route:y}:y,I=ae(M,e,!0).find(A=>A.action==="edit");return I?le(I.route,s,{...P,id:v}):""}else{let M=typeof y=="string"?(U=$(y,e))!=null?U:{name:y}:y,I=(L=ae(M,e).find(A=>A.action==="edit"))==null?void 0:L.route;return I?a({to:le(I,s,{...P,id:v}),type:"path"}):""}},f=(y,p,P={})=>{var D,U,L;let v=encodeURIComponent(p);if(t==="legacy"){let M=typeof y=="string"?(D=$(y,e,!0))!=null?D:{name:y,route:y}:y,I=ae(M,e,!0).find(A=>A.action==="clone");return I?le(I.route,s,{...P,id:v}):""}else{let M=typeof y=="string"?(U=$(y,e))!=null?U:{name:y}:y,I=(L=ae(M,e).find(A=>A.action==="clone"))==null?void 0:L.route;return I?a({to:le(I,s,{...P,id:v}),type:"path"}):""}},c=(y,p,P={})=>{var D,U,L;let v=encodeURIComponent(p);if(t==="legacy"){let M=typeof y=="string"?(D=$(y,e,!0))!=null?D:{name:y,route:y}:y,I=ae(M,e,!0).find(A=>A.action==="show");return I?le(I.route,s,{...P,id:v}):""}else{let M=typeof y=="string"?(U=$(y,e))!=null?U:{name:y}:y,I=(L=ae(M,e).find(A=>A.action==="show"))==null?void 0:L.route;return I?a({to:le(I,s,{...P,id:v}),type:"path"}):""}},g=(y,p={})=>{var P,v,D;if(t==="legacy"){let U=typeof y=="string"?(P=$(y,e,!0))!=null?P:{name:y,route:y}:y,L=ae(U,e,!0).find(M=>M.action==="list");return L?le(L.route,s,p):""}else{let U=typeof y=="string"?(v=$(y,e))!=null?v:{name:y}:y,L=(D=ae(U,e).find(M=>M.action==="list"))==null?void 0:D.route;return L?a({to:le(L,s,p),type:"path"}):""}};return{create:(y,p="push",P={})=>{i(m(y,P),p)},createUrl:m,edit:(y,p,P="push",v={})=>{i(l(y,p,v),P)},editUrl:l,clone:(y,p,P="push",v={})=>{i(f(y,p,v),P)},cloneUrl:f,show:(y,p,P="push",v={})=>{i(c(y,p,v),P)},showUrl:c,list:(y,p="push",P={})=>{i(g(y,P),p)},listUrl:g,push:(y,...p)=>{t==="legacy"?o.push(y,...p):a({to:y,type:"push"})},replace:(y,...p)=>{t==="legacy"?o.replace(y,...p):a({to:y,type:"replace"})},goBack:()=>{t==="legacy"?o.goBack():n()}}};import xa,{useState as Pa}from"react";import Ca from"warn-once";var gg=({resource:e,id:t,successNotification:r,errorNotification:o,meta:s,metaData:a,liveMode:n,onLiveEvent:i,dataProviderName:m,queryOptions:l}={})=>{let f=F(),{resources:c}=S(),{useParams:g}=K(),{resource:x,id:E}=j(),{resource:T,id:u}=g(),d=x==null?void 0:x.name,R=!e||e===(f==="legacy"?T:d)?t!=null?t:f==="legacy"?u:E:t,[h,b]=Pa(R);xa.useEffect(()=>{b(R)},[R]);let y=e!=null?e:f==="legacy"?T:d,p,P=Ye();if(f==="legacy")y&&(p=P(y));else if(e){let D=$(e,c);D?p=D:p={name:e,route:e}}else if(typeof x=="string"){let D=$(x,c);D?p=D:p={name:x,route:x}}else p=x;return Ca(Boolean(e)&&!Boolean(t),`[useShow]: resource: "${y}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`),{queryResult:Et({resource:p==null?void 0:p.name,id:h!=null?h:"",queryOptions:{enabled:h!==void 0,...l},successNotification:r,errorNotification:o,meta:C(s,a),metaData:C(s,a),liveMode:n,onLiveEvent:i,dataProviderName:m}),showId:h,setShowId:b}};import{useEffect as ha,useState as Hr}from"react";import{parse as ba}from"papaparse";import va from"lodash-es/chunk";var Eg=({resourceName:e,resource:t,mapData:r=f=>f,paparseOptions:o,batchSize:s=Number.MAX_SAFE_INTEGER,onFinish:a,meta:n,metaData:i,onProgress:m,dataProviderName:l}={})=>{let[f,c]=Hr(0),[g,x]=Hr(0),[E,T]=Hr(!1),{resource:u}=S(t!=null?t:e),d=Vr(),R=Ut(),h;s===1?h=R:h=d;let b=()=>{x(0),c(0),T(!1)},y=P=>{let v={succeeded:P.filter(D=>D.type==="success"),errored:P.filter(D=>D.type==="error")};a==null||a(v),T(!1)};ha(()=>{m==null||m({totalAmount:g,processedAmount:f})},[g,f]);let p=({file:P})=>(b(),new Promise(v=>{T(!0),ba(P,{complete:async({data:D})=>{let U=Kt(D,r);if(x(U.length),s===1){let L=U.map(I=>async()=>{var N;return{response:await R.mutateAsync({resource:(N=u==null?void 0:u.name)!=null?N:"",values:I,successNotification:!1,errorNotification:!1,dataProviderName:l,meta:C(n,i),metaData:C(n,i)}),value:I}}),M=await Yt(L,({response:I,value:A})=>(c(V=>V+1),{response:[I.data],type:"success",request:[A]}),(I,A)=>({response:[I],type:"error",request:[U[A]]}));v(M)}else{let L=va(U,s),M=L.map(A=>async()=>{var w;return{response:await d.mutateAsync({resource:(w=u==null?void 0:u.name)!=null?w:"",values:A,successNotification:!1,errorNotification:!1,dataProviderName:l,meta:C(n,i),metaData:C(n,i)}),value:A,currentBatchLength:A.length}}),I=await Yt(M,({response:A,currentBatchLength:V,value:N})=>(c(w=>w+V),{response:A.data,type:"success",request:N}),(A,V)=>({response:[A],type:"error",request:L[V]}));v(I)}},...o})}).then(v=>(y(v),v)));return{inputProps:{type:"file",accept:".csv",onChange:P=>{P.target.files&&P.target.files.length>0&&p({file:P.target.files[0]})}},mutationResult:h,isLoading:E,handleChange:p}};import{useCallback as ts,useState as Da}from"react";var Ig=({defaultVisible:e=!1}={})=>{let[t,r]=Da(e),o=ts(()=>r(!0),[t]),s=ts(()=>r(!1),[t]);return{visible:t,show:o,close:s}};import Ea from"react";var At=()=>{let e=F(),{resource:t,resources:r}=S(),o=j();return Ea.useCallback(({resource:a,action:n,meta:i})=>{var g;let m=a||t;if(!m)return;let f=(g=ae(m,r,e==="legacy").find(x=>x.action===n))==null?void 0:g.route;return f?le(f,o,i):void 0},[r,t,o])};var Ua=({resource:e,action:t,meta:r,legacy:o})=>At()({resource:e,action:t,meta:r,legacy:o});import La,{useContext as Ia}from"react";var tt=()=>{let e=Ia(He);return e!=null&&e.Link?e.Link:({to:r,...o})=>La.createElement("a",{href:r,...o})};import{useContext as wa}from"react";import rs from"react";var Oe={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Ma=rs.createContext(Oe),St=Ma,os=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n})=>rs.createElement(St.Provider,{value:{useHistory:t!=null?t:Oe.useHistory,useLocation:r!=null?r:Oe.useLocation,useParams:o!=null?o:Oe.useParams,Prompt:s!=null?s:Oe.Prompt,Link:a!=null?a:Oe.Link,routes:n!=null?n:Oe.routes}},e);var K=()=>{let e=wa(St),{useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n}=e!=null?e:Oe;return{useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n}};import{useQuery as Aa}from"@tanstack/react-query";import{useContext as Sa}from"react";import ss from"react";var rt=ss.createContext({}),ns=({can:e,children:t})=>ss.createElement(rt.Provider,{value:{can:e}},t);var as=e=>{let{icon:t,list:r,edit:o,create:s,show:a,clone:n,children:i,meta:m,options:l,...f}=e,{icon:c,...g}=m!=null?m:{},{icon:x,...E}=l!=null?l:{};return{...f,...m?{meta:g}:{},...l?{options:E}:{}}};var is=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:s}=Sa(rt),{resource:a,...n}=r!=null?r:{},i=as(a!=null?a:{}),m=Aa(["useCan",{action:e,resource:t,params:{...n,resource:i},enabled:o==null?void 0:o.enabled}],()=>{var l;return(l=s==null?void 0:s({action:e,resource:t,params:n}))!=null?l:Promise.resolve({can:!0})},{enabled:typeof s<"u",...o,retry:!1});return typeof s>"u"?{data:{can:!0}}:m};import{useContext as ka}from"react";var RT=()=>{let{can:e}=ka(rt);return{can:e}};import{useCallback as us,useMemo as Va,useState as Or}from"react";import Qa from"lodash/uniqBy";import Ba from"lodash/debounce";import or from"lodash/get";var wT=e=>{var Qe,ie,Je;let[t,r]=Or([]),[o,s]=Or([]),[a,n]=Or([]),{resource:i,sort:m,sorters:l,filters:f=[],optionLabel:c="title",optionValue:g="id",debounce:x=300,successNotification:E,errorNotification:T,defaultValueQueryOptions:u,queryOptions:d,fetchSize:R,pagination:h,hasPagination:b=!1,liveMode:y,defaultValue:p=[],onLiveEvent:P,onSearch:v,liveParams:D,meta:U,metaData:L,dataProviderName:M}=e,{resources:I}=S(),A=$(i,I),V=(Qe=A==null?void 0:A.name)!=null?Qe:i,N=Array.isArray(p)?p:[p],w=us(Z=>{n(Z.data.map(ce=>({label:or(ce,c),value:or(ce,g)})))},[c,g]),B=u!=null?u:d,H=Mr({resource:V,ids:N,queryOptions:{...B,enabled:N.length>0&&((ie=u==null?void 0:u.enabled)!=null?ie:!0),onSuccess:Z=>{var ce;w(Z),(ce=B==null?void 0:B.onSuccess)==null||ce.call(B,Z)}},meta:C(U,L),metaData:C(U,L),liveMode:"off",dataProviderName:M}),fe=us(Z=>{s(Z.data.map(ce=>({label:or(ce,c),value:or(ce,g)})))},[c,g]),ve=Dt({resource:V,sorters:C(l,m),filters:f.concat(t),pagination:{current:h==null?void 0:h.current,pageSize:(Je=h==null?void 0:h.pageSize)!=null?Je:R,mode:h==null?void 0:h.mode},hasPagination:b,queryOptions:{...d,onSuccess:Z=>{var ce;fe(Z),(ce=d==null?void 0:d.onSuccess)==null||ce.call(d,Z)}},successNotification:E,errorNotification:T,meta:C(U,L),metaData:C(U,L),liveMode:y,liveParams:D,onLiveEvent:P,dataProviderName:M}),z=Z=>{if(v){r(v(Z));return}if(Z)r([{field:c,operator:"contains",value:Z}]);else{r([]);return}};return{queryResult:ve,defaultValueQueryResult:H,options:Va(()=>Qa([...o,...a],"value"),[o,a]),onSearch:Ba(z,x)}};import Na,{useState as sr,useEffect as cs}from"react";import ps from"qs";import nr from"lodash/differenceWith";import ar from"lodash/isEqual";import Fa from"warn-once";var ls=[],ds=[];function $T({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:o,initialSorter:s,permanentSorter:a=ds,defaultSetFilterBehavior:n,initialFilter:i,permanentFilter:m=ls,filters:l,sorters:f,syncWithLocation:c,resource:g,successNotification:x,errorNotification:E,queryOptions:T,liveMode:u,onLiveEvent:d,liveParams:R,meta:h,metaData:b,dataProviderName:y}={}){var je,xt,_r,Zr,Yr,Jr,Xr,qr,eo,to;let{syncWithLocation:p}=Nr(),P=c!=null?c:p,v=No(u),D=F(),{useLocation:U}=K(),{search:L,pathname:M}=U(),I=j(),A=r===!1?"off":"server",V=((je=o==null?void 0:o.mode)!=null?je:A)!=="off",N=C(o==null?void 0:o.current,e),w=C(o==null?void 0:o.pageSize,t),B=C(h,b),{parsedCurrent:H,parsedPageSize:fe,parsedSorter:ve,parsedFilters:z}=Wt(L!=null?L:"?"),Qe=C(l==null?void 0:l.initial,i),ie=(xt=C(l==null?void 0:l.permanent,m))!=null?xt:ls,Je=C(f==null?void 0:f.initial,s),Z=(_r=C(f==null?void 0:f.permanent,a))!=null?_r:ds,ce=(Zr=C(l==null?void 0:l.defaultBehavior,n))!=null?Zr:"merge",Xe,nt,De,Ee;P?(Xe=((Yr=I==null?void 0:I.params)==null?void 0:Yr.current)||H||N||1,nt=((Jr=I==null?void 0:I.params)==null?void 0:Jr.pageSize)||fe||w||10,De=((Xr=I==null?void 0:I.params)==null?void 0:Xr.sorters)||(ve.length?ve:Je),Ee=((qr=I==null?void 0:I.params)==null?void 0:qr.filters)||(z.length?z:Qe)):(Xe=N||1,nt=w||10,De=Je,Ee=Qe);let{replace:at}=te(),Qt=re(),{resource:Rt}=S(g),it=Rt==null?void 0:Rt.name;Na.useEffect(()=>{Fa(typeof it>"u","useTable: `resource` is not defined.")},[it]);let[Ue,Bt]=sr(_t(Z,De!=null?De:[])),[$e,Ke]=sr(jt(ie,Ee!=null?Ee:[])),[ut,ir]=sr(Xe),[We,ur]=sr(nt),jr=({pagination:{current:se,pageSize:xe},sorter:Nt,filters:Ft})=>{var Ht;if(D==="new")return(Ht=Qt({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...V?{current:se,pageSize:xe}:{},sorters:Nt,filters:Ft,...ne()}}))!=null?Ht:"";{let Pt=ps.parse(L==null?void 0:L.substring(1)),cr=Gt({pagination:{pageSize:xe,current:se},sorters:Ue!=null?Ue:Nt,filters:Ft,...Pt});return`${M!=null?M:""}?${cr!=null?cr:""}`}};cs(()=>{L===""&&(ir(Xe),ur(nt),Bt(_t(Z,De!=null?De:[])),Ke(jt(ie,Ee!=null?Ee:[])))},[L]);let ne=()=>{var se;if(D==="new"){let{sorters:xe,filters:Nt,pageSize:Ft,current:Ht,...Pt}=(se=I==null?void 0:I.params)!=null?se:{};return Pt}else{let{sorter:xe,filters:Nt,pageSize:Ft,current:Ht,...Pt}=ps.parse(L,{ignoreQueryPrefix:!0});return Pt}};cs(()=>{if(P){let se=ne();if(D==="new")Qt({type:"replace",options:{keepQuery:!0},query:{...V?{pageSize:We,current:ut}:{},sorters:nr(Ue,Z,ar),filters:nr($e,ie,ar)}});else{let xe=Gt({...V?{pagination:{pageSize:We,current:ut}}:{},sorters:nr(Ue,Z,ar),filters:nr($e,ie,ar),...se});return at==null?void 0:at(`${M}?${xe}`,void 0,{shallow:!0})}}},[P,ut,We,Ue,$e]);let Le=Dt({resource:it,hasPagination:r,pagination:{current:ut,pageSize:We,mode:o==null?void 0:o.mode},filters:dt(ie,$e),sorters:zt(Z,Ue),queryOptions:T,successNotification:x,errorNotification:E,meta:B,metaData:B,liveMode:v,liveParams:R,onLiveEvent:d,dataProviderName:y}),Be=se=>{Ke(xe=>dt(ie,se,xe))},ct=se=>{Ke(dt(ie,se))},Ie=se=>{Ke(xe=>dt(ie,se(xe)))},Ge=(se,xe=ce)=>{typeof se=="function"?Ie(se):xe==="replace"?ct(se):Be(se)},ze=se=>{Bt(()=>zt(Z,se))};return{tableQueryResult:Le,sorters:Ue,setSorters:ze,sorter:Ue,setSorter:ze,filters:$e,setFilters:Ge,current:ut,setCurrent:ir,pageSize:We,setPageSize:ur,pageCount:We?Math.ceil(((to=(eo=Le.data)==null?void 0:eo.total)!=null?to:0)/We):1,createLinkForSyncWithLocation:jr}}import{useContext as ys}from"react";import{useMutation as gs,useQueryClient as Ha}from"@tanstack/react-query";import ms from"react";var ot=ms.createContext({}),fs=({create:e,get:t,update:r,children:o})=>ms.createElement(ot.Provider,{value:{create:e,get:t,update:r}},o);var Ce=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=Ha(),o=ys(ot),s=O(),{resources:a}=ys(Ze),{data:n,refetch:i,isLoading:m}=pr({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy),queryOptions:{enabled:!!o}}),l=gs(async c=>{var T,u,d,R,h;let g=$(c.resource,a),x=C((T=g==null?void 0:g.meta)==null?void 0:T.audit,(u=g==null?void 0:g.options)==null?void 0:u.audit,(R=(d=g==null?void 0:g.options)==null?void 0:d.auditLog)==null?void 0:R.permissions);if(x&&!Cr(x,c.action))return;let E;return m&&(E=await i()),await((h=o.create)==null?void 0:h.call(o,{...c,author:n!=null?n:E==null?void 0:E.data}))},e),f=gs(async c=>{var g;return await((g=o.update)==null?void 0:g.call(o,c))},{onSuccess:c=>{if(c!=null&&c.resource){let g=_(c==null?void 0:c.resource);r.invalidateQueries(g.logList())}},...t});return{log:l,rename:f}};import{useContext as Oa}from"react";import{useQuery as $a}from"@tanstack/react-query";var cR=({resource:e,action:t,meta:r,author:o,metaData:s,queryOptions:a})=>{let{get:n}=Oa(ot),i=_(e,void 0,s);return $a(i.logList(r),()=>{var l;return(l=n==null?void 0:n({resource:e,action:t,author:o,meta:r,metaData:s}))!=null?l:Promise.resolve([])},{enabled:typeof n<"u",...a,retry:!1})};import{useCallback as Ka}from"react";import{useQueryClient as Wa}from"@tanstack/react-query";var he=()=>{let{resources:e}=S(),t=Wa();return Ka(({resource:o,dataProviderName:s,invalidates:a,id:n})=>{if(a===!1)return;let i=_(o,k(o,s,e));a.forEach(m=>{switch(m){case"all":t.invalidateQueries(i.all);break;case"list":t.invalidateQueries(i.list());break;case"many":t.invalidateQueries(i.many());break;case"resourceAll":t.invalidateQueries(i.resourceAll);break;case"detail":t.invalidateQueries(i.detail(n||""));break;default:break}})},[])};import{useContext as Ga}from"react";import za from"warn-once";var MR=({meta:e={}}={})=>{let t=F(),{i18nProvider:r}=Ga(we),o=j(),s=Q(),{resources:a,resource:n,action:i}=S(),m=[];if(!(n!=null&&n.name))return{breadcrumbs:m};let l=f=>{var g,x,E,T,u,d,R,h;let c=typeof f=="string"?(g=$(f,a,t==="legacy"))!=null?g:{name:f}:f;if(c){let b=C((x=c==null?void 0:c.meta)==null?void 0:x.parent,c==null?void 0:c.parentName);b&&l(b);let y=ae(c,a,t==="legacy").find(v=>v.action==="list"),p=(E=y==null?void 0:y.resource)!=null&&E.list?y==null?void 0:y.route:void 0,P=p?t==="legacy"?p:le(p,o,e):void 0;m.push({label:(d=C((T=c.meta)==null?void 0:T.label,(u=c.options)==null?void 0:u.label))!=null?d:s(`${c.name}.${c.name}`,qe(c.name)),href:P,icon:C((R=c.meta)==null?void 0:R.icon,(h=c.options)==null?void 0:h.icon,c.icon)})}};if(l(n),i&&i!=="list"){let f=`actions.${i}`,c=s(f);typeof r<"u"&&c===f?(za(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${i}" action. Please add "actions.${i}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),m.push({label:s(`buttons.${i}`,qe(i))})):m.push({label:s(f,qe(i))})}return{breadcrumbs:m}};import $r from"react";var yt=(e,t,r=!1)=>{let o=[],s=Te(e,t);for(;s;)o.push(s),s=Te(s,t);return o.reverse(),`/${[...o,e].map(n=>{var i,m;return pe((m=(i=r?n.route:void 0)!=null?i:n.identifier)!=null?m:n.name)}).join("/").replace(/^\//,"")}`};var Ts=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(s=>{var l,f;let a=[],n=Te(s,e);for(;n;)a.push(n),n=Te(n,e);a.reverse();let i=r;a.forEach(c=>{var x,E;let g=(E=(x=t?c.route:void 0)!=null?x:c.identifier)!=null?E:c.name;i.children[g]||(i.children[g]={item:c,children:{}}),i=i.children[g]});let m=(f=(l=t?s.route:void 0)!=null?l:s.identifier)!=null?f:s.name;i.children[m]||(i.children[m]={item:s,children:{}})});let o=s=>{let a=[];return Object.keys(s.children).forEach(n=>{let i=yt(s.children[n].item,e,t),m={...s.children[n].item,key:i,children:o(s.children[n])};a.push(m)}),a};return o(r)};var Rs=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),ja=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=Q(),o=At(),s=F(),{resource:a,resources:n}=S(),{pathname:i}=j(),{useLocation:m}=K(),{pathname:l}=m(),f=s==="legacy"?Rs(l):i?Rs(i):void 0,c=`/${(f!=null?f:"").replace(/^\//,"")}`,g=a?yt(a,n,s==="legacy"):c!=null?c:"",x=$r.useMemo(()=>{if(!a)return[];let u=Te(a,n),d=[yt(a,n)];for(;u;)d.push(yt(u,n)),u=Te(u,n);return d},[]),E=$r.useCallback(u=>{var R,h,b,y,p,P,v,D;if(((b=(R=u==null?void 0:u.meta)==null?void 0:R.hide)!=null?b:(h=u==null?void 0:u.options)==null?void 0:h.hide)||!(u!=null&&u.list)&&u.children.length===0)return;let d=u.list?o({resource:u,action:"list",legacy:s==="legacy",meta:e}):void 0;if(!(t&&d&&d.match(/(\/|^):(.+?)(\/|$){1}/)))return{...u,route:d,icon:C((y=u.meta)==null?void 0:y.icon,(p=u.options)==null?void 0:p.icon,u.icon),label:(D=C((P=u==null?void 0:u.meta)==null?void 0:P.label,(v=u==null?void 0:u.options)==null?void 0:v.label))!=null?D:r(`${u.name}.${u.name}`,mt(u.name,"plural"))}},[s,e,r,t]),T=$r.useMemo(()=>{let u=Ts(n,s==="legacy"),d=R=>R.flatMap(h=>{let b=d(h.children),y=E({...h,children:b});return y?[y]:[]});return d(u)},[n,s,E]);return{defaultOpenKeys:x,selectedKey:g,menuItems:T}};var Ya=()=>{let[e,t]=Za(),r=Q(),{push:o}=te(),s=re(),a=F(),{resource:n,action:i}=S();return _a(()=>{n&&i&&t(r("pages.error.info",{action:i,resource:n==null?void 0:n.name},`You may have forgotten to add the "${i}" component to "${n==null?void 0:n.name}" resource.`))},[n,i]),kt.createElement(kt.Fragment,null,kt.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&kt.createElement("p",null,e),kt.createElement("button",{onClick:()=>{a==="legacy"?o("/"):s({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))};import de,{useState as xs}from"react";var Ur=()=>{let[e,t]=xs(""),[r,o]=xs(""),s=Q(),a=O(),{mutate:n}=Ct({v3LegacyAuthProviderCompatible:Boolean(a==null?void 0:a.isLegacy)});return de.createElement(de.Fragment,null,de.createElement("h1",null,s("pages.login.title","Sign in your account")),de.createElement("form",{onSubmit:i=>{i.preventDefault(),n({username:e,password:r})}},de.createElement("table",null,de.createElement("tbody",null,de.createElement("tr",null,de.createElement("td",null,s("pages.login.username",void 0,"username"),":"),de.createElement("td",null,de.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:i=>t(i.target.value)}))),de.createElement("tr",null,de.createElement("td",null,s("pages.login.password",void 0,"password"),":"),de.createElement("td",null,de.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:i=>o(i.target.value)}))))),de.createElement("br",null),de.createElement("input",{type:"submit",value:"login"})))};import gt from"react";import oe,{useState as Kr}from"react";var Ps=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:s,wrapperProps:a,renderContent:n,formProps:i,title:m=void 0})=>{let l=F(),f=tt(),{Link:c}=K(),g=l==="legacy"?c:f,[x,E]=Kr(""),[T,u]=Kr(""),[d,R]=Kr(!1),h=Q(),b=O(),{mutate:y}=Ct({v3LegacyAuthProviderCompatible:Boolean(b==null?void 0:b.isLegacy)}),p=(D,U)=>D?typeof D=="string"?oe.createElement(g,{to:D},U):D:null,P=()=>e?e.map(D=>{var U;return oe.createElement("div",{key:D.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},oe.createElement("button",{onClick:()=>y({providerName:D.name}),style:{display:"flex",alignItems:"center"}},D==null?void 0:D.icon,(U=D.label)!=null?U:oe.createElement("label",null,D.label)))}):null,v=oe.createElement("div",{...s},oe.createElement("h1",{style:{textAlign:"center"}},h("pages.login.title","Sign in to your account")),P(),oe.createElement("hr",null),oe.createElement("form",{onSubmit:D=>{D.preventDefault(),y({email:x,password:T,remember:d})},...i},oe.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},oe.createElement("label",null,h("pages.login.fields.email","Email")),oe.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:x,onChange:D=>E(D.target.value)}),oe.createElement("label",null,h("pages.login.fields.password","Password")),oe.createElement("input",{type:"password",name:"password",required:!0,size:20,value:T,onChange:D=>u(D.target.value)}),o!=null?o:oe.createElement(oe.Fragment,null,oe.createElement("label",null,h("pages.login.buttons.rememberMe","Remember me"),oe.createElement("input",{name:"remember",type:"checkbox",size:20,checked:d,value:d.toString(),onChange:()=>{R(!d)}}))),oe.createElement("br",null),r!=null?r:p("/forgot-password",h("pages.login.buttons.forgotPassword","Forgot password?")),oe.createElement("input",{type:"submit",value:h("pages.login.signin","Sign in")}),t!=null?t:oe.createElement("span",null,h("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",p("/register",h("pages.login.register","Sign up"))))));return oe.createElement("div",{...a},n?n(v,m):v)};import ue,{useState as Cs}from"react";var hs=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:s,formProps:a,title:n=void 0})=>{let i=F(),m=tt(),{Link:l}=K(),f=i==="legacy"?l:m,[c,g]=Cs(""),[x,E]=Cs(""),T=Q(),u=O(),{mutate:d,isLoading:R}=fr({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),h=(p,P)=>p?typeof p=="string"?ue.createElement(f,{to:p},P):p:null,b=()=>e?e.map(p=>{var P;return ue.createElement("div",{key:p.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ue.createElement("button",{onClick:()=>d({providerName:p.name}),style:{display:"flex",alignItems:"center"}},p==null?void 0:p.icon,(P=p.label)!=null?P:ue.createElement("label",null,p.label)))}):null,y=ue.createElement("div",{...o},ue.createElement("h1",{style:{textAlign:"center"}},T("pages.register.title","Sign up for your account")),b(),ue.createElement("hr",null),ue.createElement("form",{onSubmit:p=>{p.preventDefault(),d({email:c,password:x})},...a},ue.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ue.createElement("label",null,T("pages.register.fields.email","Email")),ue.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:p=>g(p.target.value)}),ue.createElement("label",null,T("pages.register.fields.password","Password")),ue.createElement("input",{name:"password",type:"password",required:!0,size:20,value:x,onChange:p=>E(p.target.value)}),ue.createElement("input",{type:"submit",value:T("pages.register.buttons.submit","Sign up"),disabled:R}),t!=null?t:ue.createElement(ue.Fragment,null,ue.createElement("span",null,T("pages.login.buttons.haveAccount","Have an account?")," ",h("/login",T("pages.login.signin","Sign in")))))));return ue.createElement("div",{...r},s?s(y,n):y)};import be,{useState as Ja}from"react";var bs=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:s,title:a=void 0})=>{let n=Q(),i=F(),m=tt(),{Link:l}=K(),f=i==="legacy"?l:m,[c,g]=Ja(""),{mutate:x,isLoading:E}=gr(),T=(d,R)=>d?typeof d=="string"?be.createElement(f,{to:d},R):d:null,u=be.createElement("div",{...r},be.createElement("h1",{style:{textAlign:"center"}},n("pages.forgotPassword.title","Forgot your password?")),be.createElement("hr",null),be.createElement("form",{onSubmit:d=>{d.preventDefault(),x({email:c})},...s},be.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},be.createElement("label",null,n("pages.forgotPassword.fields.email","Email")),be.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:d=>g(d.target.value)}),be.createElement("input",{type:"submit",disabled:E,value:n("pages.forgotPassword.buttons.submit","Send reset instructions")}),be.createElement("br",null),e!=null?e:be.createElement("span",null,n("pages.register.buttons.haveAccount","Have an account? ")," ",T("/login",n("pages.login.signin","Sign in"))))));return be.createElement("div",{...t},o?o(u,a):u)};import Ae,{useState as vs}from"react";var Ds=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o,title:s=void 0})=>{let a=Q(),n=O(),{mutate:i,isLoading:m}=Rr({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy)}),[l,f]=vs(""),[c,g]=vs(""),x=Ae.createElement("div",{...t},Ae.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),Ae.createElement("hr",null),Ae.createElement("form",{onSubmit:E=>{E.preventDefault(),i({password:l,confirmPassword:c})},...o},Ae.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Ae.createElement("label",null,a("pages.updatePassword.fields.password","New Password")),Ae.createElement("input",{name:"password",type:"password",required:!0,size:20,value:l,onChange:E=>f(E.target.value)}),Ae.createElement("label",null,a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),Ae.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:c,onChange:E=>g(E.target.value)}),Ae.createElement("input",{type:"submit",disabled:m,value:a("pages.updatePassword.buttons.submit","Update")}))));return Ae.createElement("div",{...e},r?r(x,s):x)};var Xa=e=>{let{type:t}=e;return gt.createElement(gt.Fragment,null,(()=>{switch(t){case"register":return gt.createElement(hs,{...e});case"forgotPassword":return gt.createElement(bs,{...e});case"updatePassword":return gt.createElement(Ds,{...e});default:return gt.createElement(Ps,{...e})}})())};import ge from"react";var Wr=()=>ge.createElement(ge.Fragment,null,ge.createElement("h1",null,"Welcome on board"),ge.createElement("p",null,"Your configuration is completed."),ge.createElement("p",null,"Now you can get started by adding your resources to the"," ",ge.createElement("code",null,"`resources`")," property of ",ge.createElement("code",null,"`<Refine>`")),ge.createElement("div",{style:{display:"flex",gap:8}},ge.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ge.createElement("button",null,"Documentation")),ge.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ge.createElement("button",null,"Examples")),ge.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ge.createElement("button",null,"Community"))));import G,{useState as qa}from"react";var ei=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:G.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:G.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),G.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:G.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),G.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:G.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],ti=()=>{let e=er("(max-width: 1010px)"),t=er("(max-width: 650px)"),r=()=>t?"1, 280px":e?"2, 280px":"4, 208px",o=()=>t?"32px":e?"40px":"48px",s=()=>t?"16px":e?"20px":"24px";return G.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},G.createElement("div",{style:{height:"89px"}}),G.createElement("div",{style:{display:"flex",justifyContent:"center"}},G.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),G.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),G.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},G.createElement("h1",{style:{fontSize:o(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),G.createElement("h4",{style:{fontSize:s(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),G.createElement("div",{style:{height:"64px"}}),G.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},ei.map(a=>G.createElement(ri,{key:`welcome-page-${a.title}`,card:a}))),G.createElement("div",{style:{height:"64px"}}))},ri=({card:e})=>{let{title:t,description:r,icon:o,link:s}=e,[a,n]=qa(!1);return G.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},G.createElement("div",{style:{display:"flex",alignItems:"center"}},G.createElement("a",{onPointerEnter:()=>n(!0),onPointerLeave:()=>n(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:s},o,G.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),G.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...a&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},G.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),G.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))};import q from"react";import{QueryClientProvider as ai,QueryClient as ws}from"@tanstack/react-query";import{ReactQueryDevtools as ii}from"@tanstack/react-query-devtools";import{useEffect as si}from"react";import{useContext as st}from"react";var oi="4.7.2",Es=()=>{let e=xr(),t=st(ot),r=st(Fe),o=st(St),s=st(Lt),{i18nProvider:a}=st(we),n=st(It),i=st(rt),{resources:m}=S(),l=!!t.create||!!t.get||!!t.update,f=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),c=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,g=!!s,x=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),E=!!n.close||!!n.open,T=!!i.can;return{providers:{auth:e,auditLog:l,live:f,router:c,data:g,i18n:x,notification:E,accessControl:T},version:oi,resourceCount:m.length}};var ni=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Us=()=>{let e=Es();return si(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ni(e)}`},[]),null};var Ls=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(s=>!t.includes(s));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1};import Is from"react";var Ms=e=>{let t=Is.useRef(!1);Is.useEffect(()=>{t.current===!1&&e&&Ls(e)&&(t.current=!0)},[e])};var ui=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:o,routerProvider:s,notificationProvider:a,accessControlProvider:n,auditLogProvider:i,resources:m,DashboardPage:l,ReadyPage:f,LoginPage:c,catchAll:g,children:x,liveProvider:E,i18nProvider:T,Title:u,Layout:d,Sider:R,Header:h,Footer:b,OffLayoutArea:y,onLiveEvent:p,options:P})=>{let{optionsWithDefaults:v,disableTelemetryWithDefault:D,reactQueryWithDefaults:U}=Lr({options:P}),L=rr(()=>{var V;return U.clientConfig instanceof ws?U.clientConfig:new ws({...U.clientConfig,defaultOptions:{...U.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(V=U.clientConfig.defaultOptions)==null?void 0:V.queries}}})},[U.clientConfig]),I=q.useMemo(()=>typeof a=="function"?a:()=>a!=null?a:{},[a])();if(Ms(s),o&&!s&&(m!=null?m:[]).length===0)return f?q.createElement(f,null):q.createElement(Wr,null);let{RouterComponent:A=q.Fragment}=s?{}:o!=null?o:{};return q.createElement(ai,{client:L},q.createElement(jo,{...I},q.createElement(oo,{...e!=null?e:{},isProvided:Boolean(e)},q.createElement(no,{...t!=null?t:{},isProvided:Boolean(t)},q.createElement(ko,{...r},q.createElement(Qo,{liveProvider:E},q.createElement(Wo,{value:o&&!s?"legacy":"new"},q.createElement(zo,{router:s},q.createElement(os,{...o},q.createElement(Oo,{resources:m!=null?m:[]},q.createElement(Zo,{i18nProvider:T},q.createElement(ns,{...n!=null?n:{}},q.createElement(fs,{...i!=null?i:{}},q.createElement(Sr,null,q.createElement(Do,{mutationMode:v.mutationMode,warnWhenUnsavedChanges:v.warnWhenUnsavedChanges,syncWithLocation:v.syncWithLocation,Title:u,undoableTimeout:v.undoableTimeout,catchAll:g,DashboardPage:l,LoginPage:c,Layout:d,Sider:R,Footer:b,Header:h,OffLayoutArea:y,hasDashboard:!!l,liveMode:v.liveMode,onLiveEvent:p,options:v},q.createElement(Jo,null,q.createElement(A,null,x,!D&&q.createElement(Us,null),q.createElement(Gr,null))))))))))))))))),U.devtoolConfig===!1?null:q.createElement(ii,{initialIsOpen:!1,position:"bottom-right",...U.devtoolConfig}))};import{useEffect as ci,useState as pi}from"react";var Lo=({notification:e})=>{let t=Q(),{notificationDispatch:r}=Ve(),{open:o}=ye(),[s,a]=pi(),n=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:ht(e.seconds)},`You have ${ht(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:ht(e.seconds)}),e.seconds>0)){s&&clearTimeout(s);let i=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(i)}};return ci(()=>{n()},[e]),null};import zr,{useEffect as li}from"react";var di=({children:e,Layout:t,Sider:r,Header:o,Title:s,Footer:a,OffLayoutArea:n})=>{let{Layout:i,Footer:m,Header:l,Sider:f,Title:c,OffLayoutArea:g}=wt(),x=t!=null?t:i;return zr.createElement(x,{Sider:r!=null?r:f,Header:o!=null?o:l,Footer:a!=null?a:m,Title:s!=null?s:c,OffLayoutArea:n!=null?n:g},e,zr.createElement(mi,null))},mi=()=>{let{Prompt:e}=K(),t=Q(),{warnWhen:r,setWarnWhen:o}=Mt(),s=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return li(()=>(r&&window.addEventListener("beforeunload",s),window.removeEventListener("beforeunload",s)),[r]),zr.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};import Re from"react";var fi=()=>{let e=re(),[t,r]=Re.useState(void 0);return Re.useEffect(()=>{t&&e(t)},[t]),Re.useCallback(s=>{t||r(s)},[t])};function yi({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:o,loading:s}){var v;let a=O(),n=F(),i=Boolean(a==null?void 0:a.isProvided),m=Boolean(a==null?void 0:a.isLegacy),l=n==="legacy",f=j(),c=re(),g=fi(),{replace:x}=te(),{useLocation:E}=K(),T=E(),{isLoading:u,isFetching:d,isSuccess:R,data:{authenticated:h,redirectTo:b}={},refetch:y}=$t({v3LegacyAuthProviderCompatible:m});Re.useEffect(()=>{y()},[r,o]);let p=Re.useRef({status:u?"initial":"pending",content:s!=null?s:null});d?p.current.status="pending":d||(p.current.status="settled");let P=i?m?R:h:!0;if(p.current.status==="settled")if(P)p.current.content=Re.createElement(Re.Fragment,null,r!=null?r:null);else if(typeof o<"u")p.current.content=Re.createElement(Re.Fragment,null,o);else{let D=`${l?T==null?void 0:T.pathname:f.pathname}`.replace(/(\?.*|#.*)$/,""),U=m?typeof e=="string"?e:"/login":typeof e=="string"?e:b;if(U)if(l){let L=t?`?to=${encodeURIComponent(D)}`:"";x(`${U}${L}`)}else g({to:U,query:t?{to:(v=f.params)!=null&&v.to?f.params.to:c({to:D,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return i?Re.createElement(Re.Fragment,null,p.current.content):Re.createElement(Re.Fragment,null,r!=null?r:null)}import{useEffect as gi}from"react";var Gr=()=>{let{useLocation:e}=K(),{checkAuth:t}=Y(),r=e();return gi(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};import Tt from"react";var Ti=({resource:e,action:t,params:r,fallback:o,children:s,...a})=>{var y,p;let n=F(),{resources:i}=S(),{useParams:m}=K(),{resource:l,id:f,action:c}=j(),{resource:g,id:x,action:E}=m(),T=l==null?void 0:l.name,u=!e||e===(n==="legacy"?g:T)?(y=r==null?void 0:r.id)!=null?y:n==="legacy"?x:f:r==null?void 0:r.id,d=e!=null?e:n==="legacy"?g:T,R,h=Ye();if(n==="legacy")d&&(R=h(d));else if(e){let P=$(e,i);P?R=P:R={name:e,route:e}}else if(typeof l=="string"){let P=$(l,i);P?R=P:R={name:l,route:l}}else R=l;let{data:b}=is({resource:e!=null?e:R==null?void 0:R.name,action:(p=t!=null?t:n==="legacy"?E:c)!=null?p:"",params:r!=null?r:{id:u,resource:R}});return b!=null&&b.can?Tt.isValidElement(s)?Tt.cloneElement(s,a):Tt.createElement(Tt.Fragment,null,s):(b==null?void 0:b.can)===!1?Tt.createElement(Tt.Fragment,null,o!=null?o:null):null};import Vt,{useEffect as Ri}from"react";var As=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var xi=()=>(Ri(()=>{let e=document.createElement("style");document.head.appendChild(e),As.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),Vt.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},Vt.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},Vt.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},Vt.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),Vt.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));export{Xa as AuthPage,yi as Authenticated,Ti as CanAccess,Ya as ErrorComponent,xi as GitHubBanner,di as LayoutWrapper,Ur as LoginPage,Wr as ReadyPage,ui as Refine,Ze as ResourceContext,Gr as RouteChangeHandler,Lo as UndoableQueue,ti as WelcomePage,bo as createTreeView,js as file2Base64,zs as getDefaultFilter,Gs as getDefaultSortOrder,Jt as getNextPageParam,Xt as getPreviousPageParam,Co as handleUseParams,Kt as importCSVMapper,qt as legacyResourceTransform,Dr as matchResourceFromRoute,Wt as parseTableParams,Ws as parseTableParamsFromQuery,C as pickNotDeprecated,Zt as routeGenerator,jt as setInitialFilters,_t as setInitialSorters,Gt as stringifyTableParams,dt as unionFilters,zt as unionSorters,O as useActiveAuthProvider,xn as useApiUrl,Fs as useAuthenticated,Fr as useBack,MR as useBreadcrumb,is as useCan,RT as useCanWithoutCache,Ve as useCancelNotification,Hs as useCheckError,Ut as useCreate,Vr as useCreateMany,Cn as useCustom,bn as useCustomMutation,W as useDataProvider,cn as useDelete,Rn as useDeleteMany,Uy as useExport,gr as useForgotPassword,Hy as useForm,pr as useGetIdentity,sa as useGetLocale,At as useGetToPath,re as useGo,X as useHandleNotification,Eg as useImport,Ln as useInfiniteList,he as useInvalidate,$t as useIsAuthenticated,xr as useIsExistAuthentication,tt as useLink,Dt as useList,No as useLiveMode,Ce as useLog,cR as useLogList,Ct as useLogin,Ot as useLogout,Mr as useMany,ja as useMenu,Ig as useModal,Me as useMutationMode,te as useNavigation,ye as useNotification,J as useOnError,Et as useOne,Qr as useParse,j as useParsed,Ss as usePermissions,Pe as usePublish,es as useRedirectionAfterSubmission,wt as useRefineContext,fr as useRegister,S as useResource,_e as useResourceSubscription,Ye as useResourceWithRoute,K as useRouterContext,F as useRouterType,wT as useSelect,qn as useSetLocale,gg as useShow,Lm as useSubscription,Nr as useSyncWithLocation,$T as useTable,ca as useTitle,Ua as useToPath,Q as useTranslate,kr as useUpdate,fn as useUpdateMany,Rr as useUpdatePassword,Mt as useWarnAboutChange,mt as userFriendlyResourceName};
//# sourceMappingURL=index.js.map