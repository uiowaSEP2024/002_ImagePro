var C=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var W=Object.prototype.hasOwnProperty;var X=(r,t)=>{for(var s in t)C(r,s,{get:t[s],enumerable:!0})},Y=(r,t,s,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of V(t))!W.call(r,o)&&o!==s&&C(r,o,{get:()=>t[o],enumerable:!(p=N(t,o))||p.enumerable});return r};var Z=r=>Y(C({},"__esModule",{value:!0}),r);var _={};X(_,{useTable:()=>U});module.exports=Z(_);var l=require("react"),z=require("@refinedev/core"),T=require("@tanstack/react-table");var d=require("react"),v=()=>{let r=(0,d.useRef)(!0);return(0,d.useEffect)(()=>{r.current=!1},[]),r.current};function U({refineCoreProps:{hasPagination:r=!0,...t}={},initialState:s={},...p}){var F,S,O;let o=v(),P=(0,z.useTable)({...t,hasPagination:r}),I=r===!1?"off":"server",y=((S=(F=t.pagination)==null?void 0:F.mode)!=null?S:I)!=="off",{tableQueryResult:{data:c},current:L,setCurrent:f,pageSize:w,setPageSize:M,sorters:k,setSorters:q,filters:A,setFilters:Q,pageCount:j}=P,m=[];A.forEach(e=>{e.operator!=="or"&&e.operator!=="and"&&"field"in e&&m.push(e)});let D=(0,T.useReactTable)({getCoreRowModel:(0,T.getCoreRowModel)(),data:(O=c==null?void 0:c.data)!=null?O:[],initialState:{pagination:{pageIndex:L-1,pageSize:w},sorting:k.map(e=>({id:e.field,desc:e.order==="desc"})),columnFilters:m.map(e=>({id:e.field,operator:e.operator,value:e.value})),...s},pageCount:j,manualPagination:!0,manualSorting:!0,manualFiltering:!0,...p}),{state:G,columns:J}=D.options,{pagination:b,sorting:n,columnFilters:u}=G,{pageIndex:R,pageSize:E}=b!=null?b:{};return(0,l.useEffect)(()=>{R!==void 0&&f(R+1)},[R]),(0,l.useEffect)(()=>{E!==void 0&&M(E)},[E]),(0,l.useEffect)(()=>{n!==void 0&&(q(n==null?void 0:n.map(e=>({field:e.id,order:e.desc?"desc":"asc"}))),n.length>0&&y&&!o&&f(1))},[n]),(0,l.useEffect)(()=>{let e=[];u==null||u.map(a=>{var B,H,h;let i=(h=a.operator)!=null?h:(H=(B=J.find(K=>K.id===a.id))==null?void 0:B.meta)==null?void 0:H.filterOperator;e.push({field:a.id,operator:i!=null?i:Array.isArray(a.value)?"in":"eq",value:a.value})});let g=m.filter(a=>!e.some(i=>a.field===i.field&&a.operator===i.operator));g==null||g.map(a=>{e.push({field:a.field,operator:a.operator,value:void 0})}),Q(e),e.length>0&&y&&!o&&f(1)},[u]),{...D,refineCore:P}}
//# sourceMappingURL=index.js.map