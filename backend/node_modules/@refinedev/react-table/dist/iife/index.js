(()=>{var Pn=Object.create;var qr=Object.defineProperty;var En=Object.getOwnPropertyDescriptor;var bn=Object.getOwnPropertyNames;var Cn=Object.getPrototypeOf,wn=Object.prototype.hasOwnProperty;var w=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Ln=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qn=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of bn(t))!wn.call(e,n)&&n!==r&&qr(e,n,{get:()=>t[n],enumerable:!(a=En(t,n))||a.enumerable});return e};var Dn=(e,t,r)=>(r=e!=null?Pn(Cn(e)):{},qn(t||!e||!e.__esModule?qr(r,"default",{value:e,enumerable:!0}):r,e));var cn=Ln((hi,dn)=>{var Sn=Object.create,Nt=Object.defineProperty,xn=Object.getOwnPropertyDescriptor,Mn=Object.getOwnPropertyNames,Nn=Object.getPrototypeOf,kn=Object.prototype.hasOwnProperty,An=(e,t)=>{for(var r in t)Nt(e,r,{get:t[r],enumerable:!0})},fa=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Mn(t))!kn.call(e,n)&&n!==r&&Nt(e,n,{get:()=>t[n],enumerable:!(a=xn(t,n))||a.enumerable});return e},M=(e,t,r)=>(r=e!=null?Sn(Nn(e)):{},fa(t||!e||!e.__esModule?Nt(r,"default",{value:e,enumerable:!0}):r,e)),$n=e=>fa(Nt({},"__esModule",{value:!0}),e),ma={};An(ma,{AuthPage:()=>Zl,Authenticated:()=>ci,CanAccess:()=>fi,ErrorComponent:()=>Bl,GitHubBanner:()=>pi,LayoutWrapper:()=>ui,LoginPage:()=>on,ReadyPage:()=>ln,Refine:()=>ii,ResourceContext:()=>vt,RouteChangeHandler:()=>sn,UndoableQueue:()=>un,WelcomePage:()=>Gl,createTreeView:()=>oo,file2Base64:()=>Gn,getDefaultFilter:()=>Yn,getDefaultSortOrder:()=>Zn,getNextPageParam:()=>ka,getPreviousPageParam:()=>Aa,handleUseParams:()=>Jn,importCSVMapper:()=>Ca,legacyResourceTransform:()=>$a,matchResourceFromRoute:()=>no,parseTableParams:()=>ir,parseTableParamsFromQuery:()=>Vn,pickNotDeprecated:()=>q,routeGenerator:()=>xa,setInitialFilters:()=>er,setInitialSorters:()=>tr,stringifyTableParams:()=>Jt,unionFilters:()=>st,unionSorters:()=>Xt,useActiveAuthProvider:()=>ee,useApiUrl:()=>qo,useAuthenticated:()=>zn,useBack:()=>en,useBreadcrumb:()=>Wl,useCan:()=>an,useCanWithoutCache:()=>Sl,useCancelNotification:()=>et,useCheckError:()=>Hn,useCreate:()=>vr,useCreateMany:()=>Fa,useCustom:()=>So,useCustomMutation:()=>Mo,useDataProvider:()=>ne,useDelete:()=>Po,useDeleteMany:()=>Lo,useExport:()=>sl,useForgotPassword:()=>Pa,useForm:()=>dl,useGetIdentity:()=>ya,useGetLocale:()=>el,useGetToPath:()=>yr,useGo:()=>Ee,useHandleNotification:()=>pe,useImport:()=>pl,useInfiniteList:()=>$o,useInvalidate:()=>_e,useIsAuthenticated:()=>or,useIsExistAuthentication:()=>ba,useLink:()=>At,useList:()=>dr,useLiveMode:()=>Wa,useLog:()=>je,useLogList:()=>Rl,useLogin:()=>nr,useLogout:()=>Gt,useMany:()=>Ta,useMenu:()=>Hl,useModal:()=>gl,useMutationMode:()=>rt,useNavigation:()=>be,useNotification:()=>Re,useOnError:()=>fe,useOne:()=>cr,useParse:()=>Va,useParsed:()=>me,usePermissions:()=>Rn,usePublish:()=>Ke,useRedirectionAfterSubmission:()=>Xa,useRefineContext:()=>gr,useRegister:()=>ha,useResource:()=>U,useResourceSubscription:()=>ct,useResourceWithRoute:()=>mt,useRouterContext:()=>re,useRouterType:()=>Z,useSelect:()=>Nl,useSetLocale:()=>Xo,useShow:()=>vl,useSubscription:()=>Qo,useSyncWithLocation:()=>Ja,useTable:()=>Al,useTitle:()=>ol,useToPath:()=>hl,useTranslate:()=>K,useUpdate:()=>Qa,useUpdateMany:()=>Co,useUpdatePassword:()=>Ea,useWarnAboutChange:()=>pr,userFriendlyResourceName:()=>ur});dn.exports=$n(ma);var ze=M(w("react")),Xe=M(w("react")),pa=Xe.default.createContext({}),On=({children:e,isProvided:t,...r})=>{let{replace:a}=be(),n=async p=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,p))}catch(m){return Promise.reject(m)}},l=async p=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,p))}catch(m){return Promise.reject(m)}},o=async p=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,p))}catch(m){return Promise.reject(m)}},s=async p=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,p)),Promise.resolve()}catch(m){return m!=null&&m.redirectPath&&a(m.redirectPath),Promise.reject(m)}};return Xe.default.createElement(pa.Provider,{value:{...r,login:n,logout:o,checkAuth:s,register:l,isProvided:t}},e)},ga=Xe.default.createContext({}),Tn=({children:e,isProvided:t,...r})=>{let a=async d=>{var m;try{return await((m=r.login)==null?void 0:m.call(r,d))}catch(v){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",v),Promise.reject(v)}},n=async d=>{var m;try{return await((m=r.register)==null?void 0:m.call(r,d))}catch(v){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",v),Promise.reject(v)}},l=async d=>{var m;try{return await((m=r.logout)==null?void 0:m.call(r,d))}catch(v){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",v),Promise.reject(v)}},o=async d=>{var m;try{let v=await((m=r.check)==null?void 0:m.call(r,d));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",v),Promise.reject(v)}},s=async d=>{var m;try{let v=await((m=r.forgotPassword)==null?void 0:m.call(r,d));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",v),Promise.reject(v)}},p=async d=>{var m;try{let v=await((m=r.updatePassword)==null?void 0:m.call(r,d));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",v),Promise.reject(v)}};return Xe.default.createElement(ga.Provider,{value:{...r,login:a,logout:l,check:o,register:n,forgotPassword:s,updatePassword:p,isProvided:t}},e)},he=()=>Xe.default.useContext(pa),we=()=>Xe.default.useContext(ga),Dr=w("@tanstack/react-query");function Rn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=he(),{getPermissions:a}=we(),n=(0,Dr.useQuery)(["usePermissions"],a!=null?a:()=>Promise.resolve(void 0),{enabled:!e&&!!a,...e?{}:t}),l=(0,Dr.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?l:n}var Sr=w("@tanstack/react-query");function ya({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=he(),{getIdentity:a}=we(),n=(0,Sr.useQuery)(["getUserIdentity"],a!=null?a:()=>Promise.resolve({}),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t}),l=(0,Sr.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?l:n}var xr=w("@tanstack/react-query"),Qn=w("@tanstack/react-query"),ar=()=>{let e=(0,Qn.useQueryClient)();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function Gt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ar(),a=Z(),n=Ee(),{push:l}=be(),{open:o,close:s}=Re(),{logout:p}=he(),{logout:d}=we(),m=(0,xr.useMutation)(["useLogout"],d,{onSuccess:async(E,c)=>{let{success:f,error:u,redirectTo:i}=E,{redirectPath:g}=c!=null?c:{},b=g!=null?g:i;f&&(s==null||s("useLogout-error")),(u||!f)&&(o==null||o(It(u))),await r(),b!==!1&&(a==="legacy"?l(b!=null?b:"/login"):b&&n({to:b}))},onError:E=>{o==null||o(It(E))},...e===!0?{}:t}),v=(0,xr.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],p,{onSuccess:async(E,c)=>{var f;let u=(f=c==null?void 0:c.redirectPath)!=null?f:E;if(await r(),u!==!1){if(u){a==="legacy"?l(u):n({to:u});return}a==="legacy"?l("/login"):n({to:"/login"})}},onError:E=>{o==null||o(It(E))},...e?t:{}});return e?v:m}var It=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),Mr=w("@tanstack/react-query"),Fn=M(w("qs")),In=M(w("react"));function nr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ar(),a=Z(),n=Ee(),{replace:l}=be(),o=me(),{useLocation:s}=re(),{search:p}=s(),{close:d,open:m}=Re(),{login:v}=he(),{login:E}=we(),c=In.default.useMemo(()=>{var i;return a==="legacy"?Fn.default.parse(p,{ignoreQueryPrefix:!0}).to:(i=o.params)==null?void 0:i.to},[a,o.params,p]),f=(0,Mr.useMutation)(["useLogin"],E,{onSuccess:async({success:i,redirectTo:g,error:b})=>{i&&(d==null||d("login-error")),(b||!i)&&(m==null||m(Ut(b))),await r(),c&&i?a==="legacy"?l(c):n({to:c,type:"replace"}):g?a==="legacy"?l(g):n({to:g,type:"replace"}):a==="legacy"&&l("/")},onError:i=>{m==null||m(Ut(i))},...e===!0?{}:t}),u=(0,Mr.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],v,{onSuccess:async i=>{await r(),c&&l(c),i!==!1&&!c&&(typeof i=="string"?a==="legacy"?l(i):n({to:i,type:"replace"}):a==="legacy"?l("/"):n({to:"/",type:"replace"})),d==null||d("login-error")},onError:i=>{m==null||m(Ut(i))},...e?t:{}});return e?u:f}var Ut=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),Nr=w("@tanstack/react-query");function ha({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ar(),a=Z(),n=Ee(),{replace:l}=be(),{register:o}=he(),{register:s}=we(),{close:p,open:d}=Re(),m=(0,Nr.useMutation)(["useRegister"],s,{onSuccess:async({success:E,redirectTo:c,error:f})=>{E&&(p==null||p("register-error")),(f||!E)&&(d==null||d(Wt(f))),await r(),c?a==="legacy"?l(c):n({to:c,type:"replace"}):a==="legacy"&&l("/")},onError:E=>{d==null||d(Wt(E))},...e===!0?{}:t}),v=(0,Nr.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],o,{onSuccess:async E=>{await r(),E!==!1&&(E?a==="legacy"?l(E):n({to:E,type:"replace"}):a==="legacy"?l("/"):n({to:"/",type:"replace"}),p==null||p("register-error"))},onError:E=>{d==null||d(Wt(E))},...e?t:{}});return e?v:m}var Wt=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),kr=w("@tanstack/react-query");function Pa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Z(),a=Ee(),{replace:n}=be(),{forgotPassword:l}=he(),{forgotPassword:o}=we(),{close:s,open:p}=Re(),d=(0,kr.useMutation)(["useForgotPassword"],o,{onSuccess:({success:v,redirectTo:E,error:c})=>{v&&(s==null||s("forgot-password-error")),(c||!v)&&(p==null||p(zt(c))),E&&(r==="legacy"?n(E):a({to:E,type:"replace"}))},onError:v=>{p==null||p(zt(v))},...e===!0?{}:t}),m=(0,kr.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],l,{onSuccess:v=>{v!==!1&&v&&(r==="legacy"?n(v):a({to:v,type:"replace"})),s==null||s("forgot-password-error")},onError:v=>{p==null||p(zt(v))},...e?t:{}});return e?m:d}var zt=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),Un=M(w("react")),Ar=w("@tanstack/react-query"),Wn=M(w("qs"));function Ea({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Z(),a=Ee(),{replace:n}=be(),{updatePassword:l}=he(),{updatePassword:o}=we(),{close:s,open:p}=Re(),d=me(),{useLocation:m}=re(),{search:v}=m(),E=Un.default.useMemo(()=>{var u;if(r==="legacy"){let i=Wn.default.parse(v,{ignoreQueryPrefix:!0});return i!=null?i:{}}else return(u=d.params)!=null?u:{}},[v,d,r]),c=(0,Ar.useMutation)(["useUpdatePassword"],async u=>o==null?void 0:o({...E,...u}),{onSuccess:({success:u,redirectTo:i,error:g})=>{u&&(s==null||s("update-password-error")),(g||!u)&&(p==null||p(Ht(g))),i&&(r==="legacy"?n(i):a({to:i,type:"replace"}))},onError:u=>{p==null||p(Ht(u))},...e===!0?{}:t}),f=(0,Ar.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async u=>l==null?void 0:l({...E,...u}),{onSuccess:u=>{u!==!1&&u&&(r==="legacy"?n(u):a({to:u,type:"replace"})),s==null||s("update-password-error")},onError:u=>{p==null||p(Ht(u))},...e?t:{}});return e?f:c}var Ht=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),$r=w("@tanstack/react-query");function or({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=he(),{check:a}=we(),n=(0,$r.useQuery)(["useAuthenticated",t],async()=>{var o;return(o=await(a==null?void 0:a(t)))!=null?o:{}},{retry:!1,enabled:!e}),l=(0,$r.useQuery)(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>{var o;return(o=await(r==null?void 0:r(t)))!=null?o:{}},{retry:!1,enabled:e});return e?l:n}var zn=or,Or=w("@tanstack/react-query");function fe({v3LegacyAuthProviderCompatible:e=!1}={}){let t=Z(),r=Ee(),{replace:a}=be(),{checkError:n}=he(),{onError:l}=we(),{mutate:o}=Gt({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:s}=Gt({v3LegacyAuthProviderCompatible:Boolean(e)}),p=(0,Or.useMutation)(["useCheckError"],l,{onSuccess:({logout:m,redirectTo:v})=>{if(m){s({redirectPath:v});return}if(v){t==="legacy"?a(v):r({to:v,type:"replace"});return}}}),d=(0,Or.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],n,{onError:m=>{o({redirectPath:m})}});return e?d:p}var Hn=fe,ba=()=>{let{isProvided:e}=he(),{isProvided:t}=we();return Boolean(t||e)},Bn=w("@tanstack/react-query"),Bt=e=>e/1e3,Kn=M(w("lodash/zip")),jn=M(w("lodash/fromPairs")),Ca=(e,t=r=>r)=>{let[r,...a]=e;return a.map(n=>(0,jn.default)((0,Kn.default)(r,n))).map((n,l,o)=>t.call(void 0,n,l,o))},Tr=M(w("pluralize")),lr=M(w("qs")),wa=M(w("lodash/unionWith")),La=M(w("lodash/differenceWith")),_n=M(w("warn-once")),ir=e=>{var t;let{current:r,pageSize:a,sorter:n,sorters:l,filters:o}=lr.default.parse(e.substring(1));return{parsedCurrent:r&&Number(r),parsedPageSize:a&&Number(a),parsedSorter:(t=q(l,n))!=null?t:[],parsedFilters:o!=null?o:[]}},Vn=e=>{let t=lr.default.stringify(e);return ir(`/${t}`)},Jt=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:n,filters:l,...o}=e;return lr.default.stringify({...o,...r||{},sorters:q(n,a),filters:l},t)},qa=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Da=(e,t)=>e.field==t.field,st=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,_n.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,wa.default)(e,t,r,qa).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),Xt=(e,t)=>(0,wa.default)(e,t,Da).filter(r=>r.order!==void 0&&r.order!==null),er=(e,t)=>[...(0,La.default)(t,e,qa),...e],tr=(e,t)=>[...(0,La.default)(t,e,Da),...e],Zn=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},Yn=(e,t,r="eq")=>{let a=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:l,field:o}=n;return o===e&&l===r}});if(a)return a.value||[]},Gn=e=>new Promise((t,r)=>{let a=new FileReader,n=()=>{a.result&&(a.removeEventListener("load",n,!1),t(a.result))};a.addEventListener("load",n,!1),a.readAsDataURL(e.originFileObj),a.onerror=l=>(a.removeEventListener("load",n,!1),r(l))}),ur=(e="",t)=>{let r=Dt(e);return t==="singular"?Tr.default.singular(r):Tr.default.plural(r)},Jn=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,q=(...e)=>e.find(t=>typeof t<"u"),Pe=(e,t,r,a)=>{let n=t||"default",l={all:[n],resourceAll:[n,e||""],list:o=>[...l.resourceAll,"list",{...o,...q(r,a)||{}}],many:o=>[...l.resourceAll,"getMany",o&&o.map(String),{...q(r,a)||{}}].filter(s=>s!==void 0),detail:o=>[...l.resourceAll,"detail",o==null?void 0:o.toString(),{...q(r,a)||{}}],logList:o=>["logList",e,o,a].filter(s=>s!==void 0)};return l},Xn=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),sr=e=>e.startsWith(":"),Je=e=>e.split("/").filter(t=>t!==""),eo=(e,t)=>{let r=Je(e),a=Je(t);return r.length===a.length},Ne=e=>e.replace(/^\/|\/$/g,""),to=(e,t)=>{let r=Ne(e),a=Ne(t);if(!eo(r,a))return!1;let n=Je(r);return Je(a).every((l,o)=>sr(l)||l===n[o])},ro=(e,t,r)=>{let a=Ne(r||""),n=`${a}${a?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`},Oe=(e,t)=>{var r,a;let n=q((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!n)return;let l=t.find(o=>{var s;return((s=o.identifier)!=null?s:o.name)===n});return l!=null?l:{name:n}},Sa=(e,t,r)=>{let a=[],n=Oe(e,t);for(;n;)a.push(n),n=Oe(n,t);if(a.length!==0)return`/${a.reverse().map(l=>{var o,s;let p=r&&(s=(o=l.options)==null?void 0:o.route)!=null?s:l.name;return Ne(p)}).join("/")}`},ce=(e,t,r)=>{let a=[],n=["list","show","edit","create","clone"],l=Sa(e,t,r);return n.forEach(o=>{var s,p,d,m;let v=r&&o==="clone"?e.create:e[o],E;typeof v=="function"||r?E=ro(r&&(m=(d=(s=e.meta)==null?void 0:s.route)!=null?d:(p=e.options)==null?void 0:p.route)!=null?m:e.name,o,r?l:void 0):typeof v=="string"?E=v:typeof v=="object"&&(E=v.path),E&&a.push({action:o,resource:e,route:`/${E.replace(/^\//,"")}`})}),a},ao=e=>{var t,r;if(e.length===0)return;if(e.length===1)return e[0];let a=e.map(o=>({...o,splitted:Je(Ne(o.route))})),n=(r=(t=a[0])==null?void 0:t.splitted.length)!=null?r:0,l=[...a];for(let o=0;o<n;o++){let s=l.filter(p=>!sr(p.splitted[o]));if(s.length!==0){if(s.length===1){l=s;break}l=s}}return l[0]},no=(e,t)=>{let r=t.flatMap(n=>ce(n,t)).filter(n=>to(e,n.route)),a=ao(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},xa=(e,t)=>{var r,a,n;let l,o=Sa(e,t,!0);if(o){let s=q(e.meta,e.options);l=`${o}/${(r=s==null?void 0:s.route)!=null?r:e.name}`}else l=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;return`/${l.replace(/^\//,"")}`},oo=e=>{var t,r,a;let n=[],l={},o={},s,p;for(let d=0;d<e.length;d++){s=e[d];let m=(a=(r=s.route)!=null?r:(t=q(s==null?void 0:s.meta,s.options))==null?void 0:t.route)!=null?a:"";l[m]=s,l[m].children=[],o[s.name]=s,o[s.name].children=[]}for(let d in l)l.hasOwnProperty(d)&&(p=l[d],p.parentName&&o[p.parentName]?o[p.parentName].children.push(p):n.push(p));return n},Dt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Ma=M(w("react")),lo=M(w("react")),Na=({children:e})=>lo.default.createElement("div",null,e),Me={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Te=Ma.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Na,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Me}),io=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:n,children:l,DashboardPage:o,Title:s,Layout:p=Na,Header:d,Sider:m,Footer:v,OffLayoutArea:E,LoginPage:c=on,catchAll:f,liveMode:u="off",onLiveEvent:i,options:g})=>Ma.default.createElement(Te.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:s,undoableTimeout:n,Layout:p,Header:d,Sider:m,Footer:v,OffLayoutArea:E,DashboardPage:o,LoginPage:c,catchAll:f,liveMode:u,onLiveEvent:i,options:g}},l),uo=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:n,reactQueryDevtoolConfig:l,syncWithLocation:o,undoableTimeout:s,warnWhenUnsavedChanges:p}={})=>{var d,m,v,E,c,f,u,i,g,b,y,C,P,h,L,D,S,x,A,Q,O,k,T,N;let $={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(m=(d=e==null?void 0:e.mutationMode)!=null?d:a)!=null?m:Me.mutationMode,undoableTimeout:(E=(v=e==null?void 0:e.undoableTimeout)!=null?v:s)!=null?E:Me.undoableTimeout,syncWithLocation:(f=(c=e==null?void 0:e.syncWithLocation)!=null?c:o)!=null?f:Me.syncWithLocation,warnWhenUnsavedChanges:(i=(u=e==null?void 0:e.warnWhenUnsavedChanges)!=null?u:p)!=null?i:Me.warnWhenUnsavedChanges,liveMode:(b=(g=e==null?void 0:e.liveMode)!=null?g:r)!=null?b:Me.liveMode,redirect:{afterCreate:(C=(y=e==null?void 0:e.redirect)==null?void 0:y.afterCreate)!=null?C:Me.redirect.afterCreate,afterClone:(h=(P=e==null?void 0:e.redirect)==null?void 0:P.afterClone)!=null?h:Me.redirect.afterClone,afterEdit:(D=(L=e==null?void 0:e.redirect)==null?void 0:L.afterEdit)!=null?D:Me.redirect.afterEdit}},R=(x=(S=e==null?void 0:e.disableTelemetry)!=null?S:t)!=null?x:!1,_={clientConfig:(O=(Q=(A=e==null?void 0:e.reactQuery)==null?void 0:A.clientConfig)!=null?Q:n)!=null?O:{},devtoolConfig:(N=(T=(k=e==null?void 0:e.reactQuery)==null?void 0:k.devtoolConfig)!=null?T:l)!=null?N:{}};return{optionsWithDefaults:$,disableTelemetryWithDefault:R,reactQueryWithDefaults:_}},so=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},Rr=async(e,t,r)=>{let a=[];for(let[n,l]of e.entries())try{let o=await l();a.push(t(o,n))}catch(o){a.push(r(o,n))}return a},j=(e,t=[],r=!1)=>{if(!!e)return r?t.find(n=>{var l;return Ne((l=n.route)!=null?l:"")===Ne(e)})||t.find(n=>n.name===e):t.find(a=>{var n;return((n=a.identifier)!=null?n:a.name)===e})},F=(e,t,r)=>{if(t)return t;let a=j(e,r),n=q(a==null?void 0:a.meta,a==null?void 0:a.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"},kt=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),ka=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,l=Math.ceil((e.total||0)/n);return a<l?Number(a)+1:void 0},Aa=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},$a=e=>{let t=[];return e==null||e.forEach(r=>{var a,n,l;t.push({...r,label:(l=(a=r.meta)==null?void 0:a.label)!=null?l:(n=r.options)==null?void 0:n.label,route:xa(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},co=e=>Je(Ne(e)).flatMap(t=>sr(t)?[t.slice(1)]:[]),vo=(e,t={},r={})=>e.reduce((a,n)=>{var l;let o=r[n]||((l=t.params)==null?void 0:l[n])||(n==="id"?t.id:void 0)||(n==="action"?t.action:void 0)||(n==="resource"?t.resource:void 0);return typeof o<"u"&&(a[n]=o),a},{}),ye=(e,t={},r={})=>{let a=co(e),n=vo(a,t,r);return e.replace(/:([^\/]+)/g,(l,o)=>{let s=n[o];return typeof s<"u"?`${s}`:l})},ee=()=>{let e=he(),t=we();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},Oa=({hasPagination:e,pagination:t,configPagination:r}={})=>{var a,n,l;let o=e===!1?"off":"server",s=(a=t==null?void 0:t.mode)!=null?a:o,p=(n=q(t==null?void 0:t.current,r==null?void 0:r.current))!=null?n:1,d=(l=q(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?l:10;return{current:p,pageSize:d,mode:s}},Qr=w("react"),Fr=e=>{let[t,r]=(0,Qr.useState)(!1);return(0,Qr.useEffect)(()=>{let a=window.matchMedia(e);a.matches!==t&&r(a.matches);let n=()=>r(a.matches);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t,e]),t},dr=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:l,queryOptions:o,successNotification:s,errorNotification:p,meta:d,metaData:m,liveMode:v,onLiveEvent:E,liveParams:c,dataProviderName:f})=>{let{resources:u}=U(),i=ne(),g=K(),b=ee(),{mutate:y}=fe({v3LegacyAuthProviderCompatible:Boolean(b==null?void 0:b.isLegacy)}),C=pe(),P=F(e,f,u),h=q(d,m),L=q(r,t==null?void 0:t.filters),D=q(l,t==null?void 0:t.sort),S=q(a,t==null?void 0:t.hasPagination),x=Oa({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:S}),A=x.mode==="server",Q={meta:h,metaData:h,filters:L,hasPagination:A,pagination:x,sorters:D,config:{...t,sort:D}},O=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,k=Pe(e,P,h,h),{getList:T}=i(P);return ct({resource:e,types:["*"],params:{meta:h,metaData:h,pagination:x,hasPagination:A,sort:D,sorters:D,filters:L,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:O,liveMode:v,onLiveEvent:E}),(0,Bn.useQuery)(k.list({filters:L,hasPagination:A,...A&&{pagination:x},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:N,pageParam:$,signal:R})=>T({resource:e,pagination:x,hasPagination:A,filters:L,sort:D,sorters:D,meta:{...h||{},queryContext:{queryKey:N,pageParam:$,signal:R}},metaData:{...h||{},queryContext:{queryKey:N,pageParam:$,signal:R}}}),{...o,enabled:typeof(o==null?void 0:o.enabled)<"u"?o==null?void 0:o.enabled:!!e,select:N=>{var $;let R=N,{current:_,mode:ae,pageSize:V}=x;return ae==="client"&&(R={...R,data:R.data.slice((_-1)*V,_*V),total:R.total}),o!=null&&o.select?($=o==null?void 0:o.select)==null?void 0:$.call(o,R):R},onSuccess:N=>{var $;($=o==null?void 0:o.onSuccess)==null||$.call(o,N);let R=typeof s=="function"?s(N,Q,e):s;C(R)},onError:N=>{var $;y(N),($=o==null?void 0:o.onError)==null||$.call(o,N);let R=typeof p=="function"?p(N,Q,e):p;C(R,{key:`${e}-useList-notification`,message:g("notifications.error",{statusCode:N.statusCode},`Error (status code: ${N.statusCode})`),description:N.message,type:"error"})}})},fo=w("@tanstack/react-query"),cr=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:n,meta:l,metaData:o,liveMode:s,onLiveEvent:p,liveParams:d,dataProviderName:m})=>{let{resources:v}=U(),E=ne(),c=Pe(e,F(e,m,v),q(l,o),q(l,o)),{getOne:f}=E(F(e,m,v)),u=K(),i=ee(),{mutate:g}=fe({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),b=pe();return ct({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:q(l,o),metaData:q(l,o),subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:s,onLiveEvent:p}),(0,fo.useQuery)(c.detail(t),({queryKey:y,pageParam:C,signal:P})=>f({resource:e,id:t,meta:{...q(l,o)||{},queryContext:{queryKey:y,pageParam:C,signal:P}},metaData:{...q(l,o)||{},queryContext:{queryKey:y,pageParam:C,signal:P}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:y=>{var C;(C=r==null?void 0:r.onSuccess)==null||C.call(r,y);let P=typeof a=="function"?a(y,{id:t,...q(l,o)||{}},e):a;b(P)},onError:y=>{var C;g(y),(C=r==null?void 0:r.onError)==null||C.call(r,y);let P=typeof n=="function"?n(y,{id:t,...q(l,o)||{}},e):n;b(P,{key:`${t}-${e}-getOne-notification`,message:u("notifications.error",{statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}})},mo=w("@tanstack/react-query"),Ta=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:n,meta:l,metaData:o,liveMode:s,onLiveEvent:p,liveParams:d,dataProviderName:m})=>{let{resources:v}=U(),E=ne(),c=Pe(e,F(e,m,v),q(l,o),q(l,o)),{getMany:f,getOne:u}=E(F(e,m,v)),i=K(),g=ee(),{mutate:b}=fe({v3LegacyAuthProviderCompatible:Boolean(g==null?void 0:g.isLegacy)}),y=pe(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return ct({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:q(l,o),metaData:q(l,o),subscriptionType:"useMany",...d},channel:`resources/${e}`,enabled:C,liveMode:s,onLiveEvent:p}),(0,mo.useQuery)(c.many(t),({queryKey:P,pageParam:h,signal:L})=>f?f({resource:e,ids:t,metaData:{...q(l,o)||{},queryContext:{queryKey:P,pageParam:h,signal:L}}}):kt(t.map(D=>u({resource:e,id:D,metaData:{...q(l,o)||{},queryContext:{queryKey:P,pageParam:h,signal:L}}}))),{...r,onSuccess:P=>{var h;(h=r==null?void 0:r.onSuccess)==null||h.call(r,P);let L=typeof a=="function"?a(P,t,e):a;y(L)},onError:P=>{var h;b(P),(h=r==null?void 0:r.onError)==null||h.call(r,P);let L=typeof n=="function"?n(P,t,e):n;y(L,{key:`${t[0]}-${e}-getMany-notification`,message:i("notifications.error",{statusCode:P.statusCode},`Error (status code: ${P.statusCode})`),description:P.message,type:"error"})}})},Ir=w("@tanstack/react-query"),St=M(w("react")),Kt=M(w("lodash/isEqual")),Ra=St.default.createContext({notifications:[],notificationDispatch:()=>!1}),po=[],go=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,Kt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,Kt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,Kt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},yo=({children:e})=>{let[t,r]=(0,St.useReducer)(go,po),a={notifications:t,notificationDispatch:r};return St.default.createElement(Ra.Provider,{value:a},e,typeof window<"u"&&t.map(n=>St.default.createElement(un,{key:`${n.id}-${n.resource}-queue`,notification:n})))},Ur=M(w("pluralize")),Qa=({mutationOptions:e}={})=>{let{resources:t}=U(),r=(0,Ir.useQueryClient)(),a=ne(),{mutationMode:n,undoableTimeout:l}=rt(),o=K(),s=ee(),{mutate:p}=fe({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy)}),d=Ke(),{log:m}=je(),{notificationDispatch:v}=et(),E=pe(),c=_e();return(0,Ir.useMutation)(({id:f,values:u,resource:i,mutationMode:g,undoableTimeout:b,onCancel:y,meta:C,metaData:P,dataProviderName:h})=>{let L=g!=null?g:n,D=b!=null?b:l;return L!=="undoable"?a(F(i,h,t)).update({resource:i,id:f,variables:u,meta:q(C,P),metaData:q(C,P)}):new Promise((S,x)=>{let A=()=>{a(F(i,h,t)).update({resource:i,id:f,variables:u,meta:q(C,P),metaData:q(C,P)}).then(O=>S(O)).catch(O=>x(O))},Q=()=>{x({message:"mutationCancelled"})};y&&y(Q),v({type:"ADD",payload:{id:f,resource:i,cancelMutation:Q,doMutation:A,seconds:D,isSilent:!!y}})})},{onMutate:async({resource:f,id:u,mutationMode:i,values:g,dataProviderName:b})=>{let y=Pe(f,F(f,b,t)),C=r.getQueriesData(y.resourceAll),P=i!=null?i:n;return await r.cancelQueries(y.resourceAll,void 0,{silent:!0}),P!=="pessimistic"&&(r.setQueriesData(y.list(),h=>{if(!h)return null;let L=h.data.map(D=>{var S;return((S=D.id)==null?void 0:S.toString())===(u==null?void 0:u.toString())?{id:u,...D,...g}:D});return{...h,data:L}}),r.setQueriesData(y.many(),h=>{if(!h)return null;let L=h.data.map(D=>{var S;return((S=D.id)==null?void 0:S.toString())===(u==null?void 0:u.toString())&&(D={id:u,...D,...g}),D});return{...h,data:L}}),r.setQueriesData(y.detail(u),h=>h?{...h,data:{...h.data,...g}}:null)),{previousQueries:C,queryKey:y}},onSettled:(f,u,{id:i,resource:g,dataProviderName:b,invalidates:y=["list","many","detail"]})=>{c({resource:g,dataProviderName:F(g,b,t),invalidates:y,id:i}),v({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(f,{id:u,resource:i,successNotification:g,dataProviderName:b,values:y,meta:C,metaData:P},h)=>{var L;let D=Ur.default.singular(i),S=typeof g=="function"?g(f,{id:u,values:y},i):g;E(S,{key:`${u}-${i}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${i}.${i}`,D)},`Successfully updated ${D}`),type:"success"}),d==null||d({channel:`resources/${i}`,type:"updated",payload:{ids:(L=f.data)!=null&&L.id?[f.data.id]:void 0},date:new Date});let x;if(h){let T=r.getQueryData(h.queryKey.detail(u));x=Object.keys(y||{}).reduce((N,$)=>{var R;return N[$]=(R=T==null?void 0:T.data)==null?void 0:R[$],N},{})}let{fields:A,operation:Q,variables:O,...k}=q(C,P)||{};m==null||m.mutate({action:"update",resource:i,data:y,previousData:x,meta:{id:u,dataProviderName:F(i,b,t),...k}})},onError:(f,{id:u,resource:i,errorNotification:g,values:b},y)=>{if(y)for(let C of y.previousQueries)r.setQueryData(C[0],C[1]);if(f.message!=="mutationCancelled"){p==null||p(f);let C=Ur.default.singular(i),P=typeof g=="function"?g(f,{id:u,values:b},i):g;E(P,{key:`${u}-${i}-notification`,message:o("notifications.editError",{resource:o(`${i}.${i}`,C),statusCode:f.statusCode},`Error when updating ${C} (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})},ho=w("@tanstack/react-query"),Wr=M(w("pluralize")),vr=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ne(),n=_e(),{resources:l}=U(),o=K(),s=Ke(),{log:p}=je(),d=pe();return(0,ho.useMutation)(({resource:m,values:v,meta:E,metaData:c,dataProviderName:f})=>a(F(m,f,l)).create({resource:m,variables:v,meta:q(E,c),metaData:q(E,c)}),{onSuccess:(m,{resource:v,successNotification:E,dataProviderName:c,invalidates:f=["list","many"],values:u,meta:i,metaData:g})=>{var b,y,C;let P=Wr.default.singular(v),h=typeof E=="function"?E(m,u,v):E;d(h,{key:`create-${v}-notification`,message:o("notifications.createSuccess",{resource:o(`${v}.${v}`,P)},`Successfully created ${P}`),description:o("notifications.success","Success"),type:"success"}),n({resource:v,dataProviderName:F(v,c,l),invalidates:f}),s==null||s({channel:`resources/${v}`,type:"created",payload:{ids:(b=m==null?void 0:m.data)!=null&&b.id?[m.data.id]:void 0},date:new Date});let{fields:L,operation:D,variables:S,...x}=q(i,g)||{};p==null||p.mutate({action:"create",resource:v,data:u,meta:{dataProviderName:F(v,c,l),id:(C=(y=m==null?void 0:m.data)==null?void 0:y.id)!=null?C:void 0,...x}})},onError:(m,{resource:v,errorNotification:E,values:c})=>{r(m);let f=Wr.default.singular(v),u=typeof E=="function"?E(m,c,v):E;d(u,{key:`create-${v}-notification`,description:m.message,message:o("notifications.createError",{resource:o(`${v}.${v}`,f),statusCode:m.statusCode},`There was an error creating ${f} (status code: ${m.statusCode})`),type:"error"})},...e})},zr=w("@tanstack/react-query"),Hr=M(w("pluralize")),Po=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=ne(),{resources:n}=U(),l=(0,zr.useQueryClient)(),{mutationMode:o,undoableTimeout:s}=rt(),{notificationDispatch:p}=et(),d=K(),m=Ke(),{log:v}=je(),E=pe(),c=_e();return(0,zr.useMutation)(({id:f,mutationMode:u,undoableTimeout:i,resource:g,onCancel:b,meta:y,metaData:C,dataProviderName:P,values:h})=>{let L=u!=null?u:o,D=i!=null?i:s;return L!=="undoable"?a(F(g,P,n)).deleteOne({resource:g,id:f,meta:q(y,C),metaData:q(y,C),variables:h}):new Promise((S,x)=>{let A=()=>{a(F(g,P,n)).deleteOne({resource:g,id:f,meta:q(y,C),variables:h}).then(O=>S(O)).catch(O=>x(O))},Q=()=>{x({message:"mutationCancelled"})};b&&b(Q),p({type:"ADD",payload:{id:f,resource:g,cancelMutation:Q,doMutation:A,seconds:D,isSilent:!!b}})})},{onMutate:async({id:f,resource:u,mutationMode:i,dataProviderName:g})=>{let b=Pe(u,F(u,g,n)),y=i!=null?i:o;await l.cancelQueries(b.resourceAll,void 0,{silent:!0});let C=l.getQueriesData(b.resourceAll);return y!=="pessimistic"&&(l.setQueriesData(b.list(),P=>P?{data:P.data.filter(h=>{var L;return((L=h.id)==null?void 0:L.toString())!==f.toString()}),total:P.total-1}:null),l.setQueriesData(b.many(),P=>{if(!P)return null;let h=P.data.filter(L=>{var D;return((D=L.id)==null?void 0:D.toString())!==(f==null?void 0:f.toString())});return{...P,data:h}})),{previousQueries:C,queryKey:b}},onSettled:(f,u,{id:i,resource:g,dataProviderName:b,invalidates:y=["list","many"]})=>{c({resource:g,dataProviderName:F(g,b,n),invalidates:y}),p({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(f,{id:u,resource:i,successNotification:g,dataProviderName:b,meta:y,metaData:C},P)=>{let h=Hr.default.singular(i!=null?i:"");l.removeQueries(P==null?void 0:P.queryKey.detail(u));let L=typeof g=="function"?g(f,u,i):g;E(L,{key:`${u}-${i}-notification`,description:d("notifications.success","Success"),message:d("notifications.deleteSuccess",{resource:d(`${i}.${i}`,h)},`Successfully deleted a ${h}`),type:"success"}),m==null||m({channel:`resources/${i}`,type:"deleted",payload:{ids:u?[u]:[]},date:new Date});let{fields:D,operation:S,variables:x,...A}=q(y,C)||{};v==null||v.mutate({action:"delete",resource:i,meta:{id:u,dataProviderName:F(i,b,n),...A}}),l.removeQueries(P==null?void 0:P.queryKey.detail(u))},onError:(f,{id:u,resource:i,errorNotification:g},b)=>{if(b)for(let y of b.previousQueries)l.setQueryData(y[0],y[1]);if(f.message!=="mutationCancelled"){r(f);let y=Hr.default.singular(i!=null?i:""),C=typeof g=="function"?g(f,u,i):g;E(C,{key:`${u}-${i}-notification`,message:d("notifications.deleteError",{resource:y,statusCode:f.statusCode},`Error (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})},Eo=w("@tanstack/react-query"),bo=M(w("pluralize")),Fa=({mutationOptions:e}={})=>{let t=ne(),{resources:r}=U(),a=K(),n=Ke(),l=pe(),o=_e(),{log:s}=je();return(0,Eo.useMutation)(({resource:p,values:d,meta:m,metaData:v,dataProviderName:E})=>{let c=t(F(p,E,r));return c.createMany?c.createMany({resource:p,variables:d,meta:q(m,v),metaData:q(m,v)}):kt(d.map(f=>c.create({resource:p,variables:f,meta:q(m,v),metaData:q(m,v)})))},{onSuccess:(p,{resource:d,successNotification:m,dataProviderName:v,invalidates:E=["list","many"],values:c,meta:f,metaData:u})=>{let i=bo.default.plural(d),g=typeof m=="function"?m(p,c,d):m;l(g,{key:`createMany-${d}-notification`,message:a("notifications.createSuccess",{resource:a(`${d}.${d}`,d)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),o({resource:d,dataProviderName:F(d,v,r),invalidates:E});let b=p==null?void 0:p.data.filter(L=>(L==null?void 0:L.id)!==void 0).map(L=>L.id);n==null||n({channel:`resources/${d}`,type:"created",payload:{ids:b},date:new Date});let{fields:y,operation:C,variables:P,...h}=q(f,u)||{};s==null||s.mutate({action:"createMany",resource:d,data:c,meta:{dataProviderName:F(d,v,r),ids:b,...h}})},onError:(p,{resource:d,errorNotification:m,values:v})=>{let E=typeof m=="function"?m(p,v,d):m;l(E,{key:`createMany-${d}-notification`,description:p.message,message:a("notifications.createError",{resource:a(`${d}.${d}`,d),statusCode:p.statusCode},`There was an error creating ${d} (status code: ${p.statusCode}`),type:"error"})},...e})},Br=w("@tanstack/react-query"),Kr=M(w("pluralize")),Co=({mutationOptions:e}={})=>{let{resources:t}=U(),r=(0,Br.useQueryClient)(),a=ne(),n=K(),{mutationMode:l,undoableTimeout:o}=rt(),s=ee(),{mutate:p}=fe({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy)}),{notificationDispatch:d}=et(),m=Ke(),v=pe(),E=_e(),{log:c}=je();return(0,Br.useMutation)(({ids:f,values:u,resource:i,onCancel:g,mutationMode:b,undoableTimeout:y,meta:C,metaData:P,dataProviderName:h})=>{let L=b!=null?b:l,D=y!=null?y:o,S=a(F(i,h,t)),x=()=>S.updateMany?S.updateMany({resource:i,ids:f,variables:u,meta:q(C,P),metaData:q(C,P)}):kt(f.map(A=>S.update({resource:i,id:A,variables:u,meta:q(C,P),metaData:q(C,P)})));return L!=="undoable"?x():new Promise((A,Q)=>{let O=()=>{x().then(T=>A(T)).catch(T=>Q(T))},k=()=>{Q({message:"mutationCancelled"})};g&&g(k),d({type:"ADD",payload:{id:f,resource:i,cancelMutation:k,doMutation:O,seconds:D,isSilent:!!g}})})},{onMutate:async({resource:f,ids:u,values:i,mutationMode:g,dataProviderName:b,meta:y,metaData:C})=>{let P=Pe(f,F(f,b,t),q(y,C),q(y,C)),h=g!=null?g:l;await r.cancelQueries(P.resourceAll,void 0,{silent:!0});let L=r.getQueriesData(P.resourceAll);if(h!=="pessimistic"){r.setQueriesData(P.list(),D=>{if(!D)return null;let S=D.data.map(x=>x.id!==void 0&&u.filter(A=>A!==void 0).map(String).includes(x.id.toString())?{...x,...i}:x);return{...D,data:S}}),r.setQueriesData(P.many(),D=>{if(!D)return null;let S=D.data.map(x=>x.id!==void 0&&u.filter(A=>A!==void 0).map(String).includes(x.id.toString())?{...x,...i}:x);return{...D,data:S}});for(let D of u)r.setQueriesData(P.detail(D),S=>{if(!S)return null;let x={...S.data,...i};return{...S,data:x}})}return{previousQueries:L,queryKey:P}},onSettled:(f,u,{ids:i,resource:g,dataProviderName:b})=>{E({resource:g,invalidates:["list","many"],dataProviderName:F(g,b,t)}),i.forEach(y=>E({resource:g,invalidates:["detail"],dataProviderName:F(g,b,t),id:y})),d({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(f,{ids:u,resource:i,meta:g,metaData:b,dataProviderName:y,successNotification:C,values:P},h)=>{let L=Kr.default.singular(i),D=typeof C=="function"?C(f,{ids:u,values:P},i):C;v(D,{key:`${u}-${i}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${i}.${i}`,i)},`Successfully updated ${L}`),type:"success"}),m==null||m({channel:`resources/${i}`,type:"updated",payload:{ids:u.map(String)},date:new Date});let S=[];h&&u.forEach(k=>{let T=r.getQueryData(h.queryKey.detail(k));S.push(Object.keys(P||{}).reduce((N,$)=>{var R;return N[$]=(R=T==null?void 0:T.data)==null?void 0:R[$],N},{}))});let{fields:x,operation:A,variables:Q,...O}=q(g,b)||{};c==null||c.mutate({action:"updateMany",resource:i,data:P,previousData:S,meta:{ids:u,dataProviderName:F(i,y,t),...O}})},onError:(f,{ids:u,resource:i,errorNotification:g,values:b},y)=>{if(y)for(let C of y.previousQueries)r.setQueryData(C[0],C[1]);if(f.message!=="mutationCancelled"){p==null||p(f);let C=Kr.default.singular(i),P=typeof g=="function"?g(f,{ids:u,values:b},i):g;v(P,{key:`${u}-${i}-updateMany-error-notification`,message:n("notifications.editError",{resource:C,statusCode:f.statusCode},`Error when updating ${C} (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})},jr=w("@tanstack/react-query"),wo=M(w("pluralize")),Lo=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:a,undoableTimeout:n}=rt(),l=ne(),{notificationDispatch:o}=et(),s=K(),p=Ke(),d=pe(),m=_e(),{log:v}=je(),{resources:E}=U(),c=(0,jr.useQueryClient)();return(0,jr.useMutation)(({resource:f,ids:u,mutationMode:i,undoableTimeout:g,onCancel:b,meta:y,metaData:C,dataProviderName:P,values:h})=>{let L=i!=null?i:a,D=g!=null?g:n,S=l(F(f,P,E)),x=()=>S.deleteMany?S.deleteMany({resource:f,ids:u,meta:q(y,C),metaData:q(y,C),variables:h}):kt(u.map(A=>S.deleteOne({resource:f,id:A,meta:q(y,C),metaData:q(y,C),variables:h})));return L!=="undoable"?x():new Promise((A,Q)=>{let O=()=>{x().then(T=>A(T)).catch(T=>Q(T))},k=()=>{Q({message:"mutationCancelled"})};b&&b(k),o({type:"ADD",payload:{id:u,resource:f,cancelMutation:k,doMutation:O,seconds:D,isSilent:!!b}})})},{onMutate:async({ids:f,resource:u,mutationMode:i,dataProviderName:g})=>{let b=Pe(u,F(u,g,E)),y=i!=null?i:a;await c.cancelQueries(b.resourceAll,void 0,{silent:!0});let C=c.getQueriesData(b.resourceAll);if(y!=="pessimistic"){c.setQueriesData(b.list(),P=>P?{data:P.data.filter(h=>h.id&&!f.map(String).includes(h.id.toString())),total:P.total-1}:null),c.setQueriesData(b.many(),P=>{if(!P)return null;let h=P.data.filter(L=>L.id?!f.map(String).includes(L.id.toString()):!1);return{...P,data:h}});for(let P of f)c.setQueriesData(b.detail(P),h=>!h||h.data.id==P?null:{...h})}return{previousQueries:C,queryKey:b}},onSettled:(f,u,{resource:i,ids:g,dataProviderName:b,invalidates:y=["list","many"]})=>{m({resource:i,dataProviderName:F(i,b,E),invalidates:y}),o({type:"REMOVE",payload:{id:g,resource:i}})},onSuccess:(f,{ids:u,resource:i,meta:g,metaData:b,dataProviderName:y,successNotification:C},P)=>{u.forEach(A=>c.removeQueries(P==null?void 0:P.queryKey.detail(A)));let h=typeof C=="function"?C(f,u,i):C;d(h,{key:`${u}-${i}-notification`,description:s("notifications.success","Success"),message:s("notifications.deleteSuccess",{resource:s(`${i}.${i}`,i)},`Successfully deleted ${i}`),type:"success"}),p==null||p({channel:`resources/${i}`,type:"deleted",payload:{ids:u},date:new Date});let{fields:L,operation:D,variables:S,...x}=q(g,b)||{};v==null||v.mutate({action:"deleteMany",resource:i,meta:{ids:u,dataProviderName:F(i,y,E),...x}}),u.forEach(A=>c.removeQueries(P==null?void 0:P.queryKey.detail(A)))},onError:(f,{ids:u,resource:i,errorNotification:g},b)=>{if(b)for(let y of b.previousQueries)c.setQueryData(y[0],y[1]);if(f.message!=="mutationCancelled"){r(f);let y=wo.default.singular(i),C=typeof g=="function"?g(f,u,i):g;d(C,{key:`${u}-${i}-notification`,message:s("notifications.deleteError",{resource:y,statusCode:f.statusCode},`Error (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})},qo=e=>{let t=ne(),{getApiUrl:r}=t(e);return r()},Do=w("@tanstack/react-query"),So=({url:e,method:t,config:r,queryOptions:a,successNotification:n,errorNotification:l,meta:o,metaData:s,dataProviderName:p})=>{let d=ne(),{custom:m}=d(p),v=ee(),{mutate:E}=fe({v3LegacyAuthProviderCompatible:Boolean(v==null?void 0:v.isLegacy)}),c=K(),f=pe();if(m)return(0,Do.useQuery)({queryKey:[p,"custom",t,e,{...r,...q(o,s)||{}}],queryFn:({queryKey:u,pageParam:i,signal:g})=>m({url:e,method:t,...r,metaData:{...q(o,s)||{},queryContext:{queryKey:u,pageParam:i,signal:g}}}),...a,onSuccess:u=>{var i;(i=a==null?void 0:a.onSuccess)==null||i.call(a,u);let g=typeof n=="function"?n(u,{...r,...q(o,s)||{}}):n;f(g)},onError:u=>{var i;E(u),(i=a==null?void 0:a.onError)==null||i.call(a,u);let g=typeof l=="function"?l(u,{...r,...q(o,s)||{}}):l;f(g,{key:`${t}-notification`,message:c("notifications.error",{statusCode:u.statusCode},`Error (status code: ${u.statusCode})`),description:u.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},xo=w("@tanstack/react-query"),Mo=({mutationOptions:e}={})=>{let t=ee(),{mutate:r}=fe({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),a=pe(),n=ne(),l=K();return(0,xo.useMutation)(({url:o,method:s,values:p,meta:d,metaData:m,dataProviderName:v,config:E})=>{let{custom:c}=n(v);if(c)return c({url:o,method:s,payload:p,meta:q(d,m),metaData:q(d,m),headers:{...E==null?void 0:E.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(o,{successNotification:s,config:p,meta:d,metaData:m})=>{let v=typeof s=="function"?s(o,{...p,...q(d,m)||{}}):s;a(v)},onError:(o,{errorNotification:s,method:p,config:d,meta:m,metaData:v})=>{r(o);let E=typeof s=="function"?s(o,{...d,...q(m,v)||{}}):s;a(E,{key:`${p}-notification`,message:l("notifications.error",{statusCode:o.statusCode},`Error (status code: ${o.statusCode})`),description:o.message,type:"error"})},...e})},_r=w("react"),Ia=M(w("react")),No=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),fr=Ia.default.createContext(No()),ko=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Ia.default.createElement(fr.Provider,{value:r},e)},ne=()=>{let e=(0,_r.useContext)(fr);return(0,_r.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},Ao=w("@tanstack/react-query"),$o=({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:l,queryOptions:o,successNotification:s,errorNotification:p,meta:d,metaData:m,liveMode:v,onLiveEvent:E,liveParams:c,dataProviderName:f})=>{let{resources:u}=U(),i=ne(),g=K(),b=ee(),{mutate:y}=fe({v3LegacyAuthProviderCompatible:Boolean(b==null?void 0:b.isLegacy)}),C=pe(),P=F(e,f,u),h=q(d,m),L=q(r,t==null?void 0:t.filters),D=q(l,t==null?void 0:t.sort),S=q(a,t==null?void 0:t.hasPagination),x=Oa({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:S}),A=x.mode==="server",Q={meta:h,metaData:h,filters:L,hasPagination:A,pagination:x,sorters:D,config:{...t,sort:D}},O=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,k=Pe(e,P,h,h),{getList:T}=i(P);return ct({resource:e,types:["*"],params:{meta:h,metaData:h,pagination:x,hasPagination:A,sort:D,sorters:D,filters:L,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:O,liveMode:v,onLiveEvent:E}),(0,Ao.useInfiniteQuery)(k.list({filters:L,hasPagination:A,...A&&{pagination:x},...l&&{sorters:l},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:N,pageParam:$,signal:R})=>{let _={...x,current:$};return T({resource:e,pagination:_,hasPagination:A,filters:L,sort:D,sorters:D,meta:{...h||{},queryContext:{queryKey:N,pageParam:$,signal:R}},metaData:{...h||{},queryContext:{queryKey:N,pageParam:$,signal:R}}}).then(({data:ae,total:V,...H})=>({data:ae,total:V,pagination:_,...H}))},{getNextPageParam:N=>ka(N),getPreviousPageParam:N=>Aa(N),...o,onSuccess:N=>{var $;($=o==null?void 0:o.onSuccess)==null||$.call(o,N);let R=typeof s=="function"?s(N,Q,e):s;C(R)},onError:N=>{var $;y(N),($=o==null?void 0:o.onError)==null||$.call(o,N);let R=typeof p=="function"?p(N,Q,e):p;C(R,{key:`${e}-useInfiniteList-notification`,message:g("notifications.error",{statusCode:N.statusCode},`Error (status code: ${N.statusCode})`),description:N.message,type:"error"})}})},jt=w("react"),Oo=w("@tanstack/react-query"),Ua=M(w("react")),dt=Ua.default.createContext(void 0),To=({liveProvider:e,children:t})=>Ua.default.createElement(dt.Provider,{value:e},t),ct=({resource:e,params:t,channel:r,types:a,enabled:n=!0,liveMode:l,onLiveEvent:o})=>{let s=(0,Oo.useQueryClient)(),p=Pe(e),d=(0,jt.useContext)(dt),{liveMode:m,onLiveEvent:v}=(0,jt.useContext)(Te),E=l!=null?l:m;(0,jt.useEffect)(()=>{let c;return E&&E!=="off"&&n&&(c=d==null?void 0:d.subscribe({channel:r,params:{resource:e,...t},types:a,callback:f=>{E==="auto"&&s.invalidateQueries(p.resourceAll),o==null||o(f),v==null||v(f)}})),()=>{c&&(d==null||d.unsubscribe(c))}},[n])},Ro=w("react"),Wa=e=>{let{liveMode:t}=(0,Ro.useContext)(Te);return e!=null?e:t},Vr=w("react"),Qo=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:n})=>{let l=(0,Vr.useContext)(dt);(0,Vr.useEffect)(()=>{let o;return a&&(o=l==null?void 0:l.subscribe({channel:t,params:e,types:r,callback:n})),()=>{o&&(l==null||l.unsubscribe(o))}},[a])},Fo=w("react"),Ke=()=>{let e=(0,Fo.useContext)(dt);return e==null?void 0:e.publish},Io=w("react"),za=M(w("react")),Uo=w("react"),Wo=w("react"),zo=M(w("lodash/isEqual")),Ho=e=>{let t=(0,Wo.useRef)(e);return(0,zo.default)(t.current,e)||(t.current=e),t.current},Ha=(e,t)=>{let r=Ho(t);return(0,Uo.useMemo)(e,r)},vt=za.default.createContext({resources:[]}),Bo=({resources:e,children:t})=>{let r=Ha(()=>$a(e!=null?e:[]),[e]);return za.default.createElement(vt.Provider,{value:{resources:r}},t)},Ba=M(w("react")),Ka=Ba.default.createContext("new"),Ko=Ka.Provider,Z=()=>Ba.default.useContext(Ka),jo=M(w("react")),ja=M(w("react")),_a={},ft=(0,ja.createContext)(_a),_o=({children:e,router:t})=>ja.default.createElement(ft.Provider,{value:t!=null?t:_a},e),Zr=M(w("react")),Va=()=>{let e=(0,Zr.useContext)(ft);return Zr.default.useMemo(()=>{var t;return(t=e==null?void 0:e.parse)!=null?t:()=>()=>({})},[e==null?void 0:e.parse])()},me=()=>{let e=Va();return jo.default.useMemo(()=>e(),[e])};function U(e){var t,r;let{resources:a}=(0,Io.useContext)(vt),n=Z(),l=me(),o={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},s=mt(),{useParams:p}=re(),d=p();if(n==="legacy"){let E=o.resourceNameOrRouteName?o.resourceNameOrRouteName:d.resource,c=E?s(E):void 0,f=(t=o==null?void 0:o.recordItemId)!=null?t:d.id,u=d.action,i=(r=o==null?void 0:o.resourceName)!=null?r:c==null?void 0:c.name;return{resources:a,resource:c,resourceName:i,id:f,action:u}}let m,v=typeof e=="string"?e:o==null?void 0:o.resourceNameOrRouteName;if(v){let E=j(v,a);E?m=E:m={name:v}}else l!=null&&l.resource&&(m=l.resource);return{resources:a,resource:m,resourceName:m==null?void 0:m.name,id:l.id,action:l.action}}var Yr=w("react"),mt=()=>{let{resources:e}=(0,Yr.useContext)(vt);return(0,Yr.useCallback)(t=>j(t,e,!0)||{name:t,route:t},[e])},Vo=w("react"),et=()=>{let{notifications:e,notificationDispatch:t}=(0,Vo.useContext)(Ra);return{notifications:e,notificationDispatch:t}},Zo=w("react"),Za=M(w("react")),mr=(0,Za.createContext)({}),Yo=({open:e,close:t,children:r})=>Za.default.createElement(mr.Provider,{value:{open:e,close:t}},r),Re=()=>{let{open:e,close:t}=(0,Zo.useContext)(mr);return{open:e,close:t}},Go=w("react"),pe=()=>{let{open:e}=Re();return(0,Go.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},Gr=w("react"),Ya=M(w("react")),tt=Ya.default.createContext({}),Jo=({children:e,i18nProvider:t})=>Ya.default.createElement(tt.Provider,{value:{i18nProvider:t}},e),Xo=()=>{let{i18nProvider:e}=(0,Gr.useContext)(tt);return(0,Gr.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},Jr=w("react"),K=()=>{let{i18nProvider:e}=(0,Jr.useContext)(tt);return(0,Jr.useMemo)(()=>{function t(r,a,n){var l,o;return(o=(l=e==null?void 0:e.translate(r,a,n))!=null?l:n)!=null?o:typeof a=="string"&&typeof n>"u"?a:r}return t},[e])},Xr=w("react"),el=()=>{let{i18nProvider:e}=(0,Xr.useContext)(tt);return(0,Xr.useCallback)(()=>e==null?void 0:e.getLocale(),[])},tl=w("react"),rt=()=>{let{mutationMode:e,undoableTimeout:t}=(0,tl.useContext)(Te);return{mutationMode:e,undoableTimeout:t}},ea=w("react"),rr=M(w("react")),Ga=rr.default.createContext({}),rl=({children:e})=>{let[t,r]=(0,rr.useState)(!1);return rr.default.createElement(Ga.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},pr=()=>{let{warnWhenUnsavedChanges:e}=(0,ea.useContext)(Te),{warnWhen:t,setWarnWhen:r}=(0,ea.useContext)(Ga);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},al=w("react"),Ja=()=>{let{syncWithLocation:e}=(0,al.useContext)(Te);return{syncWithLocation:e}},nl=w("react"),ol=()=>{let{Title:e}=(0,nl.useContext)(Te);return e},ll=w("react"),gr=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:l,hasDashboard:o,mutationMode:s,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:v,LoginPage:E,catchAll:c,options:f}=(0,ll.useContext)(Te);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:l,hasDashboard:o,mutationMode:s,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:v,LoginPage:E,catchAll:c,options:f}},il=w("react"),ul=w("export-to-csv-fix-source-map"),sl=({resourceName:e,resource:t,sorter:r,sorters:a,filters:n,maxItemCount:l,pageSize:o=20,mapData:s=c=>c,exportOptions:p,meta:d,metaData:m,dataProviderName:v,onError:E}={})=>{var c;let[f,u]=(0,il.useState)(!1),i=ne(),{resource:g,resources:b}=U(),y=`${ur(g==null?void 0:g.name,"plural")}-${new Date().toLocaleString()}`,{getList:C}=i(F((c=g==null?void 0:g.identifier)!=null?c:g==null?void 0:g.name,v,b));return{isLoading:f,triggerExport:async()=>{var P;u(!0);let h=[],L=1,D=!0;for(;D;)try{let{data:S,total:x}=await C({resource:(P=g==null?void 0:g.name)!=null?P:"",filters:n,sort:q(a,r),sorters:q(a,r),pagination:{current:L,pageSize:o,mode:"server"},meta:q(d,m),metaData:q(d,m)});L++,h.push(...S),l&&h.length>=l&&(h=h.slice(0,l),D=!1),x===h.length&&(D=!1)}catch(S){u(!1),D=!1,E==null||E(S);return}new ul.ExportToCsv({filename:y,useKeysAsHeaders:!0,...p}).generateCsv(h.map(s)),u(!1)}}},ta=M(w("react")),dl=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:n,redirect:l,successNotification:o,errorNotification:s,meta:p,metaData:d,mutationMode:m,liveMode:v,onLiveEvent:E,liveParams:c,undoableTimeout:f,dataProviderName:u,invalidates:i,queryOptions:g,createMutationOptions:b,updateMutationOptions:y}={})=>{let{options:C}=gr(),{resources:P}=U(),h=Z(),{resource:L,id:D,action:S}=me(),{useParams:x}=re(),{resource:A,action:Q,id:O}=x(),k=typeof L=="string"?L:L==null?void 0:L.name,T=!e||e===(h==="legacy"?A:k)?r!=null?r:h==="legacy"?O:D:r,[N,$]=ta.default.useState(T);ta.default.useEffect(()=>{$(T)},[T]);let R=e!=null?e:h==="legacy"?A:k,_=h==="legacy"?Q:S,ae=t!=null?t:_==="edit"||_==="clone"?_:"create",V=mt(),H;if(h==="legacy")R&&(H=V(R));else if(e){let B=j(e,P);B?H=B:H={name:e,route:e}}else if(typeof L=="string"){let B=j(L,P);B?H=B:H={name:L,route:L}}else H=L;let{mutationMode:oe}=rt(),Le=m!=null?m:oe,Qe=ae==="create",J=ae==="edit",te=ae==="clone",at=so({redirectFromProps:l,action:ae,redirectOptions:C.redirect}),Qt=N!==void 0&&(J||te),gt=cr({resource:H==null?void 0:H.name,id:N!=null?N:"",queryOptions:{enabled:Qt,...g},liveMode:v,onLiveEvent:E,liveParams:c,meta:q(p,d),metaData:q(p,d),dataProviderName:u}),{isFetching:nt}=gt,ot=vr({mutationOptions:b}),{mutate:yt,isLoading:qe}=ot,lt=Qa({mutationOptions:y}),{mutate:ke,isLoading:Ft}=lt,{setWarnWhen:Fe}=pr(),Ae=Xa();return{...Qe||te?{formLoading:nt||qe,mutationResult:ot,onFinish:async B=>{Fe(!1);let le=De=>{Ae({redirect:at,resource:H,id:De,meta:d})};return Le!=="pessimistic"&&setTimeout(()=>{le()}),new Promise((De,Ie)=>{if(Le!=="pessimistic"&&De(),!!H)return yt({values:B,resource:H.name,successNotification:o,errorNotification:s,meta:q(p,d),metaData:q(p,d),dataProviderName:u,invalidates:i},{onSuccess:(Ce,Se,ie)=>{var xe;a&&a(Ce,B,ie);let Ue=(xe=Ce==null?void 0:Ce.data)==null?void 0:xe.id;le(Ue),De(Ce)},onError:(Ce,Se,ie)=>{if(n)return n(Ce,B,ie);Ie()}})})}}:{formLoading:nt||Ft,mutationResult:lt,onFinish:async B=>{if(Fe(!1),!H)return;let le={id:N!=null?N:"",values:B,resource:H.name,mutationMode:Le,undoableTimeout:f,successNotification:o,errorNotification:s,meta:q(p,d),metaData:q(p,d),dataProviderName:u,invalidates:i},De=()=>{Ae({redirect:at,resource:H,id:N,meta:d})};return Le!=="pessimistic"&&setTimeout(()=>{De()}),new Promise((Ie,Ce)=>(Le!=="pessimistic"&&Ie(),setTimeout(()=>{ke(le,{onSuccess:(Se,ie,xe)=>{a&&a(Se,B,xe),Le==="pessimistic"&&De(),Ie(Se)},onError:(Se,ie,xe)=>{if(n)return n(Se,B,xe);Ce()}})})))}},queryResult:gt,id:N,setId:$,redirect:(B,le)=>{Ae({redirect:B!==void 0?B:J?"list":"edit",resource:H,id:le!=null?le:N,meta:d})}}},cl=w("react"),Xa=()=>{let{show:e,edit:t,list:r,create:a}=be();return(0,cl.useCallback)(({redirect:n,resource:l,id:o,meta:s={}})=>{if(n&&l)return!!l.show&&n==="show"&&o?e(l,o,void 0,s):!!l.edit&&n==="edit"&&o?t(l,o,void 0,s):!!l.create&&n==="create"?a(l,void 0,s):r(l,"push",s)},[])},ra=M(w("react")),Ee=()=>{let e=(0,ra.useContext)(ft);return ra.default.useMemo(()=>{var t;return(t=e==null?void 0:e.go)!=null?t:()=>()=>{}},[e==null?void 0:e.go])()},aa=M(w("react")),en=()=>{let e=(0,aa.useContext)(ft);return aa.default.useMemo(()=>{var t;return(t=e==null?void 0:e.back)!=null?t:()=>()=>{}},[e==null?void 0:e.back])()},be=()=>{let{resources:e}=U(),t=Z(),{useHistory:r}=re(),a=r(),n=me(),l=Ee(),o=en(),s=(c,f="push")=>{t==="legacy"?a[f](c):l({to:c,type:f})},p=(c,f={})=>{var u,i,g;if(t==="legacy"){let b=typeof c=="string"?(u=j(c,e,!0))!=null?u:{name:c,route:c}:c,y=ce(b,e,!0).find(C=>C.action==="create");return y?ye(y.route,n,f):""}else{let b=typeof c=="string"?(i=j(c,e))!=null?i:{name:c}:c,y=(g=ce(b,e).find(C=>C.action==="create"))==null?void 0:g.route;return y?l({to:ye(y,n,f),type:"path"}):""}},d=(c,f,u={})=>{var i,g,b;let y=encodeURIComponent(f);if(t==="legacy"){let C=typeof c=="string"?(i=j(c,e,!0))!=null?i:{name:c,route:c}:c,P=ce(C,e,!0).find(h=>h.action==="edit");return P?ye(P.route,n,{...u,id:y}):""}else{let C=typeof c=="string"?(g=j(c,e))!=null?g:{name:c}:c,P=(b=ce(C,e).find(h=>h.action==="edit"))==null?void 0:b.route;return P?l({to:ye(P,n,{...u,id:y}),type:"path"}):""}},m=(c,f,u={})=>{var i,g,b;let y=encodeURIComponent(f);if(t==="legacy"){let C=typeof c=="string"?(i=j(c,e,!0))!=null?i:{name:c,route:c}:c,P=ce(C,e,!0).find(h=>h.action==="clone");return P?ye(P.route,n,{...u,id:y}):""}else{let C=typeof c=="string"?(g=j(c,e))!=null?g:{name:c}:c,P=(b=ce(C,e).find(h=>h.action==="clone"))==null?void 0:b.route;return P?l({to:ye(P,n,{...u,id:y}),type:"path"}):""}},v=(c,f,u={})=>{var i,g,b;let y=encodeURIComponent(f);if(t==="legacy"){let C=typeof c=="string"?(i=j(c,e,!0))!=null?i:{name:c,route:c}:c,P=ce(C,e,!0).find(h=>h.action==="show");return P?ye(P.route,n,{...u,id:y}):""}else{let C=typeof c=="string"?(g=j(c,e))!=null?g:{name:c}:c,P=(b=ce(C,e).find(h=>h.action==="show"))==null?void 0:b.route;return P?l({to:ye(P,n,{...u,id:y}),type:"path"}):""}},E=(c,f={})=>{var u,i,g;if(t==="legacy"){let b=typeof c=="string"?(u=j(c,e,!0))!=null?u:{name:c,route:c}:c,y=ce(b,e,!0).find(C=>C.action==="list");return y?ye(y.route,n,f):""}else{let b=typeof c=="string"?(i=j(c,e))!=null?i:{name:c}:c,y=(g=ce(b,e).find(C=>C.action==="list"))==null?void 0:g.route;return y?l({to:ye(y,n,f),type:"path"}):""}};return{create:(c,f="push",u={})=>{s(p(c,u),f)},createUrl:p,edit:(c,f,u="push",i={})=>{s(d(c,f,i),u)},editUrl:d,clone:(c,f,u="push",i={})=>{s(m(c,f,i),u)},cloneUrl:m,show:(c,f,u="push",i={})=>{s(v(c,f,i),u)},showUrl:v,list:(c,f="push",u={})=>{s(E(c,u),f)},listUrl:E,push:(c,...f)=>{t==="legacy"?a.push(c,...f):l({to:c,type:"push"})},replace:(c,...f)=>{t==="legacy"?a.replace(c,...f):l({to:c,type:"replace"})},goBack:()=>{t==="legacy"?a.goBack():o()}}},na=M(w("react")),vl=({resource:e,id:t,successNotification:r,errorNotification:a,meta:n,metaData:l,liveMode:o,onLiveEvent:s,dataProviderName:p,queryOptions:d}={})=>{let m=Z(),{resources:v}=U(),{useParams:E}=re(),{resource:c,id:f}=me(),{resource:u,id:i}=E(),g=c==null?void 0:c.name,b=!e||e===(m==="legacy"?u:g)?t!=null?t:m==="legacy"?i:f:t,[y,C]=(0,na.useState)(b);na.default.useEffect(()=>{C(b)},[b]);let P=e!=null?e:m==="legacy"?u:g,h,L=mt();if(m==="legacy")P&&(h=L(P));else if(e){let D=j(e,v);D?h=D:h={name:e,route:e}}else if(typeof c=="string"){let D=j(c,v);D?h=D:h={name:c,route:c}}else h=c;return{queryResult:cr({resource:h==null?void 0:h.name,id:y!=null?y:"",queryOptions:{enabled:y!==void 0,...d},successNotification:r,errorNotification:a,meta:q(n,l),metaData:q(n,l),liveMode:o,onLiveEvent:s,dataProviderName:p}),showId:y,setShowId:C}},Ct=w("react"),fl=w("papaparse"),ml=M(w("lodash/chunk")),pl=({resourceName:e,resource:t,mapData:r=m=>m,paparseOptions:a,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:l,meta:o,metaData:s,onProgress:p,dataProviderName:d}={})=>{let[m,v]=(0,Ct.useState)(0),[E,c]=(0,Ct.useState)(0),[f,u]=(0,Ct.useState)(!1),{resource:i}=U(t!=null?t:e),g=Fa(),b=vr(),y;n===1?y=b:y=g;let C=()=>{c(0),v(0),u(!1)},P=L=>{let D={succeeded:L.filter(S=>S.type==="success"),errored:L.filter(S=>S.type==="error")};l==null||l(D),u(!1)};(0,Ct.useEffect)(()=>{p==null||p({totalAmount:E,processedAmount:m})},[E,m]);let h=({file:L})=>(C(),new Promise(D=>{u(!0),(0,fl.parse)(L,{complete:async({data:S})=>{let x=Ca(S,r);if(c(x.length),n===1){let A=x.map(O=>async()=>{var k;return{response:await b.mutateAsync({resource:(k=i==null?void 0:i.name)!=null?k:"",values:O,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:q(o,s),metaData:q(o,s)}),value:O}}),Q=await Rr(A,({response:O,value:k})=>(v(T=>T+1),{response:[O.data],type:"success",request:[k]}),(O,k)=>({response:[O],type:"error",request:[x[k]]}));D(Q)}else{let A=(0,ml.default)(x,n),Q=A.map(k=>async()=>{var T;return{response:await g.mutateAsync({resource:(T=i==null?void 0:i.name)!=null?T:"",values:k,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:q(o,s),metaData:q(o,s)}),value:k,currentBatchLength:k.length}}),O=await Rr(Q,({response:k,currentBatchLength:T,value:N})=>(v($=>$+T),{response:k.data,type:"success",request:N}),(k,T)=>({response:[k],type:"error",request:A[T]}));D(O)}},...a})}).then(D=>(P(D),D)));return{inputProps:{type:"file",accept:".csv",onChange:L=>{L.target.files&&L.target.files.length>0&&h({file:L.target.files[0]})}},mutationResult:y,isLoading:f,handleChange:h}},_t=w("react"),gl=({defaultVisible:e=!1}={})=>{let[t,r]=(0,_t.useState)(e),a=(0,_t.useCallback)(()=>r(!0),[t]),n=(0,_t.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:n}},yl=M(w("react")),yr=()=>{let e=Z(),{resource:t,resources:r}=U(),a=me();return yl.default.useCallback(({resource:n,action:l,meta:o})=>{var s;let p=n||t;if(!p)return;let d=(s=ce(p,r,e==="legacy").find(m=>m.action===l))==null?void 0:s.route;return d?ye(d,a,o):void 0},[r,t,a])},hl=({resource:e,action:t,meta:r,legacy:a})=>yr()({resource:e,action:t,meta:r,legacy:a}),oa=M(w("react")),At=()=>{let e=(0,oa.useContext)(ft);return e!=null&&e.Link?e.Link:({to:t,...r})=>oa.default.createElement("a",{href:t,...r})},Pl=w("react"),tn=M(w("react")),$e={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},El=tn.default.createContext($e),hr=El,bl=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o})=>tn.default.createElement(hr.Provider,{value:{useHistory:t!=null?t:$e.useHistory,useLocation:r!=null?r:$e.useLocation,useParams:a!=null?a:$e.useParams,Prompt:n!=null?n:$e.Prompt,Link:l!=null?l:$e.Link,routes:o!=null?o:$e.routes}},e),re=()=>{let e=(0,Pl.useContext)(hr),{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o}=e!=null?e:$e;return{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:l,routes:o}},Cl=w("@tanstack/react-query"),wl=w("react"),rn=M(w("react")),$t=rn.default.createContext({}),Ll=({can:e,children:t})=>rn.default.createElement($t.Provider,{value:{can:e}},t),ql=e=>{let{icon:t,list:r,edit:a,create:n,show:l,clone:o,children:s,meta:p,options:d,...m}=e,{icon:v,...E}=p!=null?p:{},{icon:c,...f}=d!=null?d:{};return{...m,...p?{meta:E}:{},...d?{options:f}:{}}},an=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:n}=(0,wl.useContext)($t),{resource:l,...o}=r!=null?r:{},s=ql(l!=null?l:{}),p=(0,Cl.useQuery)(["useCan",{action:e,resource:t,params:{...o,resource:s},enabled:a==null?void 0:a.enabled}],()=>{var d;return(d=n==null?void 0:n({action:e,resource:t,params:o}))!=null?d:Promise.resolve({can:!0})},{enabled:typeof n<"u",...a,retry:!1});return typeof n>"u"?{data:{can:!0}}:p},Dl=w("react"),Sl=()=>{let{can:e}=(0,Dl.useContext)($t);return{can:e}},Ve=w("react"),xl=M(w("lodash/uniqBy")),Ml=M(w("lodash/debounce")),wt=M(w("lodash/get")),Nl=e=>{var t,r,a;let[n,l]=(0,Ve.useState)([]),[o,s]=(0,Ve.useState)([]),[p,d]=(0,Ve.useState)([]),{resource:m,sort:v,sorters:E,filters:c=[],optionLabel:f="title",optionValue:u="id",debounce:i=300,successNotification:g,errorNotification:b,defaultValueQueryOptions:y,queryOptions:C,fetchSize:P,pagination:h,hasPagination:L=!1,liveMode:D,defaultValue:S=[],onLiveEvent:x,onSearch:A,liveParams:Q,meta:O,metaData:k,dataProviderName:T}=e,{resources:N}=U(),$=j(m,N),R=(t=$==null?void 0:$.name)!=null?t:m,_=Array.isArray(S)?S:[S],ae=(0,Ve.useCallback)(J=>{d(J.data.map(te=>({label:(0,wt.default)(te,f),value:(0,wt.default)(te,u)})))},[f,u]),V=y!=null?y:C,H=Ta({resource:R,ids:_,queryOptions:{...V,enabled:_.length>0&&((r=y==null?void 0:y.enabled)!=null?r:!0),onSuccess:J=>{var te;ae(J),(te=V==null?void 0:V.onSuccess)==null||te.call(V,J)}},meta:q(O,k),metaData:q(O,k),liveMode:"off",dataProviderName:T}),oe=(0,Ve.useCallback)(J=>{s(J.data.map(te=>({label:(0,wt.default)(te,f),value:(0,wt.default)(te,u)})))},[f,u]),Le=dr({resource:R,sorters:q(E,v),filters:c.concat(n),pagination:{current:h==null?void 0:h.current,pageSize:(a=h==null?void 0:h.pageSize)!=null?a:P,mode:h==null?void 0:h.mode},hasPagination:L,queryOptions:{...C,onSuccess:J=>{var te;oe(J),(te=C==null?void 0:C.onSuccess)==null||te.call(C,J)}},successNotification:g,errorNotification:b,meta:q(O,k),metaData:q(O,k),liveMode:D,liveParams:Q,onLiveEvent:x,dataProviderName:T}),Qe=J=>{if(A){l(A(J));return}if(J)l([{field:f,operator:"contains",value:J}]);else{l([]);return}};return{queryResult:Le,defaultValueQueryResult:H,options:(0,Ve.useMemo)(()=>(0,xl.default)([...o,...p],"value"),[o,p]),onSearch:(0,Ml.default)(Qe,i)}},He=M(w("react")),la=M(w("qs")),Lt=M(w("lodash/differenceWith")),qt=M(w("lodash/isEqual")),kl=M(w("warn-once")),ia=[],ua=[];function Al({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:n,permanentSorter:l=ua,defaultSetFilterBehavior:o,initialFilter:s,permanentFilter:p=ia,filters:d,sorters:m,syncWithLocation:v,resource:E,successNotification:c,errorNotification:f,queryOptions:u,liveMode:i,onLiveEvent:g,liveParams:b,meta:y,metaData:C,dataProviderName:P}={}){var h,L,D,S,x,A,Q,O,k,T;let{syncWithLocation:N}=Ja(),$=v!=null?v:N,R=Wa(i),_=Z(),{useLocation:ae}=re(),{search:V,pathname:H}=ae(),oe=me(),Le=r===!1?"off":"server",Qe=((h=a==null?void 0:a.mode)!=null?h:Le)!=="off",J=q(a==null?void 0:a.current,e),te=q(a==null?void 0:a.pageSize,t),at=q(y,C),{parsedCurrent:Qt,parsedPageSize:gt,parsedSorter:nt,parsedFilters:ot}=ir(V!=null?V:"?"),yt=q(d==null?void 0:d.initial,s),qe=(L=q(d==null?void 0:d.permanent,p))!=null?L:ia,lt=q(m==null?void 0:m.initial,n),ke=(D=q(m==null?void 0:m.permanent,l))!=null?D:ua,Ft=(S=q(d==null?void 0:d.defaultBehavior,o))!=null?S:"merge",Fe,Ae,B,le;$?(Fe=((x=oe==null?void 0:oe.params)==null?void 0:x.current)||Qt||J||1,Ae=((A=oe==null?void 0:oe.params)==null?void 0:A.pageSize)||gt||te||10,B=((Q=oe==null?void 0:oe.params)==null?void 0:Q.sorters)||(nt.length?nt:lt),le=((O=oe==null?void 0:oe.params)==null?void 0:O.filters)||(ot.length?ot:yt)):(Fe=J||1,Ae=te||10,B=lt,le=yt);let{replace:De}=be(),Ie=Ee(),{resource:Ce}=U(E),Se=Ce==null?void 0:Ce.name;He.default.useEffect(()=>{(0,kl.default)(typeof Se>"u","useTable: `resource` is not defined.")},[Se]);let[ie,xe]=(0,He.useState)(tr(ke,B!=null?B:[])),[Ue,ht]=(0,He.useState)(er(qe,le!=null?le:[])),[it,Pr]=(0,He.useState)(Fe),[We,Er]=(0,He.useState)(Ae),mn=({pagination:{current:Y,pageSize:ge},sorter:Pt,filters:Et})=>{var bt;if(_==="new")return(bt=Ie({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...Qe?{current:Y,pageSize:ge}:{},sorters:Pt,filters:Et,...br()}}))!=null?bt:"";{let ut=la.default.parse(V==null?void 0:V.substring(1)),Lr=Jt({pagination:{pageSize:ge,current:Y},sorters:ie!=null?ie:Pt,filters:Et,...ut});return`${H!=null?H:""}?${Lr!=null?Lr:""}`}};(0,He.useEffect)(()=>{V===""&&(Pr(Fe),Er(Ae),xe(tr(ke,B!=null?B:[])),ht(er(qe,le!=null?le:[])))},[V]);let br=()=>{var Y;if(_==="new"){let{sorters:ge,filters:Pt,pageSize:Et,current:bt,...ut}=(Y=oe==null?void 0:oe.params)!=null?Y:{};return ut}else{let{sorter:ge,filters:Pt,pageSize:Et,current:bt,...ut}=la.default.parse(V,{ignoreQueryPrefix:!0});return ut}};(0,He.useEffect)(()=>{if($){let Y=br();if(_==="new")Ie({type:"replace",options:{keepQuery:!0},query:{...Qe?{pageSize:We,current:it}:{},sorters:(0,Lt.default)(ie,ke,qt.default),filters:(0,Lt.default)(Ue,qe,qt.default)}});else{let ge=Jt({...Qe?{pagination:{pageSize:We,current:it}}:{},sorters:(0,Lt.default)(ie,ke,qt.default),filters:(0,Lt.default)(Ue,qe,qt.default),...Y});return De==null?void 0:De(`${H}?${ge}`,void 0,{shallow:!0})}}},[$,it,We,ie,Ue]);let Cr=dr({resource:Se,hasPagination:r,pagination:{current:it,pageSize:We,mode:a==null?void 0:a.mode},filters:st(qe,Ue),sorters:Xt(ke,ie),queryOptions:u,successNotification:c,errorNotification:f,meta:at,metaData:at,liveMode:R,liveParams:b,onLiveEvent:g,dataProviderName:P}),pn=Y=>{ht(ge=>st(qe,Y,ge))},gn=Y=>{ht(st(qe,Y))},yn=Y=>{ht(ge=>st(qe,Y(ge)))},hn=(Y,ge=Ft)=>{typeof Y=="function"?yn(Y):ge==="replace"?gn(Y):pn(Y)},wr=Y=>{xe(()=>Xt(ke,Y))};return{tableQueryResult:Cr,sorters:ie,setSorters:wr,sorter:ie,setSorter:wr,filters:Ue,setFilters:hn,current:it,setCurrent:Pr,pageSize:We,setPageSize:Er,pageCount:We?Math.ceil(((T=(k=Cr.data)==null?void 0:k.total)!=null?T:0)/We):1,createLinkForSyncWithLocation:mn}}var sa=w("react"),Vt=w("@tanstack/react-query"),nn=M(w("react")),Ot=nn.default.createContext({}),$l=({create:e,get:t,update:r,children:a})=>nn.default.createElement(Ot.Provider,{value:{create:e,get:t,update:r}},a),je=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Vt.useQueryClient)(),a=(0,sa.useContext)(Ot),n=ee(),{resources:l}=(0,sa.useContext)(vt),{data:o,refetch:s,isLoading:p}=ya({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy),queryOptions:{enabled:!!a}}),d=(0,Vt.useMutation)(async v=>{var E,c,f,u,i;let g=j(v.resource,l),b=q((E=g==null?void 0:g.meta)==null?void 0:E.audit,(c=g==null?void 0:g.options)==null?void 0:c.audit,(u=(f=g==null?void 0:g.options)==null?void 0:f.auditLog)==null?void 0:u.permissions);if(b&&!Xn(b,v.action))return;let y;return p&&(y=await s()),await((i=a.create)==null?void 0:i.call(a,{...v,author:o!=null?o:y==null?void 0:y.data}))},e),m=(0,Vt.useMutation)(async v=>{var E;return await((E=a.update)==null?void 0:E.call(a,v))},{onSuccess:v=>{if(v!=null&&v.resource){let E=Pe(v==null?void 0:v.resource);r.invalidateQueries(E.logList())}},...t});return{log:d,rename:m}},Ol=w("react"),Tl=w("@tanstack/react-query"),Rl=({resource:e,action:t,meta:r,author:a,metaData:n,queryOptions:l})=>{let{get:o}=(0,Ol.useContext)(Ot),s=Pe(e,void 0,n);return(0,Tl.useQuery)(s.logList(r),()=>{var p;return(p=o==null?void 0:o({resource:e,action:t,author:a,meta:r,metaData:n}))!=null?p:Promise.resolve([])},{enabled:typeof o<"u",...l,retry:!1})},Ql=w("react"),Fl=w("@tanstack/react-query"),_e=()=>{let{resources:e}=U(),t=(0,Fl.useQueryClient)();return(0,Ql.useCallback)(({resource:r,dataProviderName:a,invalidates:n,id:l})=>{if(n===!1)return;let o=Pe(r,F(r,a,e));n.forEach(s=>{switch(s){case"all":t.invalidateQueries(o.all);break;case"list":t.invalidateQueries(o.list());break;case"many":t.invalidateQueries(o.many());break;case"resourceAll":t.invalidateQueries(o.resourceAll);break;case"detail":t.invalidateQueries(o.detail(l||""));break;default:break}})},[])},Il=w("react"),Ul=M(w("warn-once")),Wl=({meta:e={}}={})=>{let t=Z(),{i18nProvider:r}=(0,Il.useContext)(tt),a=me(),n=K(),{resources:l,resource:o,action:s}=U(),p=[];if(!(o!=null&&o.name))return{breadcrumbs:p};let d=m=>{var v,E,c,f,u,i,g,b;let y=typeof m=="string"?(v=j(m,l,t==="legacy"))!=null?v:{name:m}:m;if(y){let C=q((E=y==null?void 0:y.meta)==null?void 0:E.parent,y==null?void 0:y.parentName);C&&d(C);let P=ce(y,l,t==="legacy").find(D=>D.action==="list"),h=(c=P==null?void 0:P.resource)!=null&&c.list?P==null?void 0:P.route:void 0,L=h?t==="legacy"?h:ye(h,a,e):void 0;p.push({label:(i=q((f=y.meta)==null?void 0:f.label,(u=y.options)==null?void 0:u.label))!=null?i:n(`${y.name}.${y.name}`,Dt(y.name)),href:L,icon:q((g=y.meta)==null?void 0:g.icon,(b=y.options)==null?void 0:b.icon,y.icon)})}};if(d(o),s&&s!=="list"){let m=`actions.${s}`,v=n(m);typeof r<"u"&&v===m?((0,Ul.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${s}" action. Please add "actions.${s}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),p.push({label:n(`buttons.${s}`,Dt(s))})):p.push({label:n(m,Dt(s))})}return{breadcrumbs:p}},Zt=M(w("react")),xt=(e,t,r=!1)=>{let a=[],n=Oe(e,t);for(;n;)a.push(n),n=Oe(n,t);return a.reverse(),`/${[...a,e].map(l=>{var o,s;return Ne((s=(o=r?l.route:void 0)!=null?o:l.identifier)!=null?s:l.name)}).join("/").replace(/^\//,"")}`},zl=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{var l,o;let s=[],p=Oe(n,e);for(;p;)s.push(p),p=Oe(p,e);s.reverse();let d=r;s.forEach(v=>{var E,c;let f=(c=(E=t?v.route:void 0)!=null?E:v.identifier)!=null?c:v.name;d.children[f]||(d.children[f]={item:v,children:{}}),d=d.children[f]});let m=(o=(l=t?n.route:void 0)!=null?l:n.identifier)!=null?o:n.name;d.children[m]||(d.children[m]={item:n,children:{}})});let a=n=>{let l=[];return Object.keys(n.children).forEach(o=>{let s=xt(n.children[o].item,e,t),p={...n.children[o].item,key:s,children:a(n.children[o])};l.push(p)}),l};return a(r)},da=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),Hl=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=K(),a=yr(),n=Z(),{resource:l,resources:o}=U(),{pathname:s}=me(),{useLocation:p}=re(),{pathname:d}=p(),m=n==="legacy"?da(d):s?da(s):void 0,v=`/${(m!=null?m:"").replace(/^\//,"")}`,E=l?xt(l,o,n==="legacy"):v!=null?v:"",c=Zt.default.useMemo(()=>{if(!l)return[];let i=Oe(l,o),g=[xt(l,o)];for(;i;)g.push(xt(i,o)),i=Oe(i,o);return g},[]),f=Zt.default.useCallback(i=>{var g,b,y,C,P,h,L,D;if(((y=(g=i==null?void 0:i.meta)==null?void 0:g.hide)!=null?y:(b=i==null?void 0:i.options)==null?void 0:b.hide)||!(i!=null&&i.list)&&i.children.length===0)return;let S=i.list?a({resource:i,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&S&&S.match(/(\/|^):(.+?)(\/|$){1}/)))return{...i,route:S,icon:q((C=i.meta)==null?void 0:C.icon,(P=i.options)==null?void 0:P.icon,i.icon),label:(D=q((h=i==null?void 0:i.meta)==null?void 0:h.label,(L=i==null?void 0:i.options)==null?void 0:L.label))!=null?D:r(`${i.name}.${i.name}`,ur(i.name,"plural"))}},[n,e,r,t]),u=Zt.default.useMemo(()=>{let i=zl(o,n==="legacy"),g=b=>b.flatMap(y=>{let C=g(y.children),P=f({...y,children:C});return P?[P]:[]});return g(i)},[o,n,f]);return{defaultOpenKeys:c,selectedKey:E,menuItems:u}},Bl=()=>{let[e,t]=(0,ze.useState)(),r=K(),{push:a}=be(),n=Ee(),l=Z(),{resource:o,action:s}=U();return(0,ze.useEffect)(()=>{o&&s&&t(r("pages.error.info",{action:s,resource:o==null?void 0:o.name},`You may have forgotten to add the "${s}" component to "${o==null?void 0:o.name}" resource.`))},[o,s]),ze.default.createElement(ze.default.Fragment,null,ze.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&ze.default.createElement("p",null,e),ze.default.createElement("button",{onClick:()=>{l==="legacy"?a("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},X=M(w("react")),on=()=>{let[e,t]=(0,X.useState)(""),[r,a]=(0,X.useState)(""),n=K(),l=ee(),{mutate:o}=nr({v3LegacyAuthProviderCompatible:Boolean(l==null?void 0:l.isLegacy)});return X.default.createElement(X.default.Fragment,null,X.default.createElement("h1",null,n("pages.login.title","Sign in your account")),X.default.createElement("form",{onSubmit:s=>{s.preventDefault(),o({username:e,password:r})}},X.default.createElement("table",null,X.default.createElement("tbody",null,X.default.createElement("tr",null,X.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:s=>t(s.target.value)}))),X.default.createElement("tr",null,X.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:s=>a(s.target.value)}))))),X.default.createElement("br",null),X.default.createElement("input",{type:"submit",value:"login"})))},Ze=M(w("react")),W=M(w("react")),Kl=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:n,wrapperProps:l,renderContent:o,formProps:s,title:p=void 0})=>{let d=Z(),m=At(),{Link:v}=re(),E=d==="legacy"?v:m,[c,f]=(0,W.useState)(""),[u,i]=(0,W.useState)(""),[g,b]=(0,W.useState)(!1),y=K(),C=ee(),{mutate:P}=nr({v3LegacyAuthProviderCompatible:Boolean(C==null?void 0:C.isLegacy)}),h=(S,x)=>S?typeof S=="string"?W.default.createElement(E,{to:S},x):S:null,L=()=>e?e.map(S=>{var x;return W.default.createElement("div",{key:S.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},W.default.createElement("button",{onClick:()=>P({providerName:S.name}),style:{display:"flex",alignItems:"center"}},S==null?void 0:S.icon,(x=S.label)!=null?x:W.default.createElement("label",null,S.label)))}):null,D=W.default.createElement("div",{...n},W.default.createElement("h1",{style:{textAlign:"center"}},y("pages.login.title","Sign in to your account")),L(),W.default.createElement("hr",null),W.default.createElement("form",{onSubmit:S=>{S.preventDefault(),P({email:c,password:u,remember:g})},...s},W.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},W.default.createElement("label",null,y("pages.login.fields.email","Email")),W.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:S=>f(S.target.value)}),W.default.createElement("label",null,y("pages.login.fields.password","Password")),W.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:u,onChange:S=>i(S.target.value)}),a!=null?a:W.default.createElement(W.default.Fragment,null,W.default.createElement("label",null,y("pages.login.buttons.rememberMe","Remember me"),W.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:g,value:g.toString(),onChange:()=>{b(!g)}}))),W.default.createElement("br",null),r!=null?r:h("/forgot-password",y("pages.login.buttons.forgotPassword","Forgot password?")),W.default.createElement("input",{type:"submit",value:y("pages.login.signin","Sign in")}),t!=null?t:W.default.createElement("span",null,y("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",h("/register",y("pages.login.register","Sign up"))))));return W.default.createElement("div",{...l},o?o(D,p):D)},G=M(w("react")),jl=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:n,formProps:l,title:o=void 0})=>{let s=Z(),p=At(),{Link:d}=re(),m=s==="legacy"?d:p,[v,E]=(0,G.useState)(""),[c,f]=(0,G.useState)(""),u=K(),i=ee(),{mutate:g,isLoading:b}=ha({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),y=(h,L)=>h?typeof h=="string"?G.default.createElement(m,{to:h},L):h:null,C=()=>e?e.map(h=>{var L;return G.default.createElement("div",{key:h.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},G.default.createElement("button",{onClick:()=>g({providerName:h.name}),style:{display:"flex",alignItems:"center"}},h==null?void 0:h.icon,(L=h.label)!=null?L:G.default.createElement("label",null,h.label)))}):null,P=G.default.createElement("div",{...a},G.default.createElement("h1",{style:{textAlign:"center"}},u("pages.register.title","Sign up for your account")),C(),G.default.createElement("hr",null),G.default.createElement("form",{onSubmit:h=>{h.preventDefault(),g({email:v,password:c})},...l},G.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},G.default.createElement("label",null,u("pages.register.fields.email","Email")),G.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:h=>E(h.target.value)}),G.default.createElement("label",null,u("pages.register.fields.password","Password")),G.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:c,onChange:h=>f(h.target.value)}),G.default.createElement("input",{type:"submit",value:u("pages.register.buttons.submit","Sign up"),disabled:b}),t!=null?t:G.default.createElement(G.default.Fragment,null,G.default.createElement("span",null,u("pages.login.buttons.haveAccount","Have an account?")," ",y("/login",u("pages.login.signin","Sign in")))))));return G.default.createElement("div",{...r},n?n(P,o):P)},se=M(w("react")),_l=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:n,title:l=void 0})=>{let o=K(),s=Z(),p=At(),{Link:d}=re(),m=s==="legacy"?d:p,[v,E]=(0,se.useState)(""),{mutate:c,isLoading:f}=Pa(),u=(g,b)=>g?typeof g=="string"?se.default.createElement(m,{to:g},b):g:null,i=se.default.createElement("div",{...r},se.default.createElement("h1",{style:{textAlign:"center"}},o("pages.forgotPassword.title","Forgot your password?")),se.default.createElement("hr",null),se.default.createElement("form",{onSubmit:g=>{g.preventDefault(),c({email:v})},...n},se.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},se.default.createElement("label",null,o("pages.forgotPassword.fields.email","Email")),se.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:g=>E(g.target.value)}),se.default.createElement("input",{type:"submit",disabled:f,value:o("pages.forgotPassword.buttons.submit","Send reset instructions")}),se.default.createElement("br",null),e!=null?e:se.default.createElement("span",null,o("pages.register.buttons.haveAccount","Have an account? ")," ",u("/login",o("pages.login.signin","Sign in"))))));return se.default.createElement("div",{...t},a?a(i,l):i)},de=M(w("react")),Vl=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a,title:n=void 0})=>{let l=K(),o=ee(),{mutate:s,isLoading:p}=Ea({v3LegacyAuthProviderCompatible:Boolean(o==null?void 0:o.isLegacy)}),[d,m]=(0,de.useState)(""),[v,E]=(0,de.useState)(""),c=de.default.createElement("div",{...t},de.default.createElement("h1",{style:{textAlign:"center"}},l("pages.updatePassword.title","Update Password")),de.default.createElement("hr",null),de.default.createElement("form",{onSubmit:f=>{f.preventDefault(),s({password:d,confirmPassword:v})},...a},de.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},de.default.createElement("label",null,l("pages.updatePassword.fields.password","New Password")),de.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:d,onChange:f=>m(f.target.value)}),de.default.createElement("label",null,l("pages.updatePassword.fields.confirmPassword","Confirm New Password")),de.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:v,onChange:f=>E(f.target.value)}),de.default.createElement("input",{type:"submit",disabled:p,value:l("pages.updatePassword.buttons.submit","Update")}))));return de.default.createElement("div",{...e},r?r(c,n):c)},Zl=e=>{let{type:t}=e;return Ze.default.createElement(Ze.default.Fragment,null,(()=>{switch(t){case"register":return Ze.default.createElement(jl,{...e});case"forgotPassword":return Ze.default.createElement(_l,{...e});case"updatePassword":return Ze.default.createElement(Vl,{...e});default:return Ze.default.createElement(Kl,{...e})}})())},ue=M(w("react")),ln=()=>ue.default.createElement(ue.default.Fragment,null,ue.default.createElement("h1",null,"Welcome on board"),ue.default.createElement("p",null,"Your configuration is completed."),ue.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",ue.default.createElement("code",null,"`resources`")," property of ",ue.default.createElement("code",null,"`<Refine>`")),ue.default.createElement("div",{style:{display:"flex",gap:8}},ue.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ue.default.createElement("button",null,"Documentation")),ue.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ue.default.createElement("button",null,"Examples")),ue.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ue.default.createElement("button",null,"Community")))),I=M(w("react")),Yl=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:I.default.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I.default.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:I.default.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I.default.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),I.default.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:I.default.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),I.default.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:I.default.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I.default.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],Gl=()=>{let e=Fr("(max-width: 1010px)"),t=Fr("(max-width: 650px)"),r=()=>t?"1, 280px":e?"2, 280px":"4, 208px",a=()=>t?"32px":e?"40px":"48px",n=()=>t?"16px":e?"20px":"24px";return I.default.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},I.default.createElement("div",{style:{height:"89px"}}),I.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},I.default.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),I.default.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),I.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},I.default.createElement("h1",{style:{fontSize:a(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),I.default.createElement("h4",{style:{fontSize:n(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),I.default.createElement("div",{style:{height:"64px"}}),I.default.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},Yl.map(l=>I.default.createElement(Jl,{key:`welcome-page-${l.title}`,card:l}))),I.default.createElement("div",{style:{height:"64px"}}))},Jl=({card:e})=>{let{title:t,description:r,icon:a,link:n}=e,[l,o]=(0,I.useState)(!1);return I.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},I.default.createElement("div",{style:{display:"flex",alignItems:"center"}},I.default.createElement("a",{onPointerEnter:()=>o(!0),onPointerLeave:()=>o(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:n},a,I.default.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),I.default.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...l&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},I.default.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),I.default.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))},z=M(w("react")),Yt=w("@tanstack/react-query"),Xl=w("@tanstack/react-query-devtools"),ei=w("react"),Be=w("react"),ti="4.5.6",ri=()=>{let e=ba(),t=(0,Be.useContext)(Ot),r=(0,Be.useContext)(dt),a=(0,Be.useContext)(hr),n=(0,Be.useContext)(fr),{i18nProvider:l}=(0,Be.useContext)(tt),o=(0,Be.useContext)(mr),s=(0,Be.useContext)($t),{resources:p}=U(),d=!!t.create||!!t.get||!!t.update,m=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),v=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,E=!!n,c=!!(l!=null&&l.changeLocale)||!!(l!=null&&l.getLocale)||!!(l!=null&&l.translate),f=!!o.close||!!o.open,u=!!s.can;return{providers:{auth:e,auditLog:d,live:m,router:v,data:E,i18n:c,notification:f,accessControl:u},version:ti,resourceCount:p.length}},ai=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},ni=()=>{let e=ri();return(0,ei.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ai(e)}`},[]),null},oi=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},ca=M(w("react")),li=e=>{let t=ca.default.useRef(!1);ca.default.useEffect(()=>{t.current===!1&&e&&oi(e)&&(t.current=!0)},[e])},ii=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:n,notificationProvider:l,accessControlProvider:o,auditLogProvider:s,resources:p,DashboardPage:d,ReadyPage:m,LoginPage:v,catchAll:E,children:c,liveProvider:f,i18nProvider:u,Title:i,Layout:g,Sider:b,Header:y,Footer:C,OffLayoutArea:P,onLiveEvent:h,options:L})=>{let{optionsWithDefaults:D,disableTelemetryWithDefault:S,reactQueryWithDefaults:x}=uo({options:L}),A=Ha(()=>{var k;return x.clientConfig instanceof Yt.QueryClient?x.clientConfig:new Yt.QueryClient({...x.clientConfig,defaultOptions:{...x.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(k=x.clientConfig.defaultOptions)==null?void 0:k.queries}}})},[x.clientConfig]),Q=z.default.useMemo(()=>typeof l=="function"?l:()=>l!=null?l:{},[l])();if(li(n),a&&!n&&(p!=null?p:[]).length===0)return m?z.default.createElement(m,null):z.default.createElement(ln,null);let{RouterComponent:O=z.default.Fragment}=n?{}:a!=null?a:{};return z.default.createElement(Yt.QueryClientProvider,{client:A},z.default.createElement(Yo,{...Q},z.default.createElement(On,{...e!=null?e:{},isProvided:Boolean(e)},z.default.createElement(Tn,{...t!=null?t:{},isProvided:Boolean(t)},z.default.createElement(ko,{...r},z.default.createElement(To,{liveProvider:f},z.default.createElement(Ko,{value:a&&!n?"legacy":"new"},z.default.createElement(_o,{router:n},z.default.createElement(bl,{...a},z.default.createElement(Bo,{resources:p!=null?p:[]},z.default.createElement(Jo,{i18nProvider:u},z.default.createElement(Ll,{...o!=null?o:{}},z.default.createElement($l,{...s!=null?s:{}},z.default.createElement(yo,null,z.default.createElement(io,{mutationMode:D.mutationMode,warnWhenUnsavedChanges:D.warnWhenUnsavedChanges,syncWithLocation:D.syncWithLocation,Title:i,undoableTimeout:D.undoableTimeout,catchAll:E,DashboardPage:d,LoginPage:v,Layout:g,Sider:b,Footer:C,Header:y,OffLayoutArea:P,hasDashboard:!!d,liveMode:D.liveMode,onLiveEvent:h,options:D},z.default.createElement(rl,null,z.default.createElement(O,null,c,!S&&z.default.createElement(ni,null),z.default.createElement(sn,null))))))))))))))))),x.devtoolConfig===!1?null:z.default.createElement(Xl.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...x.devtoolConfig}))},va=w("react"),un=({notification:e})=>{let t=K(),{notificationDispatch:r}=et(),{open:a}=Re(),[n,l]=(0,va.useState)(),o=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Bt(e.seconds)},`You have ${Bt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Bt(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let s=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);l(s)}};return(0,va.useEffect)(()=>{o()},[e]),null},Mt=M(w("react")),ui=({children:e,Layout:t,Sider:r,Header:a,Title:n,Footer:l,OffLayoutArea:o})=>{let{Layout:s,Footer:p,Header:d,Sider:m,Title:v,OffLayoutArea:E}=gr(),c=t!=null?t:s;return Mt.default.createElement(c,{Sider:r!=null?r:m,Header:a!=null?a:d,Footer:l!=null?l:p,Title:n!=null?n:v,OffLayoutArea:o!=null?o:E},e,Mt.default.createElement(si,null))},si=()=>{let{Prompt:e}=re(),t=K(),{warnWhen:r,setWarnWhen:a}=pr(),n=l=>(l.preventDefault(),l.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),l.returnValue);return(0,Mt.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),Mt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},ve=M(w("react")),di=()=>{let e=Ee(),[t,r]=ve.default.useState(void 0);return ve.default.useEffect(()=>{t&&e(t)},[t]),ve.default.useCallback(a=>{t||r(a)},[t])};function ci({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:n}){var l;let o=ee(),s=Z(),p=Boolean(o==null?void 0:o.isProvided),d=Boolean(o==null?void 0:o.isLegacy),m=s==="legacy",v=me(),E=Ee(),c=di(),{replace:f}=be(),{useLocation:u}=re(),i=u(),{isLoading:g,isFetching:b,isSuccess:y,data:{authenticated:C,redirectTo:P}={},refetch:h}=or({v3LegacyAuthProviderCompatible:d});ve.default.useEffect(()=>{h()},[r,a]);let L=ve.default.useRef({status:g?"initial":"pending",content:n!=null?n:null});b?L.current.status="pending":b||(L.current.status="settled");let D=p?d?y:C:!0;if(L.current.status==="settled")if(D)L.current.content=ve.default.createElement(ve.default.Fragment,null,r!=null?r:null);else if(typeof a<"u")L.current.content=ve.default.createElement(ve.default.Fragment,null,a);else{let S=`${m?i==null?void 0:i.pathname:v.pathname}`.replace(/(\?.*|#.*)$/,""),x=d?typeof e=="string"?e:"/login":typeof e=="string"?e:P;if(x)if(m){let A=t?`?to=${encodeURIComponent(S)}`:"";f(`${x}${A}`)}else c({to:x,query:t?{to:(l=v.params)!=null&&l.to?v.params.to:E({to:S,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return p?ve.default.createElement(ve.default.Fragment,null,L.current.content):ve.default.createElement(ve.default.Fragment,null,r!=null?r:null)}var vi=w("react"),sn=()=>{let{useLocation:e}=re(),{checkAuth:t}=he(),r=e();return(0,vi.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},Ye=M(w("react")),fi=({resource:e,action:t,params:r,fallback:a,children:n,...l})=>{var o,s;let p=Z(),{resources:d}=U(),{useParams:m}=re(),{resource:v,id:E,action:c}=me(),{resource:f,id:u,action:i}=m(),g=v==null?void 0:v.name,b=!e||e===(p==="legacy"?f:g)?(o=r==null?void 0:r.id)!=null?o:p==="legacy"?u:E:r==null?void 0:r.id,y=e!=null?e:p==="legacy"?f:g,C,P=mt();if(p==="legacy")y&&(C=P(y));else if(e){let L=j(e,d);L?C=L:C={name:e,route:e}}else if(typeof v=="string"){let L=j(v,d);L?C=L:C={name:v,route:v}}else C=v;let{data:h}=an({resource:e!=null?e:C==null?void 0:C.name,action:(s=t!=null?t:p==="legacy"?i:c)!=null?s:"",params:r!=null?r:{id:b,resource:C}});return h!=null&&h.can?Ye.default.isValidElement(n)?Ye.default.cloneElement(n,l):Ye.default.createElement(Ye.default.Fragment,null,n):(h==null?void 0:h.can)===!1?Ye.default.createElement(Ye.default.Fragment,null,a!=null?a:null):null},Ge=M(w("react")),mi=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],pi=()=>((0,Ge.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),mi.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),Ge.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},Ge.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},Ge.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},Ge.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),Ge.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var pt=w("react"),fn=Dn(cn()),Rt=w("@tanstack/react-table");var Tt=w("react"),vn=()=>{let e=(0,Tt.useRef)(!0);return(0,Tt.useEffect)(()=>{e.current=!1},[]),e.current};function gi({refineCoreProps:{hasPagination:e=!0,...t}={},initialState:r={},...a}){var A,Q,O;let n=vn(),l=(0,fn.useTable)({...t,hasPagination:e}),o=e===!1?"off":"server",s=((Q=(A=t.pagination)==null?void 0:A.mode)!=null?Q:o)!=="off",{tableQueryResult:{data:p},current:d,setCurrent:m,pageSize:v,setPageSize:E,sorters:c,setSorters:f,filters:u,setFilters:i,pageCount:g}=l,b=[];u.forEach(k=>{k.operator!=="or"&&k.operator!=="and"&&"field"in k&&b.push(k)});let y=(0,Rt.useReactTable)({getCoreRowModel:(0,Rt.getCoreRowModel)(),data:(O=p==null?void 0:p.data)!=null?O:[],initialState:{pagination:{pageIndex:d-1,pageSize:v},sorting:c.map(k=>({id:k.field,desc:k.order==="desc"})),columnFilters:b.map(k=>({id:k.field,operator:k.operator,value:k.value})),...r},pageCount:g,manualPagination:!0,manualSorting:!0,manualFiltering:!0,...a}),{state:C,columns:P}=y.options,{pagination:h,sorting:L,columnFilters:D}=C,{pageIndex:S,pageSize:x}=h!=null?h:{};return(0,pt.useEffect)(()=>{S!==void 0&&m(S+1)},[S]),(0,pt.useEffect)(()=>{x!==void 0&&E(x)},[x]),(0,pt.useEffect)(()=>{L!==void 0&&(f(L==null?void 0:L.map(k=>({field:k.id,order:k.desc?"desc":"asc"}))),L.length>0&&s&&!n&&m(1))},[L]),(0,pt.useEffect)(()=>{let k=[];D==null||D.map(N=>{var R,_,ae;let $=(ae=N.operator)!=null?ae:(_=(R=P.find(V=>V.id===N.id))==null?void 0:R.meta)==null?void 0:_.filterOperator;k.push({field:N.id,operator:$!=null?$:Array.isArray(N.value)?"in":"eq",value:N.value})});let T=b.filter(N=>!k.some($=>N.field===$.field&&N.operator===$.operator));T==null||T.map(N=>{k.push({field:N.field,operator:N.operator,value:void 0})}),i(k),k.length>0&&s&&!n&&m(1)},[D]),{...y,refineCore:l}}})();
//# sourceMappingURL=index.js.map