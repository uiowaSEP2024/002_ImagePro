<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>dependencies.py &#8212; job_monitoring_app  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=12dfc556" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Trackerapi Modules" href="../../trackerapi/trackerapi_index.html" />
    <link rel="prev" title="users.py" href="services/users.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-job_monitoring_app.backend.app.dependencies">
<span id="dependencies-py"></span><h1>dependencies.py<a class="headerlink" href="#module-job_monitoring_app.backend.app.dependencies" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="job_monitoring_app.backend.app.dependencies.OAuth2HttpCookieBearer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">job_monitoring_app.backend.app.dependencies.</span></span><span class="sig-name descname"><span class="pre">OAuth2HttpCookieBearer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tokenUrl</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scheme_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scopes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_error</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#job_monitoring_app.backend.app.dependencies.OAuth2HttpCookieBearer" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OAuth2</span></code></p>
<p>Source: Adapted from FastAPI OAuth2PasswordBearer. Instead of getting authorization
string from request header, instead gets it from cookie’s “access_token” field.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="job_monitoring_app.backend.app.dependencies.get_current_admin">
<span class="sig-prename descclassname"><span class="pre">job_monitoring_app.backend.app.dependencies.</span></span><span class="sig-name descname"><span class="pre">get_current_admin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Depends(get_current_user_from_token)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="models/user.html#job_monitoring_app.backend.app.models.user.User" title="job_monitoring_app.backend.app.models.user.User"><span class="pre">User</span></a></span></span><a class="headerlink" href="#job_monitoring_app.backend.app.dependencies.get_current_admin" title="Link to this definition">¶</a></dt>
<dd><p>This function checks if the current user is an admin and returns the user if true.
If the user is not an admin, it raises an HTTPException with status code 401.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="job_monitoring_app.backend.app.dependencies.get_current_provider">
<span class="sig-prename descclassname"><span class="pre">job_monitoring_app.backend.app.dependencies.</span></span><span class="sig-name descname"><span class="pre">get_current_provider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Depends(get_current_user_from_token)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="models/user.html#job_monitoring_app.backend.app.models.user.User" title="job_monitoring_app.backend.app.models.user.User"><span class="pre">User</span></a></span></span><a class="headerlink" href="#job_monitoring_app.backend.app.dependencies.get_current_provider" title="Link to this definition">¶</a></dt>
<dd><p>This function checks if the current user is a provider and returns the user if true.
If the user is not a provider, it raises an HTTPException with status code 401.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="job_monitoring_app.backend.app.dependencies.get_current_user_from_token">
<span class="sig-prename descclassname"><span class="pre">job_monitoring_app.backend.app.dependencies.</span></span><span class="sig-name descname"><span class="pre">get_current_user_from_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(OAuth2HttpCookieBearer)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="models/user.html#job_monitoring_app.backend.app.models.user.User" title="job_monitoring_app.backend.app.models.user.User"><span class="pre">User</span></a></span></span><a class="headerlink" href="#job_monitoring_app.backend.app.dependencies.get_current_user_from_token" title="Link to this definition">¶</a></dt>
<dd><p>This function decodes a JWT token, validates it, and returns the associated user.
If the token is invalid or the user does not exist, it raises an HTTPException with status code 401.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="job_monitoring_app.backend.app.dependencies.get_db">
<span class="sig-prename descclassname"><span class="pre">job_monitoring_app.backend.app.dependencies.</span></span><span class="sig-name descname"><span class="pre">get_db</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#job_monitoring_app.backend.app.dependencies.get_db" title="Link to this definition">¶</a></dt>
<dd><p>Dependency to get a database session.
This function yields a database session and closes it after use.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="job_monitoring_app.backend.app.dependencies.get_user_from_api_key">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">job_monitoring_app.backend.app.dependencies.</span></span><span class="sig-name descname"><span class="pre">get_user_from_api_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key_header_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Security(APIKeyHeader)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#job_monitoring_app.backend.app.dependencies.get_user_from_api_key" title="Link to this definition">¶</a></dt>
<dd><p>This function validates an API key and returns the associated user.
If the API key is missing, invalid, or expired, it raises an HTTPException with status code 403.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">job_monitoring_app</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../job_mon_app_index.html">Job_Mon_App Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../internal_servers/internal_servers_index.html">Internal Servers Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sphinx/sphinx_index.html">Sphinx Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_tool/example_tool_index.html">Example Tool Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example_tool_light/example_tool_light_index.html">Example Tool Light Modules</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../job_mon_app_index.html">Job_Mon_App Modules</a><ul>
  <li><a href="../backend_index.html">Backend Modules</a><ul>
  <li><a href="app_index.html">App Modules</a><ul>
      <li>Previous: <a href="services/users.html" title="previous chapter">users.py</a></li>
      <li>Next: <a href="../../trackerapi/trackerapi_index.html" title="next chapter">Trackerapi Modules</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Zach Morris, Ivan Johnson, Audrey Powers, Michal Brzus.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../_sources/job_monitoring_app/backend/app/dependencies.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>