var Ma=Object.create;var fr=Object.defineProperty;var Ia=Object.getOwnPropertyDescriptor;var Ua=Object.getOwnPropertyNames;var wa=Object.getPrototypeOf,Aa=Object.prototype.hasOwnProperty;var Sa=(e,t)=>{for(var r in t)fr(e,r,{get:t[r],enumerable:!0})},ln=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ua(t))!Aa.call(e,n)&&n!==r&&fr(e,n,{get:()=>t[n],enumerable:!(o=Ia(t,n))||o.enumerable});return e};var U=(e,t,r)=>(r=e!=null?Ma(wa(e)):{},ln(t||!e||!e.__esModule?fr(r,"default",{value:e,enumerable:!0}):r,e)),ka=e=>ln(fr({},"__esModule",{value:!0}),e);var ri={};Sa(ri,{AuthPage:()=>ma,Authenticated:()=>ba,CanAccess:()=>Da,ErrorComponent:()=>ua,GitHubBanner:()=>La,LayoutWrapper:()=>ha,LoginPage:()=>hr,ReadyPage:()=>qr,Refine:()=>Ca,ResourceContext:()=>Ge,RouteChangeHandler:()=>eo,UndoableQueue:()=>ko,WelcomePage:()=>fa,createTreeView:()=>Mo,file2Base64:()=>Sn,getDefaultFilter:()=>An,getDefaultSortOrder:()=>wn,getNextPageParam:()=>_t,getPreviousPageParam:()=>Zt,handleUseParams:()=>bo,importCSVMapper:()=>Ot,legacyResourceTransform:()=>Yt,matchResourceFromRoute:()=>Cr,parseTableParams:()=>Kt,parseTableParamsFromQuery:()=>Mn,pickNotDeprecated:()=>h,routeGenerator:()=>jt,setInitialFilters:()=>$t,setInitialSorters:()=>Gt,stringifyTableParams:()=>Ht,unionFilters:()=>ut,unionSorters:()=>Wt,useActiveAuthProvider:()=>W,useApiUrl:()=>Zn,useAuthenticated:()=>bn,useBack:()=>Zr,useBreadcrumb:()=>Za,useCan:()=>Jo,useCanWithoutCache:()=>Ga,useCancelNotification:()=>ke,useCheckError:()=>vn,useCreate:()=>Lt,useCreateMany:()=>Ar,useCustom:()=>Jn,useCustomMutation:()=>qn,useDataProvider:()=>j,useDelete:()=>Wn,useDeleteMany:()=>_n,useExport:()=>Fa,useForgotPassword:()=>Rr,useForm:()=>Oa,useGetIdentity:()=>yr,useGetLocale:()=>vs,useGetToPath:()=>wt,useGo:()=>ne,useHandleNotification:()=>q,useImport:()=>Ha,useInfiniteList:()=>rs,useInvalidate:()=>De,useIsAuthenticated:()=>Nt,useIsExistAuthentication:()=>xr,useLink:()=>rt,useList:()=>bt,useLiveMode:()=>Ko,useLog:()=>ve,useLogList:()=>_a,useLogin:()=>ht,useLogout:()=>Vt,useMany:()=>Er,useMenu:()=>ia,useModal:()=>Wa,useMutationMode:()=>Le,useNavigation:()=>oe,useNotification:()=>ye,useOnError:()=>J,useOne:()=>vt,useParse:()=>Or,useParsed:()=>Z,usePermissions:()=>Rn,usePublish:()=>be,useRedirectionAfterSubmission:()=>_o,useRefineContext:()=>It,useRegister:()=>gr,useResource:()=>Q,useResourceSubscription:()=>We,useResourceWithRoute:()=>je,useRouterContext:()=>z,useRouterType:()=>K,useSelect:()=>za,useSetLocale:()=>bs,useShow:()=>Ka,useSubscription:()=>Na,useSyncWithLocation:()=>zr,useTable:()=>ja,useTitle:()=>Is,useToPath:()=>Fs,useTranslate:()=>V,useUpdate:()=>Ur,useUpdateMany:()=>zn,useUpdatePassword:()=>Tr,useWarnAboutChange:()=>Mt,userFriendlyResourceName:()=>pt});module.exports=ka(ri);var Fe=U(require("react"));var it=U(require("react"));var mn=it.default.createContext({}),fn=({children:e,isProvided:t,...r})=>{let{replace:o}=oe(),n=async f=>{var l;try{return await((l=r.login)==null?void 0:l.call(r,f))}catch(y){return Promise.reject(y)}},a=async f=>{var l;try{return await((l=r.register)==null?void 0:l.call(r,f))}catch(y){return Promise.reject(y)}},s=async f=>{var l;try{return await((l=r.logout)==null?void 0:l.call(r,f))}catch(y){return Promise.reject(y)}},i=async f=>{var l;try{return await((l=r.checkAuth)==null?void 0:l.call(r,f)),Promise.resolve()}catch(y){return y!=null&&y.redirectPath&&o(y.redirectPath),Promise.reject(y)}};return it.default.createElement(mn.Provider,{value:{...r,login:n,logout:s,checkAuth:i,register:a,isProvided:t}},e)},yn=it.default.createContext({}),gn=({children:e,isProvided:t,...r})=>{let o=async l=>{var y;try{return await((y=r.login)==null?void 0:y.call(r,l))}catch(p){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",p),Promise.reject(p)}},n=async l=>{var y;try{return await((y=r.register)==null?void 0:y.call(r,l))}catch(p){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",p),Promise.reject(p)}},a=async l=>{var y;try{return await((y=r.logout)==null?void 0:y.call(r,l))}catch(p){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",p),Promise.reject(p)}},s=async l=>{var y;try{let p=await((y=r.check)==null?void 0:y.call(r,l));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",p),Promise.reject(p)}},i=async l=>{var y;try{let p=await((y=r.forgotPassword)==null?void 0:y.call(r,l));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",p),Promise.reject(p)}},f=async l=>{var y;try{let p=await((y=r.updatePassword)==null?void 0:y.call(r,l));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",p),Promise.reject(p)}};return it.default.createElement(yn.Provider,{value:{...r,login:o,logout:a,check:s,register:n,forgotPassword:i,updatePassword:f,isProvided:t}},e)},re=()=>it.default.useContext(mn),se=()=>it.default.useContext(yn);var so=require("@tanstack/react-query");function Rn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=re(),{getPermissions:o}=se(),n=(0,so.useQuery)(["usePermissions"],o!=null?o:()=>Promise.resolve(void 0),{enabled:!e&&!!o,...e?{}:t}),a=(0,so.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve(void 0),{enabled:e&&!!r,...e?t:{}});return e?a:n}var ao=require("@tanstack/react-query");function yr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=re(),{getIdentity:o}=se(),n=(0,ao.useQuery)(["getUserIdentity"],o!=null?o:()=>Promise.resolve({}),{enabled:!e&&!!o,retry:!1,...e===!0?{}:t}),a=(0,ao.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r!=null?r:()=>Promise.resolve({}),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?a:n}var uo=require("@tanstack/react-query");var Tn=require("@tanstack/react-query"),Ct=()=>{let e=(0,Tn.useQueryClient)();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function Vt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),o=K(),n=ne(),{push:a}=oe(),{open:s,close:i}=ye(),{logout:f}=re(),{logout:l}=se(),y=(0,uo.useMutation)(["useLogout"],l,{onSuccess:async(R,P)=>{let{success:L,error:T,redirectTo:u}=R,{redirectPath:m}=P!=null?P:{},x=m!=null?m:u;L&&(i==null||i("useLogout-error")),(T||!L)&&(s==null||s(io(T))),await r(),x!==!1&&(o==="legacy"?a(x!=null?x:"/login"):x&&n({to:x}))},onError:R=>{s==null||s(io(R))},...e===!0?{}:t}),p=(0,uo.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],f,{onSuccess:async(R,P)=>{var T;let L=(T=P==null?void 0:P.redirectPath)!=null?T:R;if(await r(),L!==!1){if(L){o==="legacy"?a(L):n({to:L});return}o==="legacy"?a("/login"):n({to:"/login"})}},onError:R=>{s==null||s(io(R))},...e?t:{}});return e?p:y}var io=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"});var xn=U(require("react")),co=require("@tanstack/react-query"),Pn=U(require("qs"));function ht({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),o=K(),n=ne(),{replace:a}=oe(),s=Z(),{useLocation:i}=z(),{search:f}=i(),{close:l,open:y}=ye(),{login:p}=re(),{login:R}=se(),P=xn.default.useMemo(()=>{var u;return o==="legacy"?Pn.default.parse(f,{ignoreQueryPrefix:!0}).to:(u=s.params)==null?void 0:u.to},[o,s.params,f]),L=(0,co.useMutation)(["useLogin"],R,{onSuccess:async({success:u,redirectTo:m,error:x})=>{u&&(l==null||l("login-error")),(x||!u)&&(y==null||y(po(x))),await r(),P&&u?o==="legacy"?a(P):n({to:P,type:"replace"}):m?o==="legacy"?a(m):n({to:m,type:"replace"}):o==="legacy"&&a("/")},onError:u=>{y==null||y(po(u))},...e===!0?{}:t}),T=(0,co.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],p,{onSuccess:async u=>{await r(),P&&a(P),u!==!1&&!P&&(typeof u=="string"?o==="legacy"?a(u):n({to:u,type:"replace"}):o==="legacy"?a("/"):n({to:"/",type:"replace"})),l==null||l("login-error")},onError:u=>{y==null||y(po(u))},...e?t:{}});return e?T:L}var po=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"});var mo=require("@tanstack/react-query");function gr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),o=K(),n=ne(),{replace:a}=oe(),{register:s}=re(),{register:i}=se(),{close:f,open:l}=ye(),y=(0,mo.useMutation)(["useRegister"],i,{onSuccess:async({success:R,redirectTo:P,error:L})=>{R&&(f==null||f("register-error")),(L||!R)&&(l==null||l(lo(L))),await r(),P?o==="legacy"?a(P):n({to:P,type:"replace"}):o==="legacy"&&a("/")},onError:R=>{l==null||l(lo(R))},...e===!0?{}:t}),p=(0,mo.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],s,{onSuccess:async R=>{await r(),R!==!1&&(R?o==="legacy"?a(R):n({to:R,type:"replace"}):o==="legacy"?a("/"):n({to:"/",type:"replace"}),f==null||f("register-error"))},onError:R=>{l==null||l(lo(R))},...e?t:{}});return e?p:y}var lo=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"});var yo=require("@tanstack/react-query");function Rr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=K(),o=ne(),{replace:n}=oe(),{forgotPassword:a}=re(),{forgotPassword:s}=se(),{close:i,open:f}=ye(),l=(0,yo.useMutation)(["useForgotPassword"],s,{onSuccess:({success:p,redirectTo:R,error:P})=>{p&&(i==null||i("forgot-password-error")),(P||!p)&&(f==null||f(fo(P))),R&&(r==="legacy"?n(R):o({to:R,type:"replace"}))},onError:p=>{f==null||f(fo(p))},...e===!0?{}:t}),y=(0,yo.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],a,{onSuccess:p=>{p!==!1&&p&&(r==="legacy"?n(p):o({to:p,type:"replace"})),i==null||i("forgot-password-error")},onError:p=>{f==null||f(fo(p))},...e?t:{}});return e?y:l}var fo=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"});var Cn=U(require("react")),Ro=require("@tanstack/react-query"),hn=U(require("qs"));function Tr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=K(),o=ne(),{replace:n}=oe(),{updatePassword:a}=re(),{updatePassword:s}=se(),{close:i,open:f}=ye(),l=Z(),{useLocation:y}=z(),{search:p}=y(),R=Cn.default.useMemo(()=>{var T;if(r==="legacy"){let u=hn.default.parse(p,{ignoreQueryPrefix:!0});return u!=null?u:{}}else return(T=l.params)!=null?T:{}},[p,l,r]),P=(0,Ro.useMutation)(["useUpdatePassword"],async T=>s==null?void 0:s({...R,...T}),{onSuccess:({success:T,redirectTo:u,error:m})=>{T&&(i==null||i("update-password-error")),(m||!T)&&(f==null||f(go(m))),u&&(r==="legacy"?n(u):o({to:u,type:"replace"}))},onError:T=>{f==null||f(go(T))},...e===!0?{}:t}),L=(0,Ro.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async T=>a==null?void 0:a({...R,...T}),{onSuccess:T=>{T!==!1&&T&&(r==="legacy"?n(T):o({to:T,type:"replace"})),i==null||i("update-password-error")},onError:T=>{f==null||f(go(T))},...e?t:{}});return e?L:P}var go=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"});var To=require("@tanstack/react-query");function Nt({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=re(),{check:o}=se(),n=(0,To.useQuery)(["useAuthenticated",t],async()=>{var s;return(s=await(o==null?void 0:o(t)))!=null?s:{}},{retry:!1,enabled:!e}),a=(0,To.useQuery)(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>{var s;return(s=await(r==null?void 0:r(t)))!=null?s:{}},{retry:!1,enabled:e});return e?a:n}var bn=Nt;var xo=require("@tanstack/react-query");function J({v3LegacyAuthProviderCompatible:e=!1}={}){let t=K(),r=ne(),{replace:o}=oe(),{checkError:n}=re(),{onError:a}=se(),{mutate:s}=Vt({v3LegacyAuthProviderCompatible:Boolean(e)}),{mutate:i}=Vt({v3LegacyAuthProviderCompatible:Boolean(e)}),f=(0,xo.useMutation)(["useCheckError"],a,{onSuccess:({logout:y,redirectTo:p})=>{if(y){i({redirectPath:p});return}if(p){t==="legacy"?o(p):r({to:p,type:"replace"});return}}}),l=(0,xo.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],n,{onError:y=>{s({redirectPath:y})}});return e?l:f}var vn=J;var xr=()=>{let{isProvided:e}=re(),{isProvided:t}=se();return Boolean(t||e)};var Fn=require("@tanstack/react-query");var Ft=e=>e/1e3;var Dn=U(require("lodash/zip")),En=U(require("lodash/fromPairs")),Ot=(e,t=r=>r)=>{let[r,...o]=e;return o.map(n=>(0,En.default)((0,Dn.default)(r,n))).map((n,a,s)=>t.call(void 0,n,a,s))};var ho=U(require("pluralize"));var Pr=U(require("qs")),Po=U(require("lodash/unionWith")),Co=U(require("lodash/differenceWith")),Ln=U(require("warn-once"));var Kt=e=>{var s;let{current:t,pageSize:r,sorter:o,sorters:n,filters:a}=Pr.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:(s=h(n,o))!=null?s:[],parsedFilters:a!=null?a:[]}},Mn=e=>{let t=Pr.default.stringify(e);return Kt(`/${t}`)},Ht=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,sorters:n,filters:a,...s}=e;return Pr.default.stringify({...s,...r||{},sorters:h(n,o),filters:a},t)},In=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Un=(e,t)=>e.field==t.field,ut=(e,t,r=[])=>(t.filter(n=>(n.operator==="or"||n.operator==="and")&&!n.key).length>1&&(0,Ln.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,Po.default)(e,t,r,In).filter(n=>n.value!==void 0&&n.value!==null&&(n.operator!=="or"||n.operator==="or"&&n.value.length!==0)&&(n.operator!=="and"||n.operator==="and"&&n.value.length!==0))),Wt=(e,t)=>(0,Po.default)(e,t,Un).filter(r=>r.order!==void 0&&r.order!==null),$t=(e,t)=>[...(0,Co.default)(t,e,In),...e],Gt=(e,t)=>[...(0,Co.default)(t,e,Un),...e],wn=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},An=(e,t,r="eq")=>{let o=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:a,field:s}=n;return s===e&&a===r}});if(o)return o.value||[]};var Sn=e=>new Promise((t,r)=>{let o=new FileReader,n=()=>{o.result&&(o.removeEventListener("load",n,!1),t(o.result))};o.addEventListener("load",n,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",n,!1),r(a))});var pt=(e="",t)=>{let r=ct(e);return t==="singular"?ho.default.singular(r):ho.default.plural(r)};var bo=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var h=(...e)=>e.find(t=>typeof t<"u");var X=(e,t,r,o)=>{let n=t||"default",a={all:[n],resourceAll:[n,e||""],list:s=>[...a.resourceAll,"list",{...s,...h(r,o)||{}}],many:s=>[...a.resourceAll,"getMany",s&&s.map(String),{...h(r,o)||{}}].filter(i=>i!==void 0),detail:s=>[...a.resourceAll,"detail",s==null?void 0:s.toString(),{...h(r,o)||{}}],logList:s=>["logList",e,s,o].filter(i=>i!==void 0)};return a};var vo=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var dt=e=>e.startsWith(":");var Be=e=>e.split("/").filter(r=>r!=="");var Do=(e,t)=>{let r=Be(e),o=Be(t);return r.length===o.length};var me=e=>e.replace(/^\/|\/$/g,"");var Eo=(e,t)=>{let r=me(e),o=me(t);if(!Do(r,o))return!1;let n=Be(r);return Be(o).every((s,i)=>dt(s)||s===n[i])};var Lo=(e,t,r)=>{let o=me(r||""),n=`${o}${o?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`};var he=(e,t)=>{var n,a;let r=h((n=e.meta)==null?void 0:n.parent,(a=e.options)==null?void 0:a.parent,e.parentName);if(!r)return;let o=t.find(s=>{var i;return((i=s.identifier)!=null?i:s.name)===r});return o!=null?o:{name:r}};var zt=(e,t,r)=>{let o=[],n=he(e,t);for(;n;)o.push(n),n=he(n,t);if(o.length!==0)return`/${o.reverse().map(a=>{var i,f;let s=r&&(f=(i=a.options)==null?void 0:i.route)!=null?f:a.name;return me(s)}).join("/")}`};var ce=(e,t,r)=>{let o=[],n=["list","show","edit","create","clone"],a=zt(e,t,r);return n.forEach(s=>{var l,y,p,R;let i=r&&s==="clone"?e.create:e[s],f;typeof i=="function"||r?f=Lo(r&&(R=(p=(l=e.meta)==null?void 0:l.route)!=null?p:(y=e.options)==null?void 0:y.route)!=null?R:e.name,s,r?a:void 0):typeof i=="string"?f=i:typeof i=="object"&&(f=i.path),f&&o.push({action:s,resource:e,route:`/${f.replace(/^\//,"")}`})}),o};var kn=e=>{var n,a;if(e.length===0)return;if(e.length===1)return e[0];let t=e.map(s=>({...s,splitted:Be(me(s.route))})),r=(a=(n=t[0])==null?void 0:n.splitted.length)!=null?a:0,o=[...t];for(let s=0;s<r;s++){let i=o.filter(f=>!dt(f.splitted[s]));if(i.length!==0){if(i.length===1){o=i;break}o=i}}return o[0]};var Cr=(e,t)=>{let o=t.flatMap(a=>ce(a,t)).filter(a=>Eo(e,a.route)),n=kn(o);return{found:!!n,resource:n==null?void 0:n.resource,action:n==null?void 0:n.action,matchedRoute:n==null?void 0:n.route}};var jt=(e,t)=>{var n,a,s;let r,o=zt(e,t,!0);if(o){let i=h(e.meta,e.options);r=`${o}/${(n=i==null?void 0:i.route)!=null?n:e.name}`}else r=(s=(a=e.options)==null?void 0:a.route)!=null?s:e.name;return`/${r.replace(/^\//,"")}`};var Mo=e=>{var s,i,f;let t=[],r={},o={},n,a;for(let l=0;l<e.length;l++){n=e[l];let y=(f=(i=n.route)!=null?i:(s=h(n==null?void 0:n.meta,n.options))==null?void 0:s.route)!=null?f:"";r[y]=n,r[y].children=[],o[n.name]=n,o[n.name].children=[]}for(let l in r)r.hasOwnProperty(l)&&(a=r[l],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var ct=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);var Uo=U(require("react"));var Qn=U(require("react")),Io=({children:e})=>Qn.default.createElement("div",null,e);var Ve={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},ge=Uo.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Io,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Ve}),Bn=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:n,children:a,DashboardPage:s,Title:i,Layout:f=Io,Header:l,Sider:y,Footer:p,OffLayoutArea:R,LoginPage:P=hr,catchAll:L,liveMode:T="off",onLiveEvent:u,options:m})=>Uo.default.createElement(ge.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:i,undoableTimeout:n,Layout:f,Header:l,Sider:y,Footer:p,OffLayoutArea:R,DashboardPage:s,LoginPage:P,catchAll:L,liveMode:T,onLiveEvent:u,options:m}},a);var wo=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:n,reactQueryDevtoolConfig:a,syncWithLocation:s,undoableTimeout:i,warnWhenUnsavedChanges:f}={})=>{var R,P,L,T,u,m,x,b,v,g,d,C,D,E,M,I,A,w,k,N,O,S,F,H;let l={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(P=(R=e==null?void 0:e.mutationMode)!=null?R:o)!=null?P:Ve.mutationMode,undoableTimeout:(T=(L=e==null?void 0:e.undoableTimeout)!=null?L:i)!=null?T:Ve.undoableTimeout,syncWithLocation:(m=(u=e==null?void 0:e.syncWithLocation)!=null?u:s)!=null?m:Ve.syncWithLocation,warnWhenUnsavedChanges:(b=(x=e==null?void 0:e.warnWhenUnsavedChanges)!=null?x:f)!=null?b:Ve.warnWhenUnsavedChanges,liveMode:(g=(v=e==null?void 0:e.liveMode)!=null?v:r)!=null?g:Ve.liveMode,redirect:{afterCreate:(C=(d=e==null?void 0:e.redirect)==null?void 0:d.afterCreate)!=null?C:Ve.redirect.afterCreate,afterClone:(E=(D=e==null?void 0:e.redirect)==null?void 0:D.afterClone)!=null?E:Ve.redirect.afterClone,afterEdit:(I=(M=e==null?void 0:e.redirect)==null?void 0:M.afterEdit)!=null?I:Ve.redirect.afterEdit}},y=(w=(A=e==null?void 0:e.disableTelemetry)!=null?A:t)!=null?w:!1,p={clientConfig:(O=(N=(k=e==null?void 0:e.reactQuery)==null?void 0:k.clientConfig)!=null?N:n)!=null?O:{},devtoolConfig:(H=(F=(S=e==null?void 0:e.reactQuery)==null?void 0:S.devtoolConfig)!=null?F:a)!=null?H:{}};return{optionsWithDefaults:l,disableTelemetryWithDefault:y,reactQueryWithDefaults:p}};var Ao=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}};var br=async(e,t,r)=>{let o=[];for(let[n,a]of e.entries())try{let s=await a();o.push(t(s,n))}catch(s){o.push(r(s,n))}return o};var $=(e,t=[],r=!1)=>{if(!e)return;if(r){let n=t.find(s=>{var i;return me((i=s.route)!=null?i:"")===me(e)});return n||t.find(s=>s.name===e)}return t.find(n=>{var a;return((a=n.identifier)!=null?a:n.name)===e})};var B=(e,t,r)=>{if(t)return t;let o=$(e,r),n=h(o==null?void 0:o.meta,o==null?void 0:o.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"};var He=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var _t=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/n);return o<a?Number(o)+1:void 0},Zt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var Yt=e=>{let t=[];return e==null||e.forEach(r=>{var o,n,a;t.push({...r,label:(a=(o=r.meta)==null?void 0:o.label)!=null?a:(n=r.options)==null?void 0:n.label,route:jt(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t};var Vn=e=>Be(me(e)).flatMap(r=>dt(r)?[r.slice(1)]:[]);var Nn=(e,t={},r={})=>e.reduce((o,n)=>{var s;let a=r[n]||((s=t.params)==null?void 0:s[n])||(n==="id"?t.id:void 0)||(n==="action"?t.action:void 0)||(n==="resource"?t.resource:void 0);return typeof a<"u"&&(o[n]=a),o},{});var fe=(e,t={},r={})=>{let o=Vn(e),n=Nn(o,t,r);return e.replace(/:([^\/]+)/g,(a,s)=>{let i=n[s];return typeof i<"u"?`${i}`:a})};var W=()=>{let e=re(),t=se();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null};var Jt=({hasPagination:e,pagination:t,configPagination:r}={})=>{var i,f,l;let o=e===!1?"off":"server",n=(i=t==null?void 0:t.mode)!=null?i:o,a=(f=h(t==null?void 0:t.current,r==null?void 0:r.current))!=null?f:1,s=(l=h(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize))!=null?l:10;return{current:a,pageSize:s,mode:n}};var vr=require("react"),Dr=e=>{let[t,r]=(0,vr.useState)(!1);return(0,vr.useEffect)(()=>{let o=window.matchMedia(e);o.matches!==t&&r(o.matches);let n=()=>r(o.matches);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t,e]),t};var bt=({resource:e,config:t,filters:r,hasPagination:o,pagination:n,sorters:a,queryOptions:s,successNotification:i,errorNotification:f,meta:l,metaData:y,liveMode:p,onLiveEvent:R,liveParams:P,dataProviderName:L})=>{let{resources:T}=Q(),u=j(),m=V(),x=W(),{mutate:b}=J({v3LegacyAuthProviderCompatible:Boolean(x==null?void 0:x.isLegacy)}),v=q(),g=B(e,L,T),d=h(l,y),C=h(r,t==null?void 0:t.filters),D=h(a,t==null?void 0:t.sort),E=h(o,t==null?void 0:t.hasPagination),M=Jt({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:E}),I=M.mode==="server",A={meta:d,metaData:d,filters:C,hasPagination:I,pagination:M,sorters:D,config:{...t,sort:D}},w=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,k=X(e,g,d,d),{getList:N}=u(g);return We({resource:e,types:["*"],params:{meta:d,metaData:d,pagination:M,hasPagination:I,sort:D,sorters:D,filters:C,subscriptionType:"useList",...P},channel:`resources/${e}`,enabled:w,liveMode:p,onLiveEvent:R}),(0,Fn.useQuery)(k.list({filters:C,hasPagination:I,...I&&{pagination:M},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:S,pageParam:F,signal:H})=>N({resource:e,pagination:M,hasPagination:I,filters:C,sort:D,sorters:D,meta:{...d||{},queryContext:{queryKey:S,pageParam:F,signal:H}},metaData:{...d||{},queryContext:{queryKey:S,pageParam:F,signal:H}}}),{...s,enabled:typeof(s==null?void 0:s.enabled)<"u"?s==null?void 0:s.enabled:!!e,select:S=>{var _;let F=S,{current:H,mode:Pe,pageSize:Me}=M;return Pe==="client"&&(F={...F,data:F.data.slice((H-1)*Me,H*Me),total:F.total}),s!=null&&s.select?(_=s==null?void 0:s.select)==null?void 0:_.call(s,F):F},onSuccess:S=>{var H;(H=s==null?void 0:s.onSuccess)==null||H.call(s,S);let F=typeof i=="function"?i(S,A,e):i;v(F)},onError:S=>{var H;b(S),(H=s==null?void 0:s.onError)==null||H.call(s,S);let F=typeof f=="function"?f(S,A,e):f;v(F,{key:`${e}-useList-notification`,message:m("notifications.error",{statusCode:S.statusCode},`Error (status code: ${S.statusCode})`),description:S.message,type:"error"})}})};var On=require("@tanstack/react-query");var vt=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:n,meta:a,metaData:s,liveMode:i,onLiveEvent:f,liveParams:l,dataProviderName:y})=>{let{resources:p}=Q(),R=j(),P=X(e,B(e,y,p),h(a,s),h(a,s)),{getOne:L}=R(B(e,y,p)),T=V(),u=W(),{mutate:m}=J({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),x=q();return We({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,meta:h(a,s),metaData:h(a,s),subscriptionType:"useOne",...l},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof e<"u"&&typeof t<"u",liveMode:i,onLiveEvent:f}),(0,On.useQuery)(P.detail(t),({queryKey:v,pageParam:g,signal:d})=>L({resource:e,id:t,meta:{...h(a,s)||{},queryContext:{queryKey:v,pageParam:g,signal:d}},metaData:{...h(a,s)||{},queryContext:{queryKey:v,pageParam:g,signal:d}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:v=>{var d;(d=r==null?void 0:r.onSuccess)==null||d.call(r,v);let g=typeof o=="function"?o(v,{id:t,...h(a,s)||{}},e):o;x(g)},onError:v=>{var d;m(v),(d=r==null?void 0:r.onError)==null||d.call(r,v);let g=typeof n=="function"?n(v,{id:t,...h(a,s)||{}},e):n;x(g,{key:`${t}-${e}-getOne-notification`,message:T("notifications.error",{statusCode:v.statusCode},`Error (status code: ${v.statusCode})`),description:v.message,type:"error"})}})};var Kn=require("@tanstack/react-query");var Er=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:n,meta:a,metaData:s,liveMode:i,onLiveEvent:f,liveParams:l,dataProviderName:y})=>{let{resources:p}=Q(),R=j(),P=X(e,B(e,y,p),h(a,s),h(a,s)),{getMany:L,getOne:T}=R(B(e,y,p)),u=V(),m=W(),{mutate:x}=J({v3LegacyAuthProviderCompatible:Boolean(m==null?void 0:m.isLegacy)}),b=q(),v=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return We({resource:e,types:["*"],params:{ids:t!=null?t:[],meta:h(a,s),metaData:h(a,s),subscriptionType:"useMany",...l},channel:`resources/${e}`,enabled:v,liveMode:i,onLiveEvent:f}),(0,Kn.useQuery)(P.many(t),({queryKey:d,pageParam:C,signal:D})=>L?L({resource:e,ids:t,metaData:{...h(a,s)||{},queryContext:{queryKey:d,pageParam:C,signal:D}}}):He(t.map(E=>T({resource:e,id:E,metaData:{...h(a,s)||{},queryContext:{queryKey:d,pageParam:C,signal:D}}}))),{...r,onSuccess:d=>{var D;(D=r==null?void 0:r.onSuccess)==null||D.call(r,d);let C=typeof o=="function"?o(d,t,e):o;b(C)},onError:d=>{var D;x(d),(D=r==null?void 0:r.onError)==null||D.call(r,d);let C=typeof n=="function"?n(d,t,e):n;b(C,{key:`${t[0]}-${e}-getMany-notification`,message:u("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}})};var Ir=require("@tanstack/react-query");var Dt=U(require("react")),Lr=U(require("lodash/isEqual"));var Mr=Dt.default.createContext({notifications:[],notificationDispatch:()=>!1}),Qa=[],Ba=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!((0,Lr.default)(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!((0,Lr.default)(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>(0,Lr.default)(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},So=({children:e})=>{let[t,r]=(0,Dt.useReducer)(Ba,Qa),o={notifications:t,notificationDispatch:r};return Dt.default.createElement(Mr.Provider,{value:o},e,typeof window<"u"&&t.map(n=>Dt.default.createElement(ko,{key:`${n.id}-${n.resource}-queue`,notification:n})))};var Qo=U(require("pluralize"));var Ur=({mutationOptions:e}={})=>{let{resources:t}=Q(),r=(0,Ir.useQueryClient)(),o=j(),{mutationMode:n,undoableTimeout:a}=Le(),s=V(),i=W(),{mutate:f}=J({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),l=be(),{log:y}=ve(),{notificationDispatch:p}=ke(),R=q(),P=De();return(0,Ir.useMutation)(({id:T,values:u,resource:m,mutationMode:x,undoableTimeout:b,onCancel:v,meta:g,metaData:d,dataProviderName:C})=>{let D=x!=null?x:n,E=b!=null?b:a;return D!=="undoable"?o(B(m,C,t)).update({resource:m,id:T,variables:u,meta:h(g,d),metaData:h(g,d)}):new Promise((I,A)=>{let w=()=>{o(B(m,C,t)).update({resource:m,id:T,variables:u,meta:h(g,d),metaData:h(g,d)}).then(N=>I(N)).catch(N=>A(N))},k=()=>{A({message:"mutationCancelled"})};v&&v(k),p({type:"ADD",payload:{id:T,resource:m,cancelMutation:k,doMutation:w,seconds:E,isSilent:!!v}})})},{onMutate:async({resource:T,id:u,mutationMode:m,values:x,dataProviderName:b})=>{let v=X(T,B(T,b,t)),g=r.getQueriesData(v.resourceAll),d=m!=null?m:n;return await r.cancelQueries(v.resourceAll,void 0,{silent:!0}),d!=="pessimistic"&&(r.setQueriesData(v.list(),C=>{if(!C)return null;let D=C.data.map(E=>{var M;return((M=E.id)==null?void 0:M.toString())===(u==null?void 0:u.toString())?{id:u,...E,...x}:E});return{...C,data:D}}),r.setQueriesData(v.many(),C=>{if(!C)return null;let D=C.data.map(E=>{var M;return((M=E.id)==null?void 0:M.toString())===(u==null?void 0:u.toString())&&(E={id:u,...E,...x}),E});return{...C,data:D}}),r.setQueriesData(v.detail(u),C=>C?{...C,data:{...C.data,...x}}:null)),{previousQueries:g,queryKey:v}},onSettled:(T,u,{id:m,resource:x,dataProviderName:b,invalidates:v=["list","many","detail"]})=>{P({resource:x,dataProviderName:B(x,b,t),invalidates:v,id:m}),p({type:"REMOVE",payload:{id:m,resource:x}})},onSuccess:(T,{id:u,resource:m,successNotification:x,dataProviderName:b,values:v,meta:g,metaData:d},C)=>{var N;let D=Qo.default.singular(m),E=typeof x=="function"?x(T,{id:u,values:v},m):x;R(E,{key:`${u}-${m}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${m}.${m}`,D)},`Successfully updated ${D}`),type:"success"}),l==null||l({channel:`resources/${m}`,type:"updated",payload:{ids:(N=T.data)!=null&&N.id?[T.data.id]:void 0},date:new Date});let M;if(C){let O=r.getQueryData(C.queryKey.detail(u));M=Object.keys(v||{}).reduce((S,F)=>{var H;return S[F]=(H=O==null?void 0:O.data)==null?void 0:H[F],S},{})}let{fields:I,operation:A,variables:w,...k}=h(g,d)||{};y==null||y.mutate({action:"update",resource:m,data:v,previousData:M,meta:{id:u,dataProviderName:B(m,b,t),...k}})},onError:(T,{id:u,resource:m,errorNotification:x,values:b},v)=>{if(v)for(let g of v.previousQueries)r.setQueryData(g[0],g[1]);if(T.message!=="mutationCancelled"){f==null||f(T);let g=Qo.default.singular(m),d=typeof x=="function"?x(T,{id:u,values:b},m):x;R(d,{key:`${u}-${m}-notification`,message:s("notifications.editError",{resource:s(`${m}.${m}`,g),statusCode:T.statusCode},`Error when updating ${g} (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var Hn=require("@tanstack/react-query"),Bo=U(require("pluralize"));var Lt=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=j(),n=De(),{resources:a}=Q(),s=V(),i=be(),{log:f}=ve(),l=q();return(0,Hn.useMutation)(({resource:p,values:R,meta:P,metaData:L,dataProviderName:T})=>o(B(p,T,a)).create({resource:p,variables:R,meta:h(P,L),metaData:h(P,L)}),{onSuccess:(p,{resource:R,successNotification:P,dataProviderName:L,invalidates:T=["list","many"],values:u,meta:m,metaData:x})=>{var E,M,I;let b=Bo.default.singular(R),v=typeof P=="function"?P(p,u,R):P;l(v,{key:`create-${R}-notification`,message:s("notifications.createSuccess",{resource:s(`${R}.${R}`,b)},`Successfully created ${b}`),description:s("notifications.success","Success"),type:"success"}),n({resource:R,dataProviderName:B(R,L,a),invalidates:T}),i==null||i({channel:`resources/${R}`,type:"created",payload:{ids:(E=p==null?void 0:p.data)!=null&&E.id?[p.data.id]:void 0},date:new Date});let{fields:g,operation:d,variables:C,...D}=h(m,x)||{};f==null||f.mutate({action:"create",resource:R,data:u,meta:{dataProviderName:B(R,L,a),id:(I=(M=p==null?void 0:p.data)==null?void 0:M.id)!=null?I:void 0,...D}})},onError:(p,{resource:R,errorNotification:P,values:L})=>{r(p);let T=Bo.default.singular(R),u=typeof P=="function"?P(p,L,R):P;l(u,{key:`create-${R}-notification`,description:p.message,message:s("notifications.createError",{resource:s(`${R}.${R}`,T),statusCode:p.statusCode},`There was an error creating ${T} (status code: ${p.statusCode})`),type:"error"})},...e})};var wr=require("@tanstack/react-query"),Vo=U(require("pluralize"));var Wn=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=j(),{resources:n}=Q(),a=(0,wr.useQueryClient)(),{mutationMode:s,undoableTimeout:i}=Le(),{notificationDispatch:f}=ke(),l=V(),y=be(),{log:p}=ve(),R=q(),P=De();return(0,wr.useMutation)(({id:T,mutationMode:u,undoableTimeout:m,resource:x,onCancel:b,meta:v,metaData:g,dataProviderName:d,values:C})=>{let D=u!=null?u:s,E=m!=null?m:i;return D!=="undoable"?o(B(x,d,n)).deleteOne({resource:x,id:T,meta:h(v,g),metaData:h(v,g),variables:C}):new Promise((I,A)=>{let w=()=>{o(B(x,d,n)).deleteOne({resource:x,id:T,meta:h(v,g),variables:C}).then(N=>I(N)).catch(N=>A(N))},k=()=>{A({message:"mutationCancelled"})};b&&b(k),f({type:"ADD",payload:{id:T,resource:x,cancelMutation:k,doMutation:w,seconds:E,isSilent:!!b}})})},{onMutate:async({id:T,resource:u,mutationMode:m,dataProviderName:x})=>{let b=X(u,B(u,x,n)),v=m!=null?m:s;await a.cancelQueries(b.resourceAll,void 0,{silent:!0});let g=a.getQueriesData(b.resourceAll);return v!=="pessimistic"&&(a.setQueriesData(b.list(),d=>d?{data:d.data.filter(D=>{var E;return((E=D.id)==null?void 0:E.toString())!==T.toString()}),total:d.total-1}:null),a.setQueriesData(b.many(),d=>{if(!d)return null;let C=d.data.filter(D=>{var E;return((E=D.id)==null?void 0:E.toString())!==(T==null?void 0:T.toString())});return{...d,data:C}})),{previousQueries:g,queryKey:b}},onSettled:(T,u,{id:m,resource:x,dataProviderName:b,invalidates:v=["list","many"]})=>{P({resource:x,dataProviderName:B(x,b,n),invalidates:v}),f({type:"REMOVE",payload:{id:m,resource:x}})},onSuccess:(T,{id:u,resource:m,successNotification:x,dataProviderName:b,meta:v,metaData:g},d)=>{let C=Vo.default.singular(m!=null?m:"");a.removeQueries(d==null?void 0:d.queryKey.detail(u));let D=typeof x=="function"?x(T,u,m):x;R(D,{key:`${u}-${m}-notification`,description:l("notifications.success","Success"),message:l("notifications.deleteSuccess",{resource:l(`${m}.${m}`,C)},`Successfully deleted a ${C}`),type:"success"}),y==null||y({channel:`resources/${m}`,type:"deleted",payload:{ids:u?[u]:[]},date:new Date});let{fields:E,operation:M,variables:I,...A}=h(v,g)||{};p==null||p.mutate({action:"delete",resource:m,meta:{id:u,dataProviderName:B(m,b,n),...A}}),a.removeQueries(d==null?void 0:d.queryKey.detail(u))},onError:(T,{id:u,resource:m,errorNotification:x},b)=>{if(b)for(let v of b.previousQueries)a.setQueryData(v[0],v[1]);if(T.message!=="mutationCancelled"){r(T);let v=Vo.default.singular(m!=null?m:""),g=typeof x=="function"?x(T,u,m):x;R(g,{key:`${u}-${m}-notification`,message:l("notifications.deleteError",{resource:v,statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var $n=require("@tanstack/react-query"),Gn=U(require("pluralize"));var Ar=({mutationOptions:e}={})=>{let t=j(),{resources:r}=Q(),o=V(),n=be(),a=q(),s=De(),{log:i}=ve();return(0,$n.useMutation)(({resource:l,values:y,meta:p,metaData:R,dataProviderName:P})=>{let L=t(B(l,P,r));return L.createMany?L.createMany({resource:l,variables:y,meta:h(p,R),metaData:h(p,R)}):He(y.map(T=>L.create({resource:l,variables:T,meta:h(p,R),metaData:h(p,R)})))},{onSuccess:(l,{resource:y,successNotification:p,dataProviderName:R,invalidates:P=["list","many"],values:L,meta:T,metaData:u})=>{let m=Gn.default.plural(y),x=typeof p=="function"?p(l,L,y):p;a(x,{key:`createMany-${y}-notification`,message:o("notifications.createSuccess",{resource:o(`${y}.${y}`,y)},`Successfully created ${m}`),description:o("notifications.success","Success"),type:"success"}),s({resource:y,dataProviderName:B(y,R,r),invalidates:P});let b=l==null?void 0:l.data.filter(D=>(D==null?void 0:D.id)!==void 0).map(D=>D.id);n==null||n({channel:`resources/${y}`,type:"created",payload:{ids:b},date:new Date});let{fields:v,operation:g,variables:d,...C}=h(T,u)||{};i==null||i.mutate({action:"createMany",resource:y,data:L,meta:{dataProviderName:B(y,R,r),ids:b,...C}})},onError:(l,{resource:y,errorNotification:p,values:R})=>{let P=typeof p=="function"?p(l,R,y):p;a(P,{key:`createMany-${y}-notification`,description:l.message,message:o("notifications.createError",{resource:o(`${y}.${y}`,y),statusCode:l.statusCode},`There was an error creating ${y} (status code: ${l.statusCode}`),type:"error"})},...e})};var Sr=require("@tanstack/react-query"),No=U(require("pluralize"));var zn=({mutationOptions:e}={})=>{let{resources:t}=Q(),r=(0,Sr.useQueryClient)(),o=j(),n=V(),{mutationMode:a,undoableTimeout:s}=Le(),i=W(),{mutate:f}=J({v3LegacyAuthProviderCompatible:Boolean(i==null?void 0:i.isLegacy)}),{notificationDispatch:l}=ke(),y=be(),p=q(),R=De(),{log:P}=ve();return(0,Sr.useMutation)(({ids:T,values:u,resource:m,onCancel:x,mutationMode:b,undoableTimeout:v,meta:g,metaData:d,dataProviderName:C})=>{let D=b!=null?b:a,E=v!=null?v:s,M=o(B(m,C,t)),I=()=>M.updateMany?M.updateMany({resource:m,ids:T,variables:u,meta:h(g,d),metaData:h(g,d)}):He(T.map(w=>M.update({resource:m,id:w,variables:u,meta:h(g,d),metaData:h(g,d)})));return D!=="undoable"?I():new Promise((w,k)=>{let N=()=>{I().then(S=>w(S)).catch(S=>k(S))},O=()=>{k({message:"mutationCancelled"})};x&&x(O),l({type:"ADD",payload:{id:T,resource:m,cancelMutation:O,doMutation:N,seconds:E,isSilent:!!x}})})},{onMutate:async({resource:T,ids:u,values:m,mutationMode:x,dataProviderName:b,meta:v,metaData:g})=>{let d=X(T,B(T,b,t),h(v,g),h(v,g)),C=x!=null?x:a;await r.cancelQueries(d.resourceAll,void 0,{silent:!0});let D=r.getQueriesData(d.resourceAll);if(C!=="pessimistic"){r.setQueriesData(d.list(),E=>{if(!E)return null;let M=E.data.map(I=>I.id!==void 0&&u.filter(A=>A!==void 0).map(String).includes(I.id.toString())?{...I,...m}:I);return{...E,data:M}}),r.setQueriesData(d.many(),E=>{if(!E)return null;let M=E.data.map(I=>I.id!==void 0&&u.filter(A=>A!==void 0).map(String).includes(I.id.toString())?{...I,...m}:I);return{...E,data:M}});for(let E of u)r.setQueriesData(d.detail(E),M=>{if(!M)return null;let I={...M.data,...m};return{...M,data:I}})}return{previousQueries:D,queryKey:d}},onSettled:(T,u,{ids:m,resource:x,dataProviderName:b})=>{R({resource:x,invalidates:["list","many"],dataProviderName:B(x,b,t)}),m.forEach(v=>R({resource:x,invalidates:["detail"],dataProviderName:B(x,b,t),id:v})),l({type:"REMOVE",payload:{id:m,resource:x}})},onSuccess:(T,{ids:u,resource:m,meta:x,metaData:b,dataProviderName:v,successNotification:g,values:d},C)=>{let D=No.default.singular(m),E=typeof g=="function"?g(T,{ids:u,values:d},m):g;p(E,{key:`${u}-${m}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${m}.${m}`,m)},`Successfully updated ${D}`),type:"success"}),y==null||y({channel:`resources/${m}`,type:"updated",payload:{ids:u.map(String)},date:new Date});let M=[];C&&u.forEach(N=>{let O=r.getQueryData(C.queryKey.detail(N));M.push(Object.keys(d||{}).reduce((S,F)=>{var H;return S[F]=(H=O==null?void 0:O.data)==null?void 0:H[F],S},{}))});let{fields:I,operation:A,variables:w,...k}=h(x,b)||{};P==null||P.mutate({action:"updateMany",resource:m,data:d,previousData:M,meta:{ids:u,dataProviderName:B(m,v,t),...k}})},onError:(T,{ids:u,resource:m,errorNotification:x,values:b},v)=>{if(v)for(let g of v.previousQueries)r.setQueryData(g[0],g[1]);if(T.message!=="mutationCancelled"){f==null||f(T);let g=No.default.singular(m),d=typeof x=="function"?x(T,{ids:u,values:b},m):x;p(d,{key:`${u}-${m}-updateMany-error-notification`,message:n("notifications.editError",{resource:g,statusCode:T.statusCode},`Error when updating ${g} (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var kr=require("@tanstack/react-query"),jn=U(require("pluralize"));var _n=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),{mutationMode:o,undoableTimeout:n}=Le(),a=j(),{notificationDispatch:s}=ke(),i=V(),f=be(),l=q(),y=De(),{log:p}=ve(),{resources:R}=Q(),P=(0,kr.useQueryClient)();return(0,kr.useMutation)(({resource:T,ids:u,mutationMode:m,undoableTimeout:x,onCancel:b,meta:v,metaData:g,dataProviderName:d,values:C})=>{let D=m!=null?m:o,E=x!=null?x:n,M=a(B(T,d,R)),I=()=>M.deleteMany?M.deleteMany({resource:T,ids:u,meta:h(v,g),metaData:h(v,g),variables:C}):He(u.map(w=>M.deleteOne({resource:T,id:w,meta:h(v,g),metaData:h(v,g),variables:C})));return D!=="undoable"?I():new Promise((w,k)=>{let N=()=>{I().then(S=>w(S)).catch(S=>k(S))},O=()=>{k({message:"mutationCancelled"})};b&&b(O),s({type:"ADD",payload:{id:u,resource:T,cancelMutation:O,doMutation:N,seconds:E,isSilent:!!b}})})},{onMutate:async({ids:T,resource:u,mutationMode:m,dataProviderName:x})=>{let b=X(u,B(u,x,R)),v=m!=null?m:o;await P.cancelQueries(b.resourceAll,void 0,{silent:!0});let g=P.getQueriesData(b.resourceAll);if(v!=="pessimistic"){P.setQueriesData(b.list(),d=>d?{data:d.data.filter(D=>D.id&&!T.map(String).includes(D.id.toString())),total:d.total-1}:null),P.setQueriesData(b.many(),d=>{if(!d)return null;let C=d.data.filter(D=>D.id?!T.map(String).includes(D.id.toString()):!1);return{...d,data:C}});for(let d of T)P.setQueriesData(b.detail(d),C=>!C||C.data.id==d?null:{...C})}return{previousQueries:g,queryKey:b}},onSettled:(T,u,{resource:m,ids:x,dataProviderName:b,invalidates:v=["list","many"]})=>{y({resource:m,dataProviderName:B(m,b,R),invalidates:v}),s({type:"REMOVE",payload:{id:x,resource:m}})},onSuccess:(T,{ids:u,resource:m,meta:x,metaData:b,dataProviderName:v,successNotification:g},d)=>{u.forEach(A=>P.removeQueries(d==null?void 0:d.queryKey.detail(A)));let C=typeof g=="function"?g(T,u,m):g;l(C,{key:`${u}-${m}-notification`,description:i("notifications.success","Success"),message:i("notifications.deleteSuccess",{resource:i(`${m}.${m}`,m)},`Successfully deleted ${m}`),type:"success"}),f==null||f({channel:`resources/${m}`,type:"deleted",payload:{ids:u},date:new Date});let{fields:D,operation:E,variables:M,...I}=h(x,b)||{};p==null||p.mutate({action:"deleteMany",resource:m,meta:{ids:u,dataProviderName:B(m,v,R),...I}}),u.forEach(A=>P.removeQueries(d==null?void 0:d.queryKey.detail(A)))},onError:(T,{ids:u,resource:m,errorNotification:x},b)=>{if(b)for(let v of b.previousQueries)P.setQueryData(v[0],v[1]);if(T.message!=="mutationCancelled"){r(T);let v=jn.default.singular(m),g=typeof x=="function"?x(T,u,m):x;l(g,{key:`${u}-${m}-notification`,message:i("notifications.deleteError",{resource:v,statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}},...e})};var Zn=e=>{let t=j(),{getApiUrl:r}=t(e);return r()};var Yn=require("@tanstack/react-query");var Jn=({url:e,method:t,config:r,queryOptions:o,successNotification:n,errorNotification:a,meta:s,metaData:i,dataProviderName:f})=>{let l=j(),{custom:y}=l(f),p=W(),{mutate:R}=J({v3LegacyAuthProviderCompatible:Boolean(p==null?void 0:p.isLegacy)}),P=V(),L=q();if(y)return(0,Yn.useQuery)({queryKey:[f,"custom",t,e,{...r,...h(s,i)||{}}],queryFn:({queryKey:u,pageParam:m,signal:x})=>y({url:e,method:t,...r,metaData:{...h(s,i)||{},queryContext:{queryKey:u,pageParam:m,signal:x}}}),...o,onSuccess:u=>{var x;(x=o==null?void 0:o.onSuccess)==null||x.call(o,u);let m=typeof n=="function"?n(u,{...r,...h(s,i)||{}}):n;L(m)},onError:u=>{var x;R(u),(x=o==null?void 0:o.onError)==null||x.call(o,u);let m=typeof a=="function"?a(u,{...r,...h(s,i)||{}}):a;L(m,{key:`${t}-notification`,message:P("notifications.error",{statusCode:u.statusCode},`Error (status code: ${u.statusCode})`),description:u.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};var Xn=require("@tanstack/react-query");var qn=({mutationOptions:e}={})=>{let t=W(),{mutate:r}=J({v3LegacyAuthProviderCompatible:Boolean(t==null?void 0:t.isLegacy)}),o=q(),n=j(),a=V();return(0,Xn.useMutation)(({url:i,method:f,values:l,meta:y,metaData:p,dataProviderName:R,config:P})=>{let{custom:L}=n(R);if(L)return L({url:i,method:f,payload:l,meta:h(y,p),metaData:h(y,p),headers:{...P==null?void 0:P.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(i,{successNotification:f,config:l,meta:y,metaData:p})=>{let R=typeof f=="function"?f(i,{...l,...h(y,p)||{}}):f;o(R)},onError:(i,{errorNotification:f,method:l,config:y,meta:p,metaData:R})=>{r(i);let P=typeof f=="function"?f(i,{...y,...h(p,R)||{}}):f;o(P,{key:`${l}-notification`,message:a("notifications.error",{statusCode:i.statusCode},`Error (status code: ${i.statusCode})`),description:i.message,type:"error"})},...e})};var Qr=require("react");var Fo=U(require("react")),Va=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Xt=Fo.default.createContext(Va()),es=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Fo.default.createElement(Xt.Provider,{value:r},e)};var j=()=>{let e=(0,Qr.useContext)(Xt);return(0,Qr.useCallback)(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};var ts=require("@tanstack/react-query");var rs=({resource:e,config:t,filters:r,hasPagination:o,pagination:n,sorters:a,queryOptions:s,successNotification:i,errorNotification:f,meta:l,metaData:y,liveMode:p,onLiveEvent:R,liveParams:P,dataProviderName:L})=>{let{resources:T}=Q(),u=j(),m=V(),x=W(),{mutate:b}=J({v3LegacyAuthProviderCompatible:Boolean(x==null?void 0:x.isLegacy)}),v=q(),g=B(e,L,T),d=h(l,y),C=h(r,t==null?void 0:t.filters),D=h(a,t==null?void 0:t.sort),E=h(o,t==null?void 0:t.hasPagination),M=Jt({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:E}),I=M.mode==="server",A={meta:d,metaData:d,filters:C,hasPagination:I,pagination:M,sorters:D,config:{...t,sort:D}},w=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,k=X(e,g,d,d),{getList:N}=u(g);return We({resource:e,types:["*"],params:{meta:d,metaData:d,pagination:M,hasPagination:I,sort:D,sorters:D,filters:C,subscriptionType:"useList",...P},channel:`resources/${e}`,enabled:w,liveMode:p,onLiveEvent:R}),(0,ts.useInfiniteQuery)(k.list({filters:C,hasPagination:I,...I&&{pagination:M},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:S,pageParam:F,signal:H})=>{let Pe={...M,current:F};return N({resource:e,pagination:Pe,hasPagination:I,filters:C,sort:D,sorters:D,meta:{...d||{},queryContext:{queryKey:S,pageParam:F,signal:H}},metaData:{...d||{},queryContext:{queryKey:S,pageParam:F,signal:H}}}).then(({data:Me,total:_,...Oe})=>({data:Me,total:_,pagination:Pe,...Oe}))},{getNextPageParam:S=>_t(S),getPreviousPageParam:S=>Zt(S),...s,onSuccess:S=>{var H;(H=s==null?void 0:s.onSuccess)==null||H.call(s,S);let F=typeof i=="function"?i(S,A,e):i;v(F)},onError:S=>{var H;b(S),(H=s==null?void 0:s.onError)==null||H.call(s,S);let F=typeof f=="function"?f(S,A,e):f;v(F,{key:`${e}-useInfiniteList-notification`,message:m("notifications.error",{statusCode:S.statusCode},`Error (status code: ${S.statusCode})`),description:S.message,type:"error"})}})};var qt=require("react"),ns=require("@tanstack/react-query");var Oo=U(require("react")),$e=Oo.default.createContext(void 0),os=({liveProvider:e,children:t})=>Oo.default.createElement($e.Provider,{value:e},t);var We=({resource:e,params:t,channel:r,types:o,enabled:n=!0,liveMode:a,onLiveEvent:s})=>{let i=(0,ns.useQueryClient)(),f=X(e),l=(0,qt.useContext)($e),{liveMode:y,onLiveEvent:p}=(0,qt.useContext)(ge),R=a!=null?a:y;(0,qt.useEffect)(()=>{let P;return R&&R!=="off"&&n&&(P=l==null?void 0:l.subscribe({channel:r,params:{resource:e,...t},types:o,callback:L=>{R==="auto"&&i.invalidateQueries(f.resourceAll),s==null||s(L),p==null||p(L)}})),()=>{P&&(l==null||l.unsubscribe(P))}},[n])};var ss=require("react");var Ko=e=>{let{liveMode:t}=(0,ss.useContext)(ge);return e!=null?e:t};var Br=require("react");var Na=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:n})=>{let a=(0,Br.useContext)($e);(0,Br.useEffect)(()=>{let s;return o&&(s=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:n})),()=>{s&&(a==null||a.unsubscribe(s))}},[o])};var as=require("react");var be=()=>{let e=(0,as.useContext)($e);return e==null?void 0:e.publish};var Rs=require("react");var Ho=U(require("react"));var cs=require("react");var is=require("react"),us=U(require("lodash/isEqual")),ps=e=>{let t=(0,is.useRef)(e);return(0,us.default)(t.current,e)||(t.current=e),t.current};var Vr=(e,t)=>{let r=ps(t);return(0,cs.useMemo)(e,r)};var Ge=Ho.default.createContext({resources:[]}),ds=({resources:e,children:t})=>{let r=Vr(()=>Yt(e!=null?e:[]),[e]);return Ho.default.createElement(Ge.Provider,{value:{resources:r}},t)};var Wo=U(require("react")),ls=Wo.default.createContext("new"),ms=ls.Provider,K=()=>Wo.default.useContext(ls);var gs=U(require("react"));var Nr=U(require("react")),fs={},ze=(0,Nr.createContext)(fs),ys=({children:e,router:t})=>Nr.default.createElement(ze.Provider,{value:t!=null?t:fs},e);var Fr=U(require("react")),Or=()=>{let e=(0,Fr.useContext)(ze);return Fr.default.useMemo(()=>{var o;return(o=e==null?void 0:e.parse)!=null?o:()=>()=>({})},[e==null?void 0:e.parse])()};var Z=()=>{let e=Or();return gs.default.useMemo(()=>e(),[e])};function Q(e){var y,p;let{resources:t}=(0,Rs.useContext)(Ge),r=K(),o=Z(),n={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},a=je(),{useParams:s}=z(),i=s();if(r==="legacy"){let R=n.resourceNameOrRouteName?n.resourceNameOrRouteName:i.resource,P=R?a(R):void 0,L=(y=n==null?void 0:n.recordItemId)!=null?y:i.id,T=i.action,u=(p=n==null?void 0:n.resourceName)!=null?p:P==null?void 0:P.name;return{resources:t,resource:P,resourceName:u,id:L,action:T}}let f,l=typeof e=="string"?e:n==null?void 0:n.resourceNameOrRouteName;if(l){let R=$(l,t);R?f=R:f={name:l}}else o!=null&&o.resource&&(f=o.resource);return{resources:t,resource:f,resourceName:f==null?void 0:f.name,id:o.id,action:o.action}}var Kr=require("react");var je=()=>{let{resources:e}=(0,Kr.useContext)(Ge);return(0,Kr.useCallback)(r=>{let o=$(r,e,!0);return o||{name:r,route:r}},[e])};var Ts=require("react");var ke=()=>{let{notifications:e,notificationDispatch:t}=(0,Ts.useContext)(Mr);return{notifications:e,notificationDispatch:t}};var Ps=require("react");var Hr=U(require("react"));var er=(0,Hr.createContext)({}),xs=({open:e,close:t,children:r})=>Hr.default.createElement(er.Provider,{value:{open:e,close:t}},r);var ye=()=>{let{open:e,close:t}=(0,Ps.useContext)(er);return{open:e,close:t}};var Cs=require("react");var q=()=>{let{open:e}=ye();return(0,Cs.useCallback)((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};var Wr=require("react");var $o=U(require("react"));var Qe=$o.default.createContext({}),hs=({children:e,i18nProvider:t})=>$o.default.createElement(Qe.Provider,{value:{i18nProvider:t}},e);var bs=()=>{let{i18nProvider:e}=(0,Wr.useContext)(Qe);return(0,Wr.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])};var $r=require("react");var V=()=>{let{i18nProvider:e}=(0,$r.useContext)(Qe);return(0,$r.useMemo)(()=>{function r(o,n,a){var s,i;return(i=(s=e==null?void 0:e.translate(o,n,a))!=null?s:a)!=null?i:typeof n=="string"&&typeof a>"u"?n:o}return r},[e])};var Gr=require("react");var vs=()=>{let{i18nProvider:e}=(0,Gr.useContext)(Qe);return(0,Gr.useCallback)(()=>e==null?void 0:e.getLocale(),[])};var Ds=require("react");var Le=()=>{let{mutationMode:e,undoableTimeout:t}=(0,Ds.useContext)(ge);return{mutationMode:e,undoableTimeout:t}};var zo=require("react");var tr=U(require("react")),Go=tr.default.createContext({}),Es=({children:e})=>{let[t,r]=(0,tr.useState)(!1);return tr.default.createElement(Go.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var Mt=()=>{let{warnWhenUnsavedChanges:e}=(0,zo.useContext)(ge),{warnWhen:t,setWarnWhen:r}=(0,zo.useContext)(Go);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};var Ls=require("react");var zr=()=>{let{syncWithLocation:e}=(0,Ls.useContext)(ge);return{syncWithLocation:e}};var Ms=require("react");var Is=()=>{let{Title:e}=(0,Ms.useContext)(ge);return e};var Us=require("react");var It=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:n,Title:a,hasDashboard:s,mutationMode:i,syncWithLocation:f,undoableTimeout:l,warnWhenUnsavedChanges:y,DashboardPage:p,LoginPage:R,catchAll:P,options:L}=(0,Us.useContext)(ge);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:n,Title:a,hasDashboard:s,mutationMode:i,syncWithLocation:f,undoableTimeout:l,warnWhenUnsavedChanges:y,DashboardPage:p,LoginPage:R,catchAll:P,options:L}};var ws=require("react");var As=require("export-to-csv-fix-source-map"),Fa=({resourceName:e,resource:t,sorter:r,sorters:o,filters:n,maxItemCount:a,pageSize:s=20,mapData:i=P=>P,exportOptions:f,meta:l,metaData:y,dataProviderName:p,onError:R}={})=>{var g;let[P,L]=(0,ws.useState)(!1),T=j(),{resource:u,resources:m}=Q(),x=`${pt(u==null?void 0:u.name,"plural")}-${new Date().toLocaleString()}`,{getList:b}=T(B((g=u==null?void 0:u.identifier)!=null?g:u==null?void 0:u.name,p,m));return{isLoading:P,triggerExport:async()=>{var M;L(!0);let d=[],C=1,D=!0;for(;D;)try{let{data:I,total:A}=await b({resource:(M=u==null?void 0:u.name)!=null?M:"",filters:n,sort:h(o,r),sorters:h(o,r),pagination:{current:C,pageSize:s,mode:"server"},meta:h(l,y),metaData:h(l,y)});C++,d.push(...I),a&&d.length>=a&&(d=d.slice(0,a),D=!1),A===d.length&&(D=!1)}catch(I){L(!1),D=!1,R==null||R(I);return}new As.ExportToCsv({filename:x,useKeysAsHeaders:!0,...f}).generateCsv(d.map(i)),L(!1)}}};var jo=U(require("react")),Ss=U(require("warn-once"));var Oa=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:n,redirect:a,successNotification:s,errorNotification:i,meta:f,metaData:l,mutationMode:y,liveMode:p,onLiveEvent:R,liveParams:P,undoableTimeout:L,dataProviderName:T,invalidates:u,queryOptions:m,createMutationOptions:x,updateMutationOptions:b}={})=>{let{options:v}=It(),{resources:g}=Q(),d=K(),{resource:C,id:D,action:E}=Z(),{useParams:M}=z(),{resource:I,action:A,id:w}=M(),k=typeof C=="string"?C:C==null?void 0:C.name,N=!e||e===(d==="legacy"?I:k)?r!=null?r:d==="legacy"?w:D:r,[O,S]=jo.default.useState(N);jo.default.useEffect(()=>{S(N)},[N]);let F=e!=null?e:d==="legacy"?I:k,H=d==="legacy"?A:E,Pe=t!=null?t:H==="edit"||H==="clone"?H:"create",Me=je(),_;if(d==="legacy")F&&(_=Me(F));else if(e){let pe=$(e,g);pe?_=pe:_={name:e,route:e}}else if(typeof C=="string"){let pe=$(C,g);pe?_=pe:_={name:C,route:C}}else _=C;let{mutationMode:Oe}=Le(),de=y!=null?y:Oe,st=Pe==="create",te=Pe==="edit",le=Pe==="clone";(0,Ss.default)((le||te)&&Boolean(e)&&!Boolean(r),`[useForm]: action: "${Pe}", resource: "${F}", id: ${O} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let at=Ao({redirectFromProps:a,action:Pe,redirectOptions:v.redirect}),gt=O!==void 0&&(te||le),Ie=vt({resource:_==null?void 0:_.name,id:O!=null?O:"",queryOptions:{enabled:gt,...m},liveMode:p,onLiveEvent:R,liveParams:P,meta:h(f,l),metaData:h(f,l),dataProviderName:T}),{isFetching:Ue}=Ie,Rt=Lt({mutationOptions:x}),{mutate:pr,isLoading:kt}=Rt,Tt=Ur({mutationOptions:b}),{mutate:we,isLoading:cr}=Tt,{setWarnWhen:Ye}=Mt(),Je=_o();return{...st||le?{formLoading:Ue||kt,mutationResult:Rt,onFinish:async pe=>{Ye(!1);let Ae=Ke=>{Je({redirect:at,resource:_,id:Ke,meta:l})};return de!=="pessimistic"&&setTimeout(()=>{Ae()}),new Promise((Ke,Pt)=>{if(de!=="pessimistic"&&Ke(),!!_)return pr({values:pe,resource:_.name,successNotification:s,errorNotification:i,meta:h(f,l),metaData:h(f,l),dataProviderName:T,invalidates:u},{onSuccess:(Se,qe,et)=>{var Qt;o&&o(Se,pe,et);let tt=(Qt=Se==null?void 0:Se.data)==null?void 0:Qt.id;Ae(tt),Ke(Se)},onError:(Se,qe,et)=>{if(n)return n(Se,pe,et);Pt()}})})}}:{formLoading:Ue||cr,mutationResult:Tt,onFinish:async pe=>{if(Ye(!1),!_)return;let Ae={id:O!=null?O:"",values:pe,resource:_.name,mutationMode:de,undoableTimeout:L,successNotification:s,errorNotification:i,meta:h(f,l),metaData:h(f,l),dataProviderName:T,invalidates:u},Ke=()=>{Je({redirect:at,resource:_,id:O,meta:l})};return de!=="pessimistic"&&setTimeout(()=>{Ke()}),new Promise((Pt,Se)=>(de!=="pessimistic"&&Pt(),setTimeout(()=>{we(Ae,{onSuccess:(qe,et,tt)=>{o&&o(qe,pe,tt),de==="pessimistic"&&Ke(),Pt(qe)},onError:(qe,et,tt)=>{if(n)return n(qe,pe,tt);Se()}})})))}},queryResult:Ie,id:O,setId:S,redirect:(pe,Ae)=>{Je({redirect:pe!==void 0?pe:te?"list":"edit",resource:_,id:Ae!=null?Ae:O,meta:l})}}};var ks=require("react");var _o=()=>{let{show:e,edit:t,list:r,create:o}=oe();return(0,ks.useCallback)(({redirect:a,resource:s,id:i,meta:f={}})=>{if(a&&s)return!!s.show&&a==="show"&&i?e(s,i,void 0,f):!!s.edit&&a==="edit"&&i?t(s,i,void 0,f):!!s.create&&a==="create"?o(s,void 0,f):r(s,"push",f)},[])};var jr=U(require("react")),ne=()=>{let e=(0,jr.useContext)(ze);return jr.default.useMemo(()=>{var o;return(o=e==null?void 0:e.go)!=null?o:()=>()=>{}},[e==null?void 0:e.go])()};var _r=U(require("react")),Zr=()=>{let e=(0,_r.useContext)(ze);return _r.default.useMemo(()=>{var o;return(o=e==null?void 0:e.back)!=null?o:()=>()=>{}},[e==null?void 0:e.back])()};var oe=()=>{let{resources:e}=Q(),t=K(),{useHistory:r}=z(),o=r(),n=Z(),a=ne(),s=Zr(),i=(g,d="push")=>{t==="legacy"?o[d](g):a({to:g,type:d})},f=(g,d={})=>{var C,D,E;if(t==="legacy"){let M=typeof g=="string"?(C=$(g,e,!0))!=null?C:{name:g,route:g}:g,I=ce(M,e,!0).find(A=>A.action==="create");return I?fe(I.route,n,d):""}else{let M=typeof g=="string"?(D=$(g,e))!=null?D:{name:g}:g,I=(E=ce(M,e).find(A=>A.action==="create"))==null?void 0:E.route;return I?a({to:fe(I,n,d),type:"path"}):""}},l=(g,d,C={})=>{var E,M,I;let D=encodeURIComponent(d);if(t==="legacy"){let A=typeof g=="string"?(E=$(g,e,!0))!=null?E:{name:g,route:g}:g,w=ce(A,e,!0).find(k=>k.action==="edit");return w?fe(w.route,n,{...C,id:D}):""}else{let A=typeof g=="string"?(M=$(g,e))!=null?M:{name:g}:g,w=(I=ce(A,e).find(k=>k.action==="edit"))==null?void 0:I.route;return w?a({to:fe(w,n,{...C,id:D}),type:"path"}):""}},y=(g,d,C={})=>{var E,M,I;let D=encodeURIComponent(d);if(t==="legacy"){let A=typeof g=="string"?(E=$(g,e,!0))!=null?E:{name:g,route:g}:g,w=ce(A,e,!0).find(k=>k.action==="clone");return w?fe(w.route,n,{...C,id:D}):""}else{let A=typeof g=="string"?(M=$(g,e))!=null?M:{name:g}:g,w=(I=ce(A,e).find(k=>k.action==="clone"))==null?void 0:I.route;return w?a({to:fe(w,n,{...C,id:D}),type:"path"}):""}},p=(g,d,C={})=>{var E,M,I;let D=encodeURIComponent(d);if(t==="legacy"){let A=typeof g=="string"?(E=$(g,e,!0))!=null?E:{name:g,route:g}:g,w=ce(A,e,!0).find(k=>k.action==="show");return w?fe(w.route,n,{...C,id:D}):""}else{let A=typeof g=="string"?(M=$(g,e))!=null?M:{name:g}:g,w=(I=ce(A,e).find(k=>k.action==="show"))==null?void 0:I.route;return w?a({to:fe(w,n,{...C,id:D}),type:"path"}):""}},R=(g,d={})=>{var C,D,E;if(t==="legacy"){let M=typeof g=="string"?(C=$(g,e,!0))!=null?C:{name:g,route:g}:g,I=ce(M,e,!0).find(A=>A.action==="list");return I?fe(I.route,n,d):""}else{let M=typeof g=="string"?(D=$(g,e))!=null?D:{name:g}:g,I=(E=ce(M,e).find(A=>A.action==="list"))==null?void 0:E.route;return I?a({to:fe(I,n,d),type:"path"}):""}};return{create:(g,d="push",C={})=>{i(f(g,C),d)},createUrl:f,edit:(g,d,C="push",D={})=>{i(l(g,d,D),C)},editUrl:l,clone:(g,d,C="push",D={})=>{i(y(g,d,D),C)},cloneUrl:y,show:(g,d,C="push",D={})=>{i(p(g,d,D),C)},showUrl:p,list:(g,d="push",C={})=>{i(R(g,C),d)},listUrl:R,push:(g,...d)=>{t==="legacy"?o.push(g,...d):a({to:g,type:"push"})},replace:(g,...d)=>{t==="legacy"?o.replace(g,...d):a({to:g,type:"replace"})},goBack:()=>{t==="legacy"?o.goBack():s()}}};var Yr=U(require("react")),Qs=U(require("warn-once"));var Ka=({resource:e,id:t,successNotification:r,errorNotification:o,meta:n,metaData:a,liveMode:s,onLiveEvent:i,dataProviderName:f,queryOptions:l}={})=>{let y=K(),{resources:p}=Q(),{useParams:R}=z(),{resource:P,id:L}=Z(),{resource:T,id:u}=R(),m=P==null?void 0:P.name,x=!e||e===(y==="legacy"?T:m)?t!=null?t:y==="legacy"?u:L:t,[b,v]=(0,Yr.useState)(x);Yr.default.useEffect(()=>{v(x)},[x]);let g=e!=null?e:y==="legacy"?T:m,d,C=je();if(y==="legacy")g&&(d=C(g));else if(e){let E=$(e,p);E?d=E:d={name:e,route:e}}else if(typeof P=="string"){let E=$(P,p);E?d=E:d={name:P,route:P}}else d=P;return(0,Qs.default)(Boolean(e)&&!Boolean(t),`[useShow]: resource: "${g}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`),{queryResult:vt({resource:d==null?void 0:d.name,id:b!=null?b:"",queryOptions:{enabled:b!==void 0,...l},successNotification:r,errorNotification:o,meta:h(n,a),metaData:h(n,a),liveMode:s,onLiveEvent:i,dataProviderName:f}),showId:b,setShowId:v}};var Ut=require("react"),Bs=require("papaparse"),Vs=U(require("lodash/chunk"));var Ha=({resourceName:e,resource:t,mapData:r=y=>y,paparseOptions:o,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:a,meta:s,metaData:i,onProgress:f,dataProviderName:l}={})=>{let[y,p]=(0,Ut.useState)(0),[R,P]=(0,Ut.useState)(0),[L,T]=(0,Ut.useState)(!1),{resource:u}=Q(t!=null?t:e),m=Ar(),x=Lt(),b;n===1?b=x:b=m;let v=()=>{P(0),p(0),T(!1)},g=C=>{let D={succeeded:C.filter(E=>E.type==="success"),errored:C.filter(E=>E.type==="error")};a==null||a(D),T(!1)};(0,Ut.useEffect)(()=>{f==null||f({totalAmount:R,processedAmount:y})},[R,y]);let d=({file:C})=>(v(),new Promise(D=>{T(!0),(0,Bs.parse)(C,{complete:async({data:E})=>{let M=Ot(E,r);if(P(M.length),n===1){let I=M.map(w=>async()=>{var O;return{response:await x.mutateAsync({resource:(O=u==null?void 0:u.name)!=null?O:"",values:w,successNotification:!1,errorNotification:!1,dataProviderName:l,meta:h(s,i),metaData:h(s,i)}),value:w}}),A=await br(I,({response:w,value:k})=>(p(N=>N+1),{response:[w.data],type:"success",request:[k]}),(w,k)=>({response:[w],type:"error",request:[M[k]]}));D(A)}else{let I=(0,Vs.default)(M,n),A=I.map(k=>async()=>{var S;return{response:await m.mutateAsync({resource:(S=u==null?void 0:u.name)!=null?S:"",values:k,successNotification:!1,errorNotification:!1,dataProviderName:l,meta:h(s,i),metaData:h(s,i)}),value:k,currentBatchLength:k.length}}),w=await br(A,({response:k,currentBatchLength:N,value:O})=>(p(S=>S+N),{response:k.data,type:"success",request:O}),(k,N)=>({response:[k],type:"error",request:I[N]}));D(w)}},...o})}).then(D=>(g(D),D)));return{inputProps:{type:"file",accept:".csv",onChange:C=>{C.target.files&&C.target.files.length>0&&d({file:C.target.files[0]})}},mutationResult:b,isLoading:L,handleChange:d}};var rr=require("react"),Wa=({defaultVisible:e=!1}={})=>{let[t,r]=(0,rr.useState)(e),o=(0,rr.useCallback)(()=>r(!0),[t]),n=(0,rr.useCallback)(()=>r(!1),[t]);return{visible:t,show:o,close:n}};var Ns=U(require("react"));var wt=()=>{let e=K(),{resource:t,resources:r}=Q(),o=Z();return Ns.default.useCallback(({resource:a,action:s,meta:i})=>{var R;let f=a||t;if(!f)return;let y=(R=ce(f,r,e==="legacy").find(P=>P.action===s))==null?void 0:R.route;return y?fe(y,o,i):void 0},[r,t,o])};var Fs=({resource:e,action:t,meta:r,legacy:o})=>wt()({resource:e,action:t,meta:r,legacy:o});var Jr=U(require("react")),rt=()=>{let e=(0,Jr.useContext)(ze);return e!=null&&e.Link?e.Link:({to:r,...o})=>Jr.default.createElement("a",{href:r,...o})};var Ks=require("react");var Zo=U(require("react")),_e={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},$a=Zo.default.createContext(_e),or=$a,Os=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s})=>Zo.default.createElement(or.Provider,{value:{useHistory:t!=null?t:_e.useHistory,useLocation:r!=null?r:_e.useLocation,useParams:o!=null?o:_e.useParams,Prompt:n!=null?n:_e.Prompt,Link:a!=null?a:_e.Link,routes:s!=null?s:_e.routes}},e);var z=()=>{let e=(0,Ks.useContext)(or),{useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s}=e!=null?e:_e;return{useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s}};var $s=require("@tanstack/react-query"),Gs=require("react");var Yo=U(require("react"));var lt=Yo.default.createContext({}),Hs=({can:e,children:t})=>Yo.default.createElement(lt.Provider,{value:{can:e}},t);var Ws=e=>{let{icon:t,list:r,edit:o,create:n,show:a,clone:s,children:i,meta:f,options:l,...y}=e,{icon:p,...R}=f!=null?f:{},{icon:P,...L}=l!=null?l:{};return{...y,...f?{meta:R}:{},...l?{options:L}:{}}};var Jo=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:n}=(0,Gs.useContext)(lt),{resource:a,...s}=r!=null?r:{},i=Ws(a!=null?a:{}),f=(0,$s.useQuery)(["useCan",{action:e,resource:t,params:{...s,resource:i},enabled:o==null?void 0:o.enabled}],()=>{var l;return(l=n==null?void 0:n({action:e,resource:t,params:s}))!=null?l:Promise.resolve({can:!0})},{enabled:typeof n<"u",...o,retry:!1});return typeof n>"u"?{data:{can:!0}}:f};var zs=require("react");var Ga=()=>{let{can:e}=(0,zs.useContext)(lt);return{can:e}};var Ze=require("react"),js=U(require("lodash/uniqBy")),_s=U(require("lodash/debounce")),nr=U(require("lodash/get"));var za=e=>{var Oe,de,st;let[t,r]=(0,Ze.useState)([]),[o,n]=(0,Ze.useState)([]),[a,s]=(0,Ze.useState)([]),{resource:i,sort:f,sorters:l,filters:y=[],optionLabel:p="title",optionValue:R="id",debounce:P=300,successNotification:L,errorNotification:T,defaultValueQueryOptions:u,queryOptions:m,fetchSize:x,pagination:b,hasPagination:v=!1,liveMode:g,defaultValue:d=[],onLiveEvent:C,onSearch:D,liveParams:E,meta:M,metaData:I,dataProviderName:A}=e,{resources:w}=Q(),k=$(i,w),N=(Oe=k==null?void 0:k.name)!=null?Oe:i,O=Array.isArray(d)?d:[d],S=(0,Ze.useCallback)(te=>{s(te.data.map(le=>({label:(0,nr.default)(le,p),value:(0,nr.default)(le,R)})))},[p,R]),F=u!=null?u:m,H=Er({resource:N,ids:O,queryOptions:{...F,enabled:O.length>0&&((de=u==null?void 0:u.enabled)!=null?de:!0),onSuccess:te=>{var le;S(te),(le=F==null?void 0:F.onSuccess)==null||le.call(F,te)}},meta:h(M,I),metaData:h(M,I),liveMode:"off",dataProviderName:A}),Pe=(0,Ze.useCallback)(te=>{n(te.data.map(le=>({label:(0,nr.default)(le,p),value:(0,nr.default)(le,R)})))},[p,R]),Me=bt({resource:N,sorters:h(l,f),filters:y.concat(t),pagination:{current:b==null?void 0:b.current,pageSize:(st=b==null?void 0:b.pageSize)!=null?st:x,mode:b==null?void 0:b.mode},hasPagination:v,queryOptions:{...m,onSuccess:te=>{var le;Pe(te),(le=m==null?void 0:m.onSuccess)==null||le.call(m,te)}},successNotification:L,errorNotification:T,meta:h(M,I),metaData:h(M,I),liveMode:g,liveParams:E,onLiveEvent:C,dataProviderName:A}),_=te=>{if(D){r(D(te));return}if(te)r([{field:p,operator:"contains",value:te}]);else{r([]);return}};return{queryResult:Me,defaultValueQueryResult:H,options:(0,Ze.useMemo)(()=>(0,js.default)([...o,...a],"value"),[o,a]),onSearch:(0,_s.default)(_,P)}};var Ne=U(require("react")),Xo=U(require("qs")),sr=U(require("lodash/differenceWith")),ar=U(require("lodash/isEqual")),Js=U(require("warn-once"));var Zs=[],Ys=[];function ja({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:o,initialSorter:n,permanentSorter:a=Ys,defaultSetFilterBehavior:s,initialFilter:i,permanentFilter:f=Zs,filters:l,sorters:y,syncWithLocation:p,resource:R,successNotification:P,errorNotification:L,queryOptions:T,liveMode:u,onLiveEvent:m,liveParams:x,meta:b,metaData:v,dataProviderName:g}={}){var tt,Qt,on,nn,sn,an,un,pn,cn,dn;let{syncWithLocation:d}=zr(),C=p!=null?p:d,D=Ko(u),E=K(),{useLocation:M}=z(),{search:I,pathname:A}=M(),w=Z(),k=r===!1?"off":"server",N=((tt=o==null?void 0:o.mode)!=null?tt:k)!=="off",O=h(o==null?void 0:o.current,e),S=h(o==null?void 0:o.pageSize,t),F=h(b,v),{parsedCurrent:H,parsedPageSize:Pe,parsedSorter:Me,parsedFilters:_}=Kt(I!=null?I:"?"),Oe=h(l==null?void 0:l.initial,i),de=(Qt=h(l==null?void 0:l.permanent,f))!=null?Qt:Zs,st=h(y==null?void 0:y.initial,n),te=(on=h(y==null?void 0:y.permanent,a))!=null?on:Ys,le=(nn=h(l==null?void 0:l.defaultBehavior,s))!=null?nn:"merge",at,gt,Ie,Ue;C?(at=((sn=w==null?void 0:w.params)==null?void 0:sn.current)||H||O||1,gt=((an=w==null?void 0:w.params)==null?void 0:an.pageSize)||Pe||S||10,Ie=((un=w==null?void 0:w.params)==null?void 0:un.sorters)||(Me.length?Me:st),Ue=((pn=w==null?void 0:w.params)==null?void 0:pn.filters)||(_.length?_:Oe)):(at=O||1,gt=S||10,Ie=st,Ue=Oe);let{replace:Rt}=oe(),pr=ne(),{resource:kt}=Q(R),Tt=kt==null?void 0:kt.name;Ne.default.useEffect(()=>{(0,Js.default)(typeof Tt>"u","useTable: `resource` is not defined.")},[Tt]);let[we,cr]=(0,Ne.useState)(Gt(te,Ie!=null?Ie:[])),[Ye,Je]=(0,Ne.useState)($t(de,Ue!=null?Ue:[])),[xt,ro]=(0,Ne.useState)(at),[Xe,oo]=(0,Ne.useState)(gt),rn=({pagination:{current:ie,pageSize:Ee},sorter:dr,filters:lr})=>{var mr;if(E==="new")return(mr=pr({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...N?{current:ie,pageSize:Ee}:{},sorters:dr,filters:lr,...pe()}}))!=null?mr:"";{let Bt=Xo.default.parse(I==null?void 0:I.substring(1)),no=Ht({pagination:{pageSize:Ee,current:ie},sorters:we!=null?we:dr,filters:lr,...Bt});return`${A!=null?A:""}?${no!=null?no:""}`}};(0,Ne.useEffect)(()=>{I===""&&(ro(at),oo(gt),cr(Gt(te,Ie!=null?Ie:[])),Je($t(de,Ue!=null?Ue:[])))},[I]);let pe=()=>{var ie;if(E==="new"){let{sorters:Ee,filters:dr,pageSize:lr,current:mr,...Bt}=(ie=w==null?void 0:w.params)!=null?ie:{};return Bt}else{let{sorter:Ee,filters:dr,pageSize:lr,current:mr,...Bt}=Xo.default.parse(I,{ignoreQueryPrefix:!0});return Bt}};(0,Ne.useEffect)(()=>{if(C){let ie=pe();if(E==="new")pr({type:"replace",options:{keepQuery:!0},query:{...N?{pageSize:Xe,current:xt}:{},sorters:(0,sr.default)(we,te,ar.default),filters:(0,sr.default)(Ye,de,ar.default)}});else{let Ee=Ht({...N?{pagination:{pageSize:Xe,current:xt}}:{},sorters:(0,sr.default)(we,te,ar.default),filters:(0,sr.default)(Ye,de,ar.default),...ie});return Rt==null?void 0:Rt(`${A}?${Ee}`,void 0,{shallow:!0})}}},[C,xt,Xe,we,Ye]);let Ae=bt({resource:Tt,hasPagination:r,pagination:{current:xt,pageSize:Xe,mode:o==null?void 0:o.mode},filters:ut(de,Ye),sorters:Wt(te,we),queryOptions:T,successNotification:P,errorNotification:L,meta:F,metaData:F,liveMode:D,liveParams:x,onLiveEvent:m,dataProviderName:g}),Ke=ie=>{Je(Ee=>ut(de,ie,Ee))},Pt=ie=>{Je(ut(de,ie))},Se=ie=>{Je(Ee=>ut(de,ie(Ee)))},qe=(ie,Ee=le)=>{typeof ie=="function"?Se(ie):Ee==="replace"?Pt(ie):Ke(ie)},et=ie=>{cr(()=>Wt(te,ie))};return{tableQueryResult:Ae,sorters:we,setSorters:et,sorter:we,setSorter:et,filters:Ye,setFilters:qe,current:xt,setCurrent:ro,pageSize:Xe,setPageSize:oo,pageCount:Xe?Math.ceil(((dn=(cn=Ae.data)==null?void 0:cn.total)!=null?dn:0)/Xe):1,createLinkForSyncWithLocation:rn}}var en=require("react"),ir=require("@tanstack/react-query");var qo=U(require("react")),mt=qo.default.createContext({}),Xs=({create:e,get:t,update:r,children:o})=>qo.default.createElement(mt.Provider,{value:{create:e,get:t,update:r}},o);var ve=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,ir.useQueryClient)(),o=(0,en.useContext)(mt),n=W(),{resources:a}=(0,en.useContext)(Ge),{data:s,refetch:i,isLoading:f}=yr({v3LegacyAuthProviderCompatible:Boolean(n==null?void 0:n.isLegacy),queryOptions:{enabled:!!o}}),l=(0,ir.useMutation)(async p=>{var T,u,m,x,b;let R=$(p.resource,a),P=h((T=R==null?void 0:R.meta)==null?void 0:T.audit,(u=R==null?void 0:R.options)==null?void 0:u.audit,(x=(m=R==null?void 0:R.options)==null?void 0:m.auditLog)==null?void 0:x.permissions);if(P&&!vo(P,p.action))return;let L;return f&&(L=await i()),await((b=o.create)==null?void 0:b.call(o,{...p,author:s!=null?s:L==null?void 0:L.data}))},e),y=(0,ir.useMutation)(async p=>{var R;return await((R=o.update)==null?void 0:R.call(o,p))},{onSuccess:p=>{if(p!=null&&p.resource){let R=X(p==null?void 0:p.resource);r.invalidateQueries(R.logList())}},...t});return{log:l,rename:y}};var qs=require("react"),ea=require("@tanstack/react-query");var _a=({resource:e,action:t,meta:r,author:o,metaData:n,queryOptions:a})=>{let{get:s}=(0,qs.useContext)(mt),i=X(e,void 0,n);return(0,ea.useQuery)(i.logList(r),()=>{var l;return(l=s==null?void 0:s({resource:e,action:t,author:o,meta:r,metaData:n}))!=null?l:Promise.resolve([])},{enabled:typeof s<"u",...a,retry:!1})};var ta=require("react"),ra=require("@tanstack/react-query");var De=()=>{let{resources:e}=Q(),t=(0,ra.useQueryClient)();return(0,ta.useCallback)(({resource:o,dataProviderName:n,invalidates:a,id:s})=>{if(a===!1)return;let i=X(o,B(o,n,e));a.forEach(f=>{switch(f){case"all":t.invalidateQueries(i.all);break;case"list":t.invalidateQueries(i.list());break;case"many":t.invalidateQueries(i.many());break;case"resourceAll":t.invalidateQueries(i.resourceAll);break;case"detail":t.invalidateQueries(i.detail(s||""));break;default:break}})},[])};var oa=require("react"),na=U(require("warn-once"));var Za=({meta:e={}}={})=>{let t=K(),{i18nProvider:r}=(0,oa.useContext)(Qe),o=Z(),n=V(),{resources:a,resource:s,action:i}=Q(),f=[];if(!(s!=null&&s.name))return{breadcrumbs:f};let l=y=>{var R,P,L,T,u,m,x,b;let p=typeof y=="string"?(R=$(y,a,t==="legacy"))!=null?R:{name:y}:y;if(p){let v=h((P=p==null?void 0:p.meta)==null?void 0:P.parent,p==null?void 0:p.parentName);v&&l(v);let g=ce(p,a,t==="legacy").find(D=>D.action==="list"),d=(L=g==null?void 0:g.resource)!=null&&L.list?g==null?void 0:g.route:void 0,C=d?t==="legacy"?d:fe(d,o,e):void 0;f.push({label:(m=h((T=p.meta)==null?void 0:T.label,(u=p.options)==null?void 0:u.label))!=null?m:n(`${p.name}.${p.name}`,ct(p.name)),href:C,icon:h((x=p.meta)==null?void 0:x.icon,(b=p.options)==null?void 0:b.icon,p.icon)})}};if(l(s),i&&i!=="list"){let y=`actions.${i}`,p=n(y);typeof r<"u"&&p===y?((0,na.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${i}" action. Please add "actions.${i}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),f.push({label:n(`buttons.${i}`,ct(i))})):f.push({label:n(y,ct(i))})}return{breadcrumbs:f}};var Xr=U(require("react"));var At=(e,t,r=!1)=>{let o=[],n=he(e,t);for(;n;)o.push(n),n=he(n,t);return o.reverse(),`/${[...o,e].map(s=>{var i,f;return me((f=(i=r?s.route:void 0)!=null?i:s.identifier)!=null?f:s.name)}).join("/").replace(/^\//,"")}`};var sa=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{var l,y;let a=[],s=he(n,e);for(;s;)a.push(s),s=he(s,e);a.reverse();let i=r;a.forEach(p=>{var P,L;let R=(L=(P=t?p.route:void 0)!=null?P:p.identifier)!=null?L:p.name;i.children[R]||(i.children[R]={item:p,children:{}}),i=i.children[R]});let f=(y=(l=t?n.route:void 0)!=null?l:n.identifier)!=null?y:n.name;i.children[f]||(i.children[f]={item:n,children:{}})});let o=n=>{let a=[];return Object.keys(n.children).forEach(s=>{let i=At(n.children[s].item,e,t),f={...n.children[s].item,key:i,children:o(n.children[s])};a.push(f)}),a};return o(r)};var aa=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),ia=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=V(),o=wt(),n=K(),{resource:a,resources:s}=Q(),{pathname:i}=Z(),{useLocation:f}=z(),{pathname:l}=f(),y=n==="legacy"?aa(l):i?aa(i):void 0,p=`/${(y!=null?y:"").replace(/^\//,"")}`,R=a?At(a,s,n==="legacy"):p!=null?p:"",P=Xr.default.useMemo(()=>{if(!a)return[];let u=he(a,s),m=[At(a,s)];for(;u;)m.push(At(u,s)),u=he(u,s);return m},[]),L=Xr.default.useCallback(u=>{var x,b,v,g,d,C,D,E;if(((v=(x=u==null?void 0:u.meta)==null?void 0:x.hide)!=null?v:(b=u==null?void 0:u.options)==null?void 0:b.hide)||!(u!=null&&u.list)&&u.children.length===0)return;let m=u.list?o({resource:u,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&m&&m.match(/(\/|^):(.+?)(\/|$){1}/)))return{...u,route:m,icon:h((g=u.meta)==null?void 0:g.icon,(d=u.options)==null?void 0:d.icon,u.icon),label:(E=h((C=u==null?void 0:u.meta)==null?void 0:C.label,(D=u==null?void 0:u.options)==null?void 0:D.label))!=null?E:r(`${u.name}.${u.name}`,pt(u.name,"plural"))}},[n,e,r,t]),T=Xr.default.useMemo(()=>{let u=sa(s,n==="legacy"),m=x=>x.flatMap(b=>{let v=m(b.children),g=L({...b,children:v});return g?[g]:[]});return m(u)},[s,n,L]);return{defaultOpenKeys:P,selectedKey:R,menuItems:T}};var ua=()=>{let[e,t]=(0,Fe.useState)(),r=V(),{push:o}=oe(),n=ne(),a=K(),{resource:s,action:i}=Q();return(0,Fe.useEffect)(()=>{s&&i&&t(r("pages.error.info",{action:i,resource:s==null?void 0:s.name},`You may have forgotten to add the "${i}" component to "${s==null?void 0:s.name}" resource.`))},[s,i]),Fe.default.createElement(Fe.default.Fragment,null,Fe.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Fe.default.createElement("p",null,e),Fe.default.createElement("button",{onClick:()=>{a==="legacy"?o("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))};var ue=U(require("react"));var hr=()=>{let[e,t]=(0,ue.useState)(""),[r,o]=(0,ue.useState)(""),n=V(),a=W(),{mutate:s}=ht({v3LegacyAuthProviderCompatible:Boolean(a==null?void 0:a.isLegacy)});return ue.default.createElement(ue.default.Fragment,null,ue.default.createElement("h1",null,n("pages.login.title","Sign in your account")),ue.default.createElement("form",{onSubmit:i=>{i.preventDefault(),s({username:e,password:r})}},ue.default.createElement("table",null,ue.default.createElement("tbody",null,ue.default.createElement("tr",null,ue.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),ue.default.createElement("td",null,ue.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:i=>t(i.target.value)}))),ue.default.createElement("tr",null,ue.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),ue.default.createElement("td",null,ue.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:i=>o(i.target.value)}))))),ue.default.createElement("br",null),ue.default.createElement("input",{type:"submit",value:"login"})))};var ft=U(require("react"));var Y=U(require("react"));var pa=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:n,wrapperProps:a,renderContent:s,formProps:i,title:f=void 0})=>{let l=K(),y=rt(),{Link:p}=z(),R=l==="legacy"?p:y,[P,L]=(0,Y.useState)(""),[T,u]=(0,Y.useState)(""),[m,x]=(0,Y.useState)(!1),b=V(),v=W(),{mutate:g}=ht({v3LegacyAuthProviderCompatible:Boolean(v==null?void 0:v.isLegacy)}),d=(E,M)=>E?typeof E=="string"?Y.default.createElement(R,{to:E},M):E:null,C=()=>e?e.map(E=>{var M;return Y.default.createElement("div",{key:E.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},Y.default.createElement("button",{onClick:()=>g({providerName:E.name}),style:{display:"flex",alignItems:"center"}},E==null?void 0:E.icon,(M=E.label)!=null?M:Y.default.createElement("label",null,E.label)))}):null,D=Y.default.createElement("div",{...n},Y.default.createElement("h1",{style:{textAlign:"center"}},b("pages.login.title","Sign in to your account")),C(),Y.default.createElement("hr",null),Y.default.createElement("form",{onSubmit:E=>{E.preventDefault(),g({email:P,password:T,remember:m})},...i},Y.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Y.default.createElement("label",null,b("pages.login.fields.email","Email")),Y.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:P,onChange:E=>L(E.target.value)}),Y.default.createElement("label",null,b("pages.login.fields.password","Password")),Y.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:T,onChange:E=>u(E.target.value)}),o!=null?o:Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("label",null,b("pages.login.buttons.rememberMe","Remember me"),Y.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:m,value:m.toString(),onChange:()=>{x(!m)}}))),Y.default.createElement("br",null),r!=null?r:d("/forgot-password",b("pages.login.buttons.forgotPassword","Forgot password?")),Y.default.createElement("input",{type:"submit",value:b("pages.login.signin","Sign in")}),t!=null?t:Y.default.createElement("span",null,b("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",d("/register",b("pages.login.register","Sign up"))))));return Y.default.createElement("div",{...a},s?s(D,f):D)};var ae=U(require("react"));var ca=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:n,formProps:a,title:s=void 0})=>{let i=K(),f=rt(),{Link:l}=z(),y=i==="legacy"?l:f,[p,R]=(0,ae.useState)(""),[P,L]=(0,ae.useState)(""),T=V(),u=W(),{mutate:m,isLoading:x}=gr({v3LegacyAuthProviderCompatible:Boolean(u==null?void 0:u.isLegacy)}),b=(d,C)=>d?typeof d=="string"?ae.default.createElement(y,{to:d},C):d:null,v=()=>e?e.map(d=>{var C;return ae.default.createElement("div",{key:d.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ae.default.createElement("button",{onClick:()=>m({providerName:d.name}),style:{display:"flex",alignItems:"center"}},d==null?void 0:d.icon,(C=d.label)!=null?C:ae.default.createElement("label",null,d.label)))}):null,g=ae.default.createElement("div",{...o},ae.default.createElement("h1",{style:{textAlign:"center"}},T("pages.register.title","Sign up for your account")),v(),ae.default.createElement("hr",null),ae.default.createElement("form",{onSubmit:d=>{d.preventDefault(),m({email:p,password:P})},...a},ae.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ae.default.createElement("label",null,T("pages.register.fields.email","Email")),ae.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:p,onChange:d=>R(d.target.value)}),ae.default.createElement("label",null,T("pages.register.fields.password","Password")),ae.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:P,onChange:d=>L(d.target.value)}),ae.default.createElement("input",{type:"submit",value:T("pages.register.buttons.submit","Sign up"),disabled:x}),t!=null?t:ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("span",null,T("pages.login.buttons.haveAccount","Have an account?")," ",b("/login",T("pages.login.signin","Sign in")))))));return ae.default.createElement("div",{...r},n?n(g,s):g)};var Re=U(require("react"));var da=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:n,title:a=void 0})=>{let s=V(),i=K(),f=rt(),{Link:l}=z(),y=i==="legacy"?l:f,[p,R]=(0,Re.useState)(""),{mutate:P,isLoading:L}=Rr(),T=(m,x)=>m?typeof m=="string"?Re.default.createElement(y,{to:m},x):m:null,u=Re.default.createElement("div",{...r},Re.default.createElement("h1",{style:{textAlign:"center"}},s("pages.forgotPassword.title","Forgot your password?")),Re.default.createElement("hr",null),Re.default.createElement("form",{onSubmit:m=>{m.preventDefault(),P({email:p})},...n},Re.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Re.default.createElement("label",null,s("pages.forgotPassword.fields.email","Email")),Re.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:p,onChange:m=>R(m.target.value)}),Re.default.createElement("input",{type:"submit",disabled:L,value:s("pages.forgotPassword.buttons.submit","Send reset instructions")}),Re.default.createElement("br",null),e!=null?e:Re.default.createElement("span",null,s("pages.register.buttons.haveAccount","Have an account? ")," ",T("/login",s("pages.login.signin","Sign in"))))));return Re.default.createElement("div",{...t},o?o(u,a):u)};var Te=U(require("react"));var la=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o,title:n=void 0})=>{let a=V(),s=W(),{mutate:i,isLoading:f}=Tr({v3LegacyAuthProviderCompatible:Boolean(s==null?void 0:s.isLegacy)}),[l,y]=(0,Te.useState)(""),[p,R]=(0,Te.useState)(""),P=Te.default.createElement("div",{...t},Te.default.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),Te.default.createElement("hr",null),Te.default.createElement("form",{onSubmit:L=>{L.preventDefault(),i({password:l,confirmPassword:p})},...o},Te.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Te.default.createElement("label",null,a("pages.updatePassword.fields.password","New Password")),Te.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:l,onChange:L=>y(L.target.value)}),Te.default.createElement("label",null,a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),Te.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:p,onChange:L=>R(L.target.value)}),Te.default.createElement("input",{type:"submit",disabled:f,value:a("pages.updatePassword.buttons.submit","Update")}))));return Te.default.createElement("div",{...e},r?r(P,n):P)};var ma=e=>{let{type:t}=e;return ft.default.createElement(ft.default.Fragment,null,(()=>{switch(t){case"register":return ft.default.createElement(ca,{...e});case"forgotPassword":return ft.default.createElement(da,{...e});case"updatePassword":return ft.default.createElement(la,{...e});default:return ft.default.createElement(pa,{...e})}})())};var xe=U(require("react")),qr=()=>xe.default.createElement(xe.default.Fragment,null,xe.default.createElement("h1",null,"Welcome on board"),xe.default.createElement("p",null,"Your configuration is completed."),xe.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",xe.default.createElement("code",null,"`resources`")," property of ",xe.default.createElement("code",null,"`<Refine>`")),xe.default.createElement("div",{style:{display:"flex",gap:8}},xe.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Documentation")),xe.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Examples")),xe.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},xe.default.createElement("button",null,"Community"))));var G=U(require("react"));var Ya=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:G.default.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.default.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:G.default.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.default.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),G.default.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:G.default.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),G.default.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:G.default.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.default.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],fa=()=>{let e=Dr("(max-width: 1010px)"),t=Dr("(max-width: 650px)"),r=()=>t?"1, 280px":e?"2, 280px":"4, 208px",o=()=>t?"32px":e?"40px":"48px",n=()=>t?"16px":e?"20px":"24px";return G.default.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},G.default.createElement("div",{style:{height:"89px"}}),G.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},G.default.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),G.default.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),G.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},G.default.createElement("h1",{style:{fontSize:o(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),G.default.createElement("h4",{style:{fontSize:n(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),G.default.createElement("div",{style:{height:"64px"}}),G.default.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},Ya.map(a=>G.default.createElement(Ja,{key:`welcome-page-${a.title}`,card:a}))),G.default.createElement("div",{style:{height:"64px"}}))},Ja=({card:e})=>{let{title:t,description:r,icon:o,link:n}=e,[a,s]=(0,G.useState)(!1);return G.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},G.default.createElement("div",{style:{display:"flex",alignItems:"center"}},G.default.createElement("a",{onPointerEnter:()=>s(!0),onPointerLeave:()=>s(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:n},o,G.default.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),G.default.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...a&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},G.default.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),G.default.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))};var ee=U(require("react")),ur=require("@tanstack/react-query"),Pa=require("@tanstack/react-query-devtools");var ga=require("react");var ot=require("react");var Xa="4.7.2",ya=()=>{let e=xr(),t=(0,ot.useContext)(mt),r=(0,ot.useContext)($e),o=(0,ot.useContext)(or),n=(0,ot.useContext)(Xt),{i18nProvider:a}=(0,ot.useContext)(Qe),s=(0,ot.useContext)(er),i=(0,ot.useContext)(lt),{resources:f}=Q(),l=!!t.create||!!t.get||!!t.update,y=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),p=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,R=!!n,P=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),L=!!s.close||!!s.open,T=!!i.can;return{providers:{auth:e,auditLog:l,live:y,router:p,data:R,i18n:P,notification:L,accessControl:T},version:Xa,resourceCount:f.length}};var qa=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Ra=()=>{let e=ya();return(0,ga.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${qa(e)}`},[]),null};var Ta=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(n=>!t.includes(n));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1};var tn=U(require("react")),xa=e=>{let t=tn.default.useRef(!1);tn.default.useEffect(()=>{t.current===!1&&e&&Ta(e)&&(t.current=!0)},[e])};var Ca=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:o,routerProvider:n,notificationProvider:a,accessControlProvider:s,auditLogProvider:i,resources:f,DashboardPage:l,ReadyPage:y,LoginPage:p,catchAll:R,children:P,liveProvider:L,i18nProvider:T,Title:u,Layout:m,Sider:x,Header:b,Footer:v,OffLayoutArea:g,onLiveEvent:d,options:C})=>{let{optionsWithDefaults:D,disableTelemetryWithDefault:E,reactQueryWithDefaults:M}=wo({options:C}),I=Vr(()=>{var N;return M.clientConfig instanceof ur.QueryClient?M.clientConfig:new ur.QueryClient({...M.clientConfig,defaultOptions:{...M.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(N=M.clientConfig.defaultOptions)==null?void 0:N.queries}}})},[M.clientConfig]),w=ee.default.useMemo(()=>typeof a=="function"?a:()=>a!=null?a:{},[a])();if(xa(n),o&&!n&&(f!=null?f:[]).length===0)return y?ee.default.createElement(y,null):ee.default.createElement(qr,null);let{RouterComponent:k=ee.default.Fragment}=n?{}:o!=null?o:{};return ee.default.createElement(ur.QueryClientProvider,{client:I},ee.default.createElement(xs,{...w},ee.default.createElement(fn,{...e!=null?e:{},isProvided:Boolean(e)},ee.default.createElement(gn,{...t!=null?t:{},isProvided:Boolean(t)},ee.default.createElement(es,{...r},ee.default.createElement(os,{liveProvider:L},ee.default.createElement(ms,{value:o&&!n?"legacy":"new"},ee.default.createElement(ys,{router:n},ee.default.createElement(Os,{...o},ee.default.createElement(ds,{resources:f!=null?f:[]},ee.default.createElement(hs,{i18nProvider:T},ee.default.createElement(Hs,{...s!=null?s:{}},ee.default.createElement(Xs,{...i!=null?i:{}},ee.default.createElement(So,null,ee.default.createElement(Bn,{mutationMode:D.mutationMode,warnWhenUnsavedChanges:D.warnWhenUnsavedChanges,syncWithLocation:D.syncWithLocation,Title:u,undoableTimeout:D.undoableTimeout,catchAll:R,DashboardPage:l,LoginPage:p,Layout:m,Sider:x,Footer:v,Header:b,OffLayoutArea:g,hasDashboard:!!l,liveMode:D.liveMode,onLiveEvent:d,options:D},ee.default.createElement(Es,null,ee.default.createElement(k,null,P,!E&&ee.default.createElement(Ra,null),ee.default.createElement(eo,null))))))))))))))))),M.devtoolConfig===!1?null:ee.default.createElement(Pa.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...M.devtoolConfig}))};var to=require("react");var ko=({notification:e})=>{let t=V(),{notificationDispatch:r}=ke(),{open:o}=ye(),[n,a]=(0,to.useState)(),s=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Ft(e.seconds)},`You have ${Ft(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Ft(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let i=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(i)}};return(0,to.useEffect)(()=>{s()},[e]),null};var St=U(require("react"));var ha=({children:e,Layout:t,Sider:r,Header:o,Title:n,Footer:a,OffLayoutArea:s})=>{let{Layout:i,Footer:f,Header:l,Sider:y,Title:p,OffLayoutArea:R}=It(),P=t!=null?t:i;return St.default.createElement(P,{Sider:r!=null?r:y,Header:o!=null?o:l,Footer:a!=null?a:f,Title:n!=null?n:p,OffLayoutArea:s!=null?s:R},e,St.default.createElement(ei,null))},ei=()=>{let{Prompt:e}=z(),t=V(),{warnWhen:r,setWarnWhen:o}=Mt(),n=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return(0,St.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),St.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};var Ce=U(require("react"));var ti=()=>{let e=ne(),[t,r]=Ce.default.useState(void 0);return Ce.default.useEffect(()=>{t&&e(t)},[t]),Ce.default.useCallback(n=>{t||r(n)},[t])};function ba({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:o,loading:n}){var D;let a=W(),s=K(),i=Boolean(a==null?void 0:a.isProvided),f=Boolean(a==null?void 0:a.isLegacy),l=s==="legacy",y=Z(),p=ne(),R=ti(),{replace:P}=oe(),{useLocation:L}=z(),T=L(),{isLoading:u,isFetching:m,isSuccess:x,data:{authenticated:b,redirectTo:v}={},refetch:g}=Nt({v3LegacyAuthProviderCompatible:f});Ce.default.useEffect(()=>{g()},[r,o]);let d=Ce.default.useRef({status:u?"initial":"pending",content:n!=null?n:null});m?d.current.status="pending":m||(d.current.status="settled");let C=i?f?x:b:!0;if(d.current.status==="settled")if(C)d.current.content=Ce.default.createElement(Ce.default.Fragment,null,r!=null?r:null);else if(typeof o<"u")d.current.content=Ce.default.createElement(Ce.default.Fragment,null,o);else{let E=`${l?T==null?void 0:T.pathname:y.pathname}`.replace(/(\?.*|#.*)$/,""),M=f?typeof e=="string"?e:"/login":typeof e=="string"?e:v;if(M)if(l){let I=t?`?to=${encodeURIComponent(E)}`:"";P(`${M}${I}`)}else R({to:M,query:t?{to:(D=y.params)!=null&&D.to?y.params.to:p({to:E,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return i?Ce.default.createElement(Ce.default.Fragment,null,d.current.content):Ce.default.createElement(Ce.default.Fragment,null,r!=null?r:null)}var va=require("react");var eo=()=>{let{useLocation:e}=z(),{checkAuth:t}=re(),r=e();return(0,va.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};var yt=U(require("react"));var Da=({resource:e,action:t,params:r,fallback:o,children:n,...a})=>{var g,d;let s=K(),{resources:i}=Q(),{useParams:f}=z(),{resource:l,id:y,action:p}=Z(),{resource:R,id:P,action:L}=f(),T=l==null?void 0:l.name,u=!e||e===(s==="legacy"?R:T)?(g=r==null?void 0:r.id)!=null?g:s==="legacy"?P:y:r==null?void 0:r.id,m=e!=null?e:s==="legacy"?R:T,x,b=je();if(s==="legacy")m&&(x=b(m));else if(e){let C=$(e,i);C?x=C:x={name:e,route:e}}else if(typeof l=="string"){let C=$(l,i);C?x=C:x={name:l,route:l}}else x=l;let{data:v}=Jo({resource:e!=null?e:x==null?void 0:x.name,action:(d=t!=null?t:s==="legacy"?L:p)!=null?d:"",params:r!=null?r:{id:u,resource:x}});return v!=null&&v.can?yt.default.isValidElement(n)?yt.default.cloneElement(n,a):yt.default.createElement(yt.default.Fragment,null,n):(v==null?void 0:v.can)===!1?yt.default.createElement(yt.default.Fragment,null,o!=null?o:null):null};var nt=U(require("react"));var Ea=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var La=()=>((0,nt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),Ea.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),nt.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},nt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},nt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},nt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),nt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));
//# sourceMappingURL=index.js.map